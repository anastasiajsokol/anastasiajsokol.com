(()=>{var __webpack_modules__={74:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>SystemExternal});var _variables_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(714),_lib_external_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(268);const windowSupported=!("undefined"==typeof window),documentSupported=windowSupported&&!(void 0===window.document),webworker=!("undefined"==typeof DedicatedWorkerGlobalScope),nodeRequire=()=>{try{return eval("require")}catch(t){return e=>null}},SystemExternal={extRequire:e=>"undefined"!=typeof process&&"undefined"!=typeof require?nodeRequire()(e):null,windowSupported:windowSupported,documentSupported:documentSupported,webworker:webworker,xmldom:_lib_external_js__WEBPACK_IMPORTED_MODULE_1__.Gb,document:_lib_external_js__WEBPACK_IMPORTED_MODULE_1__.Al,fs:documentSupported||webworker?null:nodeRequire()("fs"),url:_variables_js__WEBPACK_IMPORTED_MODULE_0__.u.url,jsonPath:function(){if(documentSupported||webworker)return _variables_js__WEBPACK_IMPORTED_MODULE_0__.u.url;if(process.env.SRE_JSON_PATH||global.SRE_JSON_PATH)return process.env.SRE_JSON_PATH||global.SRE_JSON_PATH;try{return nodeRequire().resolve("speech-rule-engine").replace(/sre\.js$/,"")+"mathmaps"}catch(e){}try{return nodeRequire().resolve(".").replace(/sre\.js$/,"")+"mathmaps"}catch(e){}return"undefined"!=typeof __dirname?__dirname+(__dirname.match(/lib?$/)?"/mathmaps":"/lib/mathmaps"):process.cwd()+"/lib/mathmaps"}(),xpath:_lib_external_js__WEBPACK_IMPORTED_MODULE_1__.Oe}},159:(e,t,n)=>{"use strict";n=n(870).freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({Aacute:"Ã",aacute:"Ã¡",Abreve:"Ä‚",abreve:"Äƒ",ac:"âˆ¾",acd:"âˆ¿",acE:"âˆ¾Ì³",Acirc:"Ã‚",acirc:"Ã¢",acute:"Â´",Acy:"Ğ",acy:"Ğ°",AElig:"Ã†",aelig:"Ã¦",af:"â¡",Afr:"ğ”„",afr:"ğ”",Agrave:"Ã€",agrave:"Ã ",alefsym:"â„µ",aleph:"â„µ",Alpha:"Î‘",alpha:"Î±",Amacr:"Ä€",amacr:"Ä",amalg:"â¨¿",AMP:"&",amp:"&",And:"â©“",and:"âˆ§",andand:"â©•",andd:"â©œ",andslope:"â©˜",andv:"â©š",ang:"âˆ ",ange:"â¦¤",angle:"âˆ ",angmsd:"âˆ¡",angmsdaa:"â¦¨",angmsdab:"â¦©",angmsdac:"â¦ª",angmsdad:"â¦«",angmsdae:"â¦¬",angmsdaf:"â¦­",angmsdag:"â¦®",angmsdah:"â¦¯",angrt:"âˆŸ",angrtvb:"âŠ¾",angrtvbd:"â¦",angsph:"âˆ¢",angst:"Ã…",angzarr:"â¼",Aogon:"Ä„",aogon:"Ä…",Aopf:"ğ”¸",aopf:"ğ•’",ap:"â‰ˆ",apacir:"â©¯",apE:"â©°",ape:"â‰Š",apid:"â‰‹",apos:"'",ApplyFunction:"â¡",approx:"â‰ˆ",approxeq:"â‰Š",Aring:"Ã…",aring:"Ã¥",Ascr:"ğ’œ",ascr:"ğ’¶",Assign:"â‰”",ast:"*",asymp:"â‰ˆ",asympeq:"â‰",Atilde:"Ãƒ",atilde:"Ã£",Auml:"Ã„",auml:"Ã¤",awconint:"âˆ³",awint:"â¨‘",backcong:"â‰Œ",backepsilon:"Ï¶",backprime:"â€µ",backsim:"âˆ½",backsimeq:"â‹",Backslash:"âˆ–",Barv:"â«§",barvee:"âŠ½",Barwed:"âŒ†",barwed:"âŒ…",barwedge:"âŒ…",bbrk:"âµ",bbrktbrk:"â¶",bcong:"â‰Œ",Bcy:"Ğ‘",bcy:"Ğ±",bdquo:"â€",becaus:"âˆµ",Because:"âˆµ",because:"âˆµ",bemptyv:"â¦°",bepsi:"Ï¶",bernou:"â„¬",Bernoullis:"â„¬",Beta:"Î’",beta:"Î²",beth:"â„¶",between:"â‰¬",Bfr:"ğ”…",bfr:"ğ”Ÿ",bigcap:"â‹‚",bigcirc:"â—¯",bigcup:"â‹ƒ",bigodot:"â¨€",bigoplus:"â¨",bigotimes:"â¨‚",bigsqcup:"â¨†",bigstar:"â˜…",bigtriangledown:"â–½",bigtriangleup:"â–³",biguplus:"â¨„",bigvee:"â‹",bigwedge:"â‹€",bkarow:"â¤",blacklozenge:"â§«",blacksquare:"â–ª",blacktriangle:"â–´",blacktriangledown:"â–¾",blacktriangleleft:"â—‚",blacktriangleright:"â–¸",blank:"â£",blk12:"â–’",blk14:"â–‘",blk34:"â–“",block:"â–ˆ",bne:"=âƒ¥",bnequiv:"â‰¡âƒ¥",bNot:"â«­",bnot:"âŒ",Bopf:"ğ”¹",bopf:"ğ•“",bot:"âŠ¥",bottom:"âŠ¥",bowtie:"â‹ˆ",boxbox:"â§‰",boxDL:"â•—",boxDl:"â•–",boxdL:"â••",boxdl:"â”",boxDR:"â•”",boxDr:"â•“",boxdR:"â•’",boxdr:"â”Œ",boxH:"â•",boxh:"â”€",boxHD:"â•¦",boxHd:"â•¤",boxhD:"â•¥",boxhd:"â”¬",boxHU:"â•©",boxHu:"â•§",boxhU:"â•¨",boxhu:"â”´",boxminus:"âŠŸ",boxplus:"âŠ",boxtimes:"âŠ ",boxUL:"â•",boxUl:"â•œ",boxuL:"â•›",boxul:"â”˜",boxUR:"â•š",boxUr:"â•™",boxuR:"â•˜",boxur:"â””",boxV:"â•‘",boxv:"â”‚",boxVH:"â•¬",boxVh:"â•«",boxvH:"â•ª",boxvh:"â”¼",boxVL:"â•£",boxVl:"â•¢",boxvL:"â•¡",boxvl:"â”¤",boxVR:"â• ",boxVr:"â•Ÿ",boxvR:"â•",boxvr:"â”œ",bprime:"â€µ",Breve:"Ë˜",breve:"Ë˜",brvbar:"Â¦",Bscr:"â„¬",bscr:"ğ’·",bsemi:"â",bsim:"âˆ½",bsime:"â‹",bsol:"\\",bsolb:"â§…",bsolhsub:"âŸˆ",bull:"â€¢",bullet:"â€¢",bump:"â‰",bumpE:"âª®",bumpe:"â‰",Bumpeq:"â‰",bumpeq:"â‰",Cacute:"Ä†",cacute:"Ä‡",Cap:"â‹’",cap:"âˆ©",capand:"â©„",capbrcup:"â©‰",capcap:"â©‹",capcup:"â©‡",capdot:"â©€",CapitalDifferentialD:"â……",caps:"âˆ©ï¸€",caret:"â",caron:"Ë‡",Cayleys:"â„­",ccaps:"â©",Ccaron:"ÄŒ",ccaron:"Ä",Ccedil:"Ã‡",ccedil:"Ã§",Ccirc:"Äˆ",ccirc:"Ä‰",Cconint:"âˆ°",ccups:"â©Œ",ccupssm:"â©",Cdot:"ÄŠ",cdot:"Ä‹",cedil:"Â¸",Cedilla:"Â¸",cemptyv:"â¦²",cent:"Â¢",CenterDot:"Â·",centerdot:"Â·",Cfr:"â„­",cfr:"ğ” ",CHcy:"Ğ§",chcy:"Ñ‡",check:"âœ“",checkmark:"âœ“",Chi:"Î§",chi:"Ï‡",cir:"â—‹",circ:"Ë†",circeq:"â‰—",circlearrowleft:"â†º",circlearrowright:"â†»",circledast:"âŠ›",circledcirc:"âŠš",circleddash:"âŠ",CircleDot:"âŠ™",circledR:"Â®",circledS:"â“ˆ",CircleMinus:"âŠ–",CirclePlus:"âŠ•",CircleTimes:"âŠ—",cirE:"â§ƒ",cire:"â‰—",cirfnint:"â¨",cirmid:"â«¯",cirscir:"â§‚",ClockwiseContourIntegral:"âˆ²",CloseCurlyDoubleQuote:"â€",CloseCurlyQuote:"â€™",clubs:"â™£",clubsuit:"â™£",Colon:"âˆ·",colon:":",Colone:"â©´",colone:"â‰”",coloneq:"â‰”",comma:",",commat:"@",comp:"âˆ",compfn:"âˆ˜",complement:"âˆ",complexes:"â„‚",cong:"â‰…",congdot:"â©­",Congruent:"â‰¡",Conint:"âˆ¯",conint:"âˆ®",ContourIntegral:"âˆ®",Copf:"â„‚",copf:"ğ•”",coprod:"âˆ",Coproduct:"âˆ",COPY:"Â©",copy:"Â©",copysr:"â„—",CounterClockwiseContourIntegral:"âˆ³",crarr:"â†µ",Cross:"â¨¯",cross:"âœ—",Cscr:"ğ’",cscr:"ğ’¸",csub:"â«",csube:"â«‘",csup:"â«",csupe:"â«’",ctdot:"â‹¯",cudarrl:"â¤¸",cudarrr:"â¤µ",cuepr:"â‹",cuesc:"â‹Ÿ",cularr:"â†¶",cularrp:"â¤½",Cup:"â‹“",cup:"âˆª",cupbrcap:"â©ˆ",CupCap:"â‰",cupcap:"â©†",cupcup:"â©Š",cupdot:"âŠ",cupor:"â©…",cups:"âˆªï¸€",curarr:"â†·",curarrm:"â¤¼",curlyeqprec:"â‹",curlyeqsucc:"â‹Ÿ",curlyvee:"â‹",curlywedge:"â‹",curren:"Â¤",curvearrowleft:"â†¶",curvearrowright:"â†·",cuvee:"â‹",cuwed:"â‹",cwconint:"âˆ²",cwint:"âˆ±",cylcty:"âŒ­",Dagger:"â€¡",dagger:"â€ ",daleth:"â„¸",Darr:"â†¡",dArr:"â‡“",darr:"â†“",dash:"â€",Dashv:"â«¤",dashv:"âŠ£",dbkarow:"â¤",dblac:"Ë",Dcaron:"Ä",dcaron:"Ä",Dcy:"Ğ”",dcy:"Ğ´",DD:"â……",dd:"â…†",ddagger:"â€¡",ddarr:"â‡Š",DDotrahd:"â¤‘",ddotseq:"â©·",deg:"Â°",Del:"âˆ‡",Delta:"Î”",delta:"Î´",demptyv:"â¦±",dfisht:"â¥¿",Dfr:"ğ”‡",dfr:"ğ”¡",dHar:"â¥¥",dharl:"â‡ƒ",dharr:"â‡‚",DiacriticalAcute:"Â´",DiacriticalDot:"Ë™",DiacriticalDoubleAcute:"Ë",DiacriticalGrave:"`",DiacriticalTilde:"Ëœ",diam:"â‹„",Diamond:"â‹„",diamond:"â‹„",diamondsuit:"â™¦",diams:"â™¦",die:"Â¨",DifferentialD:"â…†",digamma:"Ï",disin:"â‹²",div:"Ã·",divide:"Ã·",divideontimes:"â‹‡",divonx:"â‹‡",DJcy:"Ğ‚",djcy:"Ñ’",dlcorn:"âŒ",dlcrop:"âŒ",dollar:"$",Dopf:"ğ”»",dopf:"ğ••",Dot:"Â¨",dot:"Ë™",DotDot:"âƒœ",doteq:"â‰",doteqdot:"â‰‘",DotEqual:"â‰",dotminus:"âˆ¸",dotplus:"âˆ”",dotsquare:"âŠ¡",doublebarwedge:"âŒ†",DoubleContourIntegral:"âˆ¯",DoubleDot:"Â¨",DoubleDownArrow:"â‡“",DoubleLeftArrow:"â‡",DoubleLeftRightArrow:"â‡”",DoubleLeftTee:"â«¤",DoubleLongLeftArrow:"âŸ¸",DoubleLongLeftRightArrow:"âŸº",DoubleLongRightArrow:"âŸ¹",DoubleRightArrow:"â‡’",DoubleRightTee:"âŠ¨",DoubleUpArrow:"â‡‘",DoubleUpDownArrow:"â‡•",DoubleVerticalBar:"âˆ¥",DownArrow:"â†“",Downarrow:"â‡“",downarrow:"â†“",DownArrowBar:"â¤“",DownArrowUpArrow:"â‡µ",DownBreve:"Ì‘",downdownarrows:"â‡Š",downharpoonleft:"â‡ƒ",downharpoonright:"â‡‚",DownLeftRightVector:"â¥",DownLeftTeeVector:"â¥",DownLeftVector:"â†½",DownLeftVectorBar:"â¥–",DownRightTeeVector:"â¥Ÿ",DownRightVector:"â‡",DownRightVectorBar:"â¥—",DownTee:"âŠ¤",DownTeeArrow:"â†§",drbkarow:"â¤",drcorn:"âŒŸ",drcrop:"âŒŒ",Dscr:"ğ’Ÿ",dscr:"ğ’¹",DScy:"Ğ…",dscy:"Ñ•",dsol:"â§¶",Dstrok:"Ä",dstrok:"Ä‘",dtdot:"â‹±",dtri:"â–¿",dtrif:"â–¾",duarr:"â‡µ",duhar:"â¥¯",dwangle:"â¦¦",DZcy:"Ğ",dzcy:"ÑŸ",dzigrarr:"âŸ¿",Eacute:"Ã‰",eacute:"Ã©",easter:"â©®",Ecaron:"Äš",ecaron:"Ä›",ecir:"â‰–",Ecirc:"ÃŠ",ecirc:"Ãª",ecolon:"â‰•",Ecy:"Ğ­",ecy:"Ñ",eDDot:"â©·",Edot:"Ä–",eDot:"â‰‘",edot:"Ä—",ee:"â…‡",efDot:"â‰’",Efr:"ğ”ˆ",efr:"ğ”¢",eg:"âªš",Egrave:"Ãˆ",egrave:"Ã¨",egs:"âª–",egsdot:"âª˜",el:"âª™",Element:"âˆˆ",elinters:"â§",ell:"â„“",els:"âª•",elsdot:"âª—",Emacr:"Ä’",emacr:"Ä“",empty:"âˆ…",emptyset:"âˆ…",EmptySmallSquare:"â—»",emptyv:"âˆ…",EmptyVerySmallSquare:"â–«",emsp:"â€ƒ",emsp13:"â€„",emsp14:"â€…",ENG:"ÅŠ",eng:"Å‹",ensp:"â€‚",Eogon:"Ä˜",eogon:"Ä™",Eopf:"ğ”¼",eopf:"ğ•–",epar:"â‹•",eparsl:"â§£",eplus:"â©±",epsi:"Îµ",Epsilon:"Î•",epsilon:"Îµ",epsiv:"Ïµ",eqcirc:"â‰–",eqcolon:"â‰•",eqsim:"â‰‚",eqslantgtr:"âª–",eqslantless:"âª•",Equal:"â©µ",equals:"=",EqualTilde:"â‰‚",equest:"â‰Ÿ",Equilibrium:"â‡Œ",equiv:"â‰¡",equivDD:"â©¸",eqvparsl:"â§¥",erarr:"â¥±",erDot:"â‰“",Escr:"â„°",escr:"â„¯",esdot:"â‰",Esim:"â©³",esim:"â‰‚",Eta:"Î—",eta:"Î·",ETH:"Ã",eth:"Ã°",Euml:"Ã‹",euml:"Ã«",euro:"â‚¬",excl:"!",exist:"âˆƒ",Exists:"âˆƒ",expectation:"â„°",ExponentialE:"â…‡",exponentiale:"â…‡",fallingdotseq:"â‰’",Fcy:"Ğ¤",fcy:"Ñ„",female:"â™€",ffilig:"ï¬ƒ",fflig:"ï¬€",ffllig:"ï¬„",Ffr:"ğ”‰",ffr:"ğ”£",filig:"ï¬",FilledSmallSquare:"â—¼",FilledVerySmallSquare:"â–ª",fjlig:"fj",flat:"â™­",fllig:"ï¬‚",fltns:"â–±",fnof:"Æ’",Fopf:"ğ”½",fopf:"ğ•—",ForAll:"âˆ€",forall:"âˆ€",fork:"â‹”",forkv:"â«™",Fouriertrf:"â„±",fpartint:"â¨",frac12:"Â½",frac13:"â…“",frac14:"Â¼",frac15:"â…•",frac16:"â…™",frac18:"â…›",frac23:"â…”",frac25:"â…–",frac34:"Â¾",frac35:"â…—",frac38:"â…œ",frac45:"â…˜",frac56:"â…š",frac58:"â…",frac78:"â…",frasl:"â„",frown:"âŒ¢",Fscr:"â„±",fscr:"ğ’»",gacute:"Çµ",Gamma:"Î“",gamma:"Î³",Gammad:"Ïœ",gammad:"Ï",gap:"âª†",Gbreve:"Ä",gbreve:"ÄŸ",Gcedil:"Ä¢",Gcirc:"Äœ",gcirc:"Ä",Gcy:"Ğ“",gcy:"Ğ³",Gdot:"Ä ",gdot:"Ä¡",gE:"â‰§",ge:"â‰¥",gEl:"âªŒ",gel:"â‹›",geq:"â‰¥",geqq:"â‰§",geqslant:"â©¾",ges:"â©¾",gescc:"âª©",gesdot:"âª€",gesdoto:"âª‚",gesdotol:"âª„",gesl:"â‹›ï¸€",gesles:"âª”",Gfr:"ğ”Š",gfr:"ğ”¤",Gg:"â‹™",gg:"â‰«",ggg:"â‹™",gimel:"â„·",GJcy:"Ğƒ",gjcy:"Ñ“",gl:"â‰·",gla:"âª¥",glE:"âª’",glj:"âª¤",gnap:"âªŠ",gnapprox:"âªŠ",gnE:"â‰©",gne:"âªˆ",gneq:"âªˆ",gneqq:"â‰©",gnsim:"â‹§",Gopf:"ğ”¾",gopf:"ğ•˜",grave:"`",GreaterEqual:"â‰¥",GreaterEqualLess:"â‹›",GreaterFullEqual:"â‰§",GreaterGreater:"âª¢",GreaterLess:"â‰·",GreaterSlantEqual:"â©¾",GreaterTilde:"â‰³",Gscr:"ğ’¢",gscr:"â„Š",gsim:"â‰³",gsime:"âª",gsiml:"âª",Gt:"â‰«",GT:">",gt:">",gtcc:"âª§",gtcir:"â©º",gtdot:"â‹—",gtlPar:"â¦•",gtquest:"â©¼",gtrapprox:"âª†",gtrarr:"â¥¸",gtrdot:"â‹—",gtreqless:"â‹›",gtreqqless:"âªŒ",gtrless:"â‰·",gtrsim:"â‰³",gvertneqq:"â‰©ï¸€",gvnE:"â‰©ï¸€",Hacek:"Ë‡",hairsp:"â€Š",half:"Â½",hamilt:"â„‹",HARDcy:"Ğª",hardcy:"ÑŠ",hArr:"â‡”",harr:"â†”",harrcir:"â¥ˆ",harrw:"â†­",Hat:"^",hbar:"â„",Hcirc:"Ä¤",hcirc:"Ä¥",hearts:"â™¥",heartsuit:"â™¥",hellip:"â€¦",hercon:"âŠ¹",Hfr:"â„Œ",hfr:"ğ”¥",HilbertSpace:"â„‹",hksearow:"â¤¥",hkswarow:"â¤¦",hoarr:"â‡¿",homtht:"âˆ»",hookleftarrow:"â†©",hookrightarrow:"â†ª",Hopf:"â„",hopf:"ğ•™",horbar:"â€•",HorizontalLine:"â”€",Hscr:"â„‹",hscr:"ğ’½",hslash:"â„",Hstrok:"Ä¦",hstrok:"Ä§",HumpDownHump:"â‰",HumpEqual:"â‰",hybull:"âƒ",hyphen:"â€",Iacute:"Ã",iacute:"Ã­",ic:"â£",Icirc:"Ã",icirc:"Ã®",Icy:"Ğ˜",icy:"Ğ¸",Idot:"Ä°",IEcy:"Ğ•",iecy:"Ğµ",iexcl:"Â¡",iff:"â‡”",Ifr:"â„‘",ifr:"ğ”¦",Igrave:"ÃŒ",igrave:"Ã¬",ii:"â…ˆ",iiiint:"â¨Œ",iiint:"âˆ­",iinfin:"â§œ",iiota:"â„©",IJlig:"Ä²",ijlig:"Ä³",Im:"â„‘",Imacr:"Äª",imacr:"Ä«",image:"â„‘",ImaginaryI:"â…ˆ",imagline:"â„",imagpart:"â„‘",imath:"Ä±",imof:"âŠ·",imped:"Æµ",Implies:"â‡’",in:"âˆˆ",incare:"â„…",infin:"âˆ",infintie:"â§",inodot:"Ä±",Int:"âˆ¬",int:"âˆ«",intcal:"âŠº",integers:"â„¤",Integral:"âˆ«",intercal:"âŠº",Intersection:"â‹‚",intlarhk:"â¨—",intprod:"â¨¼",InvisibleComma:"â£",InvisibleTimes:"â¢",IOcy:"Ğ",iocy:"Ñ‘",Iogon:"Ä®",iogon:"Ä¯",Iopf:"ğ•€",iopf:"ğ•š",Iota:"Î™",iota:"Î¹",iprod:"â¨¼",iquest:"Â¿",Iscr:"â„",iscr:"ğ’¾",isin:"âˆˆ",isindot:"â‹µ",isinE:"â‹¹",isins:"â‹´",isinsv:"â‹³",isinv:"âˆˆ",it:"â¢",Itilde:"Ä¨",itilde:"Ä©",Iukcy:"Ğ†",iukcy:"Ñ–",Iuml:"Ã",iuml:"Ã¯",Jcirc:"Ä´",jcirc:"Äµ",Jcy:"Ğ™",jcy:"Ğ¹",Jfr:"ğ”",jfr:"ğ”§",jmath:"È·",Jopf:"ğ•",jopf:"ğ•›",Jscr:"ğ’¥",jscr:"ğ’¿",Jsercy:"Ğˆ",jsercy:"Ñ˜",Jukcy:"Ğ„",jukcy:"Ñ”",Kappa:"Îš",kappa:"Îº",kappav:"Ï°",Kcedil:"Ä¶",kcedil:"Ä·",Kcy:"Ğš",kcy:"Ğº",Kfr:"ğ”",kfr:"ğ”¨",kgreen:"Ä¸",KHcy:"Ğ¥",khcy:"Ñ…",KJcy:"ĞŒ",kjcy:"Ñœ",Kopf:"ğ•‚",kopf:"ğ•œ",Kscr:"ğ’¦",kscr:"ğ“€",lAarr:"â‡š",Lacute:"Ä¹",lacute:"Äº",laemptyv:"â¦´",lagran:"â„’",Lambda:"Î›",lambda:"Î»",Lang:"âŸª",lang:"âŸ¨",langd:"â¦‘",langle:"âŸ¨",lap:"âª…",Laplacetrf:"â„’",laquo:"Â«",Larr:"â†",lArr:"â‡",larr:"â†",larrb:"â‡¤",larrbfs:"â¤Ÿ",larrfs:"â¤",larrhk:"â†©",larrlp:"â†«",larrpl:"â¤¹",larrsim:"â¥³",larrtl:"â†¢",lat:"âª«",lAtail:"â¤›",latail:"â¤™",late:"âª­",lates:"âª­ï¸€",lBarr:"â¤",lbarr:"â¤Œ",lbbrk:"â²",lbrace:"{",lbrack:"[",lbrke:"â¦‹",lbrksld:"â¦",lbrkslu:"â¦",Lcaron:"Ä½",lcaron:"Ä¾",Lcedil:"Ä»",lcedil:"Ä¼",lceil:"âŒˆ",lcub:"{",Lcy:"Ğ›",lcy:"Ğ»",ldca:"â¤¶",ldquo:"â€œ",ldquor:"â€",ldrdhar:"â¥§",ldrushar:"â¥‹",ldsh:"â†²",lE:"â‰¦",le:"â‰¤",LeftAngleBracket:"âŸ¨",LeftArrow:"â†",Leftarrow:"â‡",leftarrow:"â†",LeftArrowBar:"â‡¤",LeftArrowRightArrow:"â‡†",leftarrowtail:"â†¢",LeftCeiling:"âŒˆ",LeftDoubleBracket:"âŸ¦",LeftDownTeeVector:"â¥¡",LeftDownVector:"â‡ƒ",LeftDownVectorBar:"â¥™",LeftFloor:"âŒŠ",leftharpoondown:"â†½",leftharpoonup:"â†¼",leftleftarrows:"â‡‡",LeftRightArrow:"â†”",Leftrightarrow:"â‡”",leftrightarrow:"â†”",leftrightarrows:"â‡†",leftrightharpoons:"â‡‹",leftrightsquigarrow:"â†­",LeftRightVector:"â¥",LeftTee:"âŠ£",LeftTeeArrow:"â†¤",LeftTeeVector:"â¥š",leftthreetimes:"â‹‹",LeftTriangle:"âŠ²",LeftTriangleBar:"â§",LeftTriangleEqual:"âŠ´",LeftUpDownVector:"â¥‘",LeftUpTeeVector:"â¥ ",LeftUpVector:"â†¿",LeftUpVectorBar:"â¥˜",LeftVector:"â†¼",LeftVectorBar:"â¥’",lEg:"âª‹",leg:"â‹š",leq:"â‰¤",leqq:"â‰¦",leqslant:"â©½",les:"â©½",lescc:"âª¨",lesdot:"â©¿",lesdoto:"âª",lesdotor:"âªƒ",lesg:"â‹šï¸€",lesges:"âª“",lessapprox:"âª…",lessdot:"â‹–",lesseqgtr:"â‹š",lesseqqgtr:"âª‹",LessEqualGreater:"â‹š",LessFullEqual:"â‰¦",LessGreater:"â‰¶",lessgtr:"â‰¶",LessLess:"âª¡",lesssim:"â‰²",LessSlantEqual:"â©½",LessTilde:"â‰²",lfisht:"â¥¼",lfloor:"âŒŠ",Lfr:"ğ”",lfr:"ğ”©",lg:"â‰¶",lgE:"âª‘",lHar:"â¥¢",lhard:"â†½",lharu:"â†¼",lharul:"â¥ª",lhblk:"â–„",LJcy:"Ğ‰",ljcy:"Ñ™",Ll:"â‹˜",ll:"â‰ª",llarr:"â‡‡",llcorner:"âŒ",Lleftarrow:"â‡š",llhard:"â¥«",lltri:"â—º",Lmidot:"Ä¿",lmidot:"Å€",lmoust:"â°",lmoustache:"â°",lnap:"âª‰",lnapprox:"âª‰",lnE:"â‰¨",lne:"âª‡",lneq:"âª‡",lneqq:"â‰¨",lnsim:"â‹¦",loang:"âŸ¬",loarr:"â‡½",lobrk:"âŸ¦",LongLeftArrow:"âŸµ",Longleftarrow:"âŸ¸",longleftarrow:"âŸµ",LongLeftRightArrow:"âŸ·",Longleftrightarrow:"âŸº",longleftrightarrow:"âŸ·",longmapsto:"âŸ¼",LongRightArrow:"âŸ¶",Longrightarrow:"âŸ¹",longrightarrow:"âŸ¶",looparrowleft:"â†«",looparrowright:"â†¬",lopar:"â¦…",Lopf:"ğ•ƒ",lopf:"ğ•",loplus:"â¨­",lotimes:"â¨´",lowast:"âˆ—",lowbar:"_",LowerLeftArrow:"â†™",LowerRightArrow:"â†˜",loz:"â—Š",lozenge:"â—Š",lozf:"â§«",lpar:"(",lparlt:"â¦“",lrarr:"â‡†",lrcorner:"âŒŸ",lrhar:"â‡‹",lrhard:"â¥­",lrm:"â€",lrtri:"âŠ¿",lsaquo:"â€¹",Lscr:"â„’",lscr:"ğ“",Lsh:"â†°",lsh:"â†°",lsim:"â‰²",lsime:"âª",lsimg:"âª",lsqb:"[",lsquo:"â€˜",lsquor:"â€š",Lstrok:"Å",lstrok:"Å‚",Lt:"â‰ª",LT:"<",lt:"<",ltcc:"âª¦",ltcir:"â©¹",ltdot:"â‹–",lthree:"â‹‹",ltimes:"â‹‰",ltlarr:"â¥¶",ltquest:"â©»",ltri:"â—ƒ",ltrie:"âŠ´",ltrif:"â—‚",ltrPar:"â¦–",lurdshar:"â¥Š",luruhar:"â¥¦",lvertneqq:"â‰¨ï¸€",lvnE:"â‰¨ï¸€",macr:"Â¯",male:"â™‚",malt:"âœ ",maltese:"âœ ",Map:"â¤…",map:"â†¦",mapsto:"â†¦",mapstodown:"â†§",mapstoleft:"â†¤",mapstoup:"â†¥",marker:"â–®",mcomma:"â¨©",Mcy:"Ğœ",mcy:"Ğ¼",mdash:"â€”",mDDot:"âˆº",measuredangle:"âˆ¡",MediumSpace:"âŸ",Mellintrf:"â„³",Mfr:"ğ”",mfr:"ğ”ª",mho:"â„§",micro:"Âµ",mid:"âˆ£",midast:"*",midcir:"â«°",middot:"Â·",minus:"âˆ’",minusb:"âŠŸ",minusd:"âˆ¸",minusdu:"â¨ª",MinusPlus:"âˆ“",mlcp:"â«›",mldr:"â€¦",mnplus:"âˆ“",models:"âŠ§",Mopf:"ğ•„",mopf:"ğ•",mp:"âˆ“",Mscr:"â„³",mscr:"ğ“‚",mstpos:"âˆ¾",Mu:"Îœ",mu:"Î¼",multimap:"âŠ¸",mumap:"âŠ¸",nabla:"âˆ‡",Nacute:"Åƒ",nacute:"Å„",nang:"âˆ âƒ’",nap:"â‰‰",napE:"â©°Ì¸",napid:"â‰‹Ì¸",napos:"Å‰",napprox:"â‰‰",natur:"â™®",natural:"â™®",naturals:"â„•",nbsp:"Â ",nbump:"â‰Ì¸",nbumpe:"â‰Ì¸",ncap:"â©ƒ",Ncaron:"Å‡",ncaron:"Åˆ",Ncedil:"Å…",ncedil:"Å†",ncong:"â‰‡",ncongdot:"â©­Ì¸",ncup:"â©‚",Ncy:"Ğ",ncy:"Ğ½",ndash:"â€“",ne:"â‰ ",nearhk:"â¤¤",neArr:"â‡—",nearr:"â†—",nearrow:"â†—",nedot:"â‰Ì¸",NegativeMediumSpace:"â€‹",NegativeThickSpace:"â€‹",NegativeThinSpace:"â€‹",NegativeVeryThinSpace:"â€‹",nequiv:"â‰¢",nesear:"â¤¨",nesim:"â‰‚Ì¸",NestedGreaterGreater:"â‰«",NestedLessLess:"â‰ª",NewLine:"\n",nexist:"âˆ„",nexists:"âˆ„",Nfr:"ğ”‘",nfr:"ğ”«",ngE:"â‰§Ì¸",nge:"â‰±",ngeq:"â‰±",ngeqq:"â‰§Ì¸",ngeqslant:"â©¾Ì¸",nges:"â©¾Ì¸",nGg:"â‹™Ì¸",ngsim:"â‰µ",nGt:"â‰«âƒ’",ngt:"â‰¯",ngtr:"â‰¯",nGtv:"â‰«Ì¸",nhArr:"â‡",nharr:"â†®",nhpar:"â«²",ni:"âˆ‹",nis:"â‹¼",nisd:"â‹º",niv:"âˆ‹",NJcy:"ĞŠ",njcy:"Ñš",nlArr:"â‡",nlarr:"â†š",nldr:"â€¥",nlE:"â‰¦Ì¸",nle:"â‰°",nLeftarrow:"â‡",nleftarrow:"â†š",nLeftrightarrow:"â‡",nleftrightarrow:"â†®",nleq:"â‰°",nleqq:"â‰¦Ì¸",nleqslant:"â©½Ì¸",nles:"â©½Ì¸",nless:"â‰®",nLl:"â‹˜Ì¸",nlsim:"â‰´",nLt:"â‰ªâƒ’",nlt:"â‰®",nltri:"â‹ª",nltrie:"â‹¬",nLtv:"â‰ªÌ¸",nmid:"âˆ¤",NoBreak:"â ",NonBreakingSpace:"Â ",Nopf:"â„•",nopf:"ğ•Ÿ",Not:"â«¬",not:"Â¬",NotCongruent:"â‰¢",NotCupCap:"â‰­",NotDoubleVerticalBar:"âˆ¦",NotElement:"âˆ‰",NotEqual:"â‰ ",NotEqualTilde:"â‰‚Ì¸",NotExists:"âˆ„",NotGreater:"â‰¯",NotGreaterEqual:"â‰±",NotGreaterFullEqual:"â‰§Ì¸",NotGreaterGreater:"â‰«Ì¸",NotGreaterLess:"â‰¹",NotGreaterSlantEqual:"â©¾Ì¸",NotGreaterTilde:"â‰µ",NotHumpDownHump:"â‰Ì¸",NotHumpEqual:"â‰Ì¸",notin:"âˆ‰",notindot:"â‹µÌ¸",notinE:"â‹¹Ì¸",notinva:"âˆ‰",notinvb:"â‹·",notinvc:"â‹¶",NotLeftTriangle:"â‹ª",NotLeftTriangleBar:"â§Ì¸",NotLeftTriangleEqual:"â‹¬",NotLess:"â‰®",NotLessEqual:"â‰°",NotLessGreater:"â‰¸",NotLessLess:"â‰ªÌ¸",NotLessSlantEqual:"â©½Ì¸",NotLessTilde:"â‰´",NotNestedGreaterGreater:"âª¢Ì¸",NotNestedLessLess:"âª¡Ì¸",notni:"âˆŒ",notniva:"âˆŒ",notnivb:"â‹¾",notnivc:"â‹½",NotPrecedes:"âŠ€",NotPrecedesEqual:"âª¯Ì¸",NotPrecedesSlantEqual:"â‹ ",NotReverseElement:"âˆŒ",NotRightTriangle:"â‹«",NotRightTriangleBar:"â§Ì¸",NotRightTriangleEqual:"â‹­",NotSquareSubset:"âŠÌ¸",NotSquareSubsetEqual:"â‹¢",NotSquareSuperset:"âŠÌ¸",NotSquareSupersetEqual:"â‹£",NotSubset:"âŠ‚âƒ’",NotSubsetEqual:"âŠˆ",NotSucceeds:"âŠ",NotSucceedsEqual:"âª°Ì¸",NotSucceedsSlantEqual:"â‹¡",NotSucceedsTilde:"â‰¿Ì¸",NotSuperset:"âŠƒâƒ’",NotSupersetEqual:"âŠ‰",NotTilde:"â‰",NotTildeEqual:"â‰„",NotTildeFullEqual:"â‰‡",NotTildeTilde:"â‰‰",NotVerticalBar:"âˆ¤",npar:"âˆ¦",nparallel:"âˆ¦",nparsl:"â«½âƒ¥",npart:"âˆ‚Ì¸",npolint:"â¨”",npr:"âŠ€",nprcue:"â‹ ",npre:"âª¯Ì¸",nprec:"âŠ€",npreceq:"âª¯Ì¸",nrArr:"â‡",nrarr:"â†›",nrarrc:"â¤³Ì¸",nrarrw:"â†Ì¸",nRightarrow:"â‡",nrightarrow:"â†›",nrtri:"â‹«",nrtrie:"â‹­",nsc:"âŠ",nsccue:"â‹¡",nsce:"âª°Ì¸",Nscr:"ğ’©",nscr:"ğ“ƒ",nshortmid:"âˆ¤",nshortparallel:"âˆ¦",nsim:"â‰",nsime:"â‰„",nsimeq:"â‰„",nsmid:"âˆ¤",nspar:"âˆ¦",nsqsube:"â‹¢",nsqsupe:"â‹£",nsub:"âŠ„",nsubE:"â«…Ì¸",nsube:"âŠˆ",nsubset:"âŠ‚âƒ’",nsubseteq:"âŠˆ",nsubseteqq:"â«…Ì¸",nsucc:"âŠ",nsucceq:"âª°Ì¸",nsup:"âŠ…",nsupE:"â«†Ì¸",nsupe:"âŠ‰",nsupset:"âŠƒâƒ’",nsupseteq:"âŠ‰",nsupseteqq:"â«†Ì¸",ntgl:"â‰¹",Ntilde:"Ã‘",ntilde:"Ã±",ntlg:"â‰¸",ntriangleleft:"â‹ª",ntrianglelefteq:"â‹¬",ntriangleright:"â‹«",ntrianglerighteq:"â‹­",Nu:"Î",nu:"Î½",num:"#",numero:"â„–",numsp:"â€‡",nvap:"â‰âƒ’",nVDash:"âŠ¯",nVdash:"âŠ®",nvDash:"âŠ­",nvdash:"âŠ¬",nvge:"â‰¥âƒ’",nvgt:">âƒ’",nvHarr:"â¤„",nvinfin:"â§",nvlArr:"â¤‚",nvle:"â‰¤âƒ’",nvlt:"<âƒ’",nvltrie:"âŠ´âƒ’",nvrArr:"â¤ƒ",nvrtrie:"âŠµâƒ’",nvsim:"âˆ¼âƒ’",nwarhk:"â¤£",nwArr:"â‡–",nwarr:"â†–",nwarrow:"â†–",nwnear:"â¤§",Oacute:"Ã“",oacute:"Ã³",oast:"âŠ›",ocir:"âŠš",Ocirc:"Ã”",ocirc:"Ã´",Ocy:"Ğ",ocy:"Ğ¾",odash:"âŠ",Odblac:"Å",odblac:"Å‘",odiv:"â¨¸",odot:"âŠ™",odsold:"â¦¼",OElig:"Å’",oelig:"Å“",ofcir:"â¦¿",Ofr:"ğ”’",ofr:"ğ”¬",ogon:"Ë›",Ograve:"Ã’",ograve:"Ã²",ogt:"â§",ohbar:"â¦µ",ohm:"Î©",oint:"âˆ®",olarr:"â†º",olcir:"â¦¾",olcross:"â¦»",oline:"â€¾",olt:"â§€",Omacr:"ÅŒ",omacr:"Å",Omega:"Î©",omega:"Ï‰",Omicron:"ÎŸ",omicron:"Î¿",omid:"â¦¶",ominus:"âŠ–",Oopf:"ğ•†",oopf:"ğ• ",opar:"â¦·",OpenCurlyDoubleQuote:"â€œ",OpenCurlyQuote:"â€˜",operp:"â¦¹",oplus:"âŠ•",Or:"â©”",or:"âˆ¨",orarr:"â†»",ord:"â©",order:"â„´",orderof:"â„´",ordf:"Âª",ordm:"Âº",origof:"âŠ¶",oror:"â©–",orslope:"â©—",orv:"â©›",oS:"â“ˆ",Oscr:"ğ’ª",oscr:"â„´",Oslash:"Ã˜",oslash:"Ã¸",osol:"âŠ˜",Otilde:"Ã•",otilde:"Ãµ",Otimes:"â¨·",otimes:"âŠ—",otimesas:"â¨¶",Ouml:"Ã–",ouml:"Ã¶",ovbar:"âŒ½",OverBar:"â€¾",OverBrace:"â",OverBracket:"â´",OverParenthesis:"âœ",par:"âˆ¥",para:"Â¶",parallel:"âˆ¥",parsim:"â«³",parsl:"â«½",part:"âˆ‚",PartialD:"âˆ‚",Pcy:"ĞŸ",pcy:"Ğ¿",percnt:"%",period:".",permil:"â€°",perp:"âŠ¥",pertenk:"â€±",Pfr:"ğ”“",pfr:"ğ”­",Phi:"Î¦",phi:"Ï†",phiv:"Ï•",phmmat:"â„³",phone:"â˜",Pi:"Î ",pi:"Ï€",pitchfork:"â‹”",piv:"Ï–",planck:"â„",planckh:"â„",plankv:"â„",plus:"+",plusacir:"â¨£",plusb:"âŠ",pluscir:"â¨¢",plusdo:"âˆ”",plusdu:"â¨¥",pluse:"â©²",PlusMinus:"Â±",plusmn:"Â±",plussim:"â¨¦",plustwo:"â¨§",pm:"Â±",Poincareplane:"â„Œ",pointint:"â¨•",Popf:"â„™",popf:"ğ•¡",pound:"Â£",Pr:"âª»",pr:"â‰º",prap:"âª·",prcue:"â‰¼",prE:"âª³",pre:"âª¯",prec:"â‰º",precapprox:"âª·",preccurlyeq:"â‰¼",Precedes:"â‰º",PrecedesEqual:"âª¯",PrecedesSlantEqual:"â‰¼",PrecedesTilde:"â‰¾",preceq:"âª¯",precnapprox:"âª¹",precneqq:"âªµ",precnsim:"â‹¨",precsim:"â‰¾",Prime:"â€³",prime:"â€²",primes:"â„™",prnap:"âª¹",prnE:"âªµ",prnsim:"â‹¨",prod:"âˆ",Product:"âˆ",profalar:"âŒ®",profline:"âŒ’",profsurf:"âŒ“",prop:"âˆ",Proportion:"âˆ·",Proportional:"âˆ",propto:"âˆ",prsim:"â‰¾",prurel:"âŠ°",Pscr:"ğ’«",pscr:"ğ“…",Psi:"Î¨",psi:"Ïˆ",puncsp:"â€ˆ",Qfr:"ğ””",qfr:"ğ”®",qint:"â¨Œ",Qopf:"â„š",qopf:"ğ•¢",qprime:"â—",Qscr:"ğ’¬",qscr:"ğ“†",quaternions:"â„",quatint:"â¨–",quest:"?",questeq:"â‰Ÿ",QUOT:'"',quot:'"',rAarr:"â‡›",race:"âˆ½Ì±",Racute:"Å”",racute:"Å•",radic:"âˆš",raemptyv:"â¦³",Rang:"âŸ«",rang:"âŸ©",rangd:"â¦’",range:"â¦¥",rangle:"âŸ©",raquo:"Â»",Rarr:"â† ",rArr:"â‡’",rarr:"â†’",rarrap:"â¥µ",rarrb:"â‡¥",rarrbfs:"â¤ ",rarrc:"â¤³",rarrfs:"â¤",rarrhk:"â†ª",rarrlp:"â†¬",rarrpl:"â¥…",rarrsim:"â¥´",Rarrtl:"â¤–",rarrtl:"â†£",rarrw:"â†",rAtail:"â¤œ",ratail:"â¤š",ratio:"âˆ¶",rationals:"â„š",RBarr:"â¤",rBarr:"â¤",rbarr:"â¤",rbbrk:"â³",rbrace:"}",rbrack:"]",rbrke:"â¦Œ",rbrksld:"â¦",rbrkslu:"â¦",Rcaron:"Å˜",rcaron:"Å™",Rcedil:"Å–",rcedil:"Å—",rceil:"âŒ‰",rcub:"}",Rcy:"Ğ ",rcy:"Ñ€",rdca:"â¤·",rdldhar:"â¥©",rdquo:"â€",rdquor:"â€",rdsh:"â†³",Re:"â„œ",real:"â„œ",realine:"â„›",realpart:"â„œ",reals:"â„",rect:"â–­",REG:"Â®",reg:"Â®",ReverseElement:"âˆ‹",ReverseEquilibrium:"â‡‹",ReverseUpEquilibrium:"â¥¯",rfisht:"â¥½",rfloor:"âŒ‹",Rfr:"â„œ",rfr:"ğ”¯",rHar:"â¥¤",rhard:"â‡",rharu:"â‡€",rharul:"â¥¬",Rho:"Î¡",rho:"Ï",rhov:"Ï±",RightAngleBracket:"âŸ©",RightArrow:"â†’",Rightarrow:"â‡’",rightarrow:"â†’",RightArrowBar:"â‡¥",RightArrowLeftArrow:"â‡„",rightarrowtail:"â†£",RightCeiling:"âŒ‰",RightDoubleBracket:"âŸ§",RightDownTeeVector:"â¥",RightDownVector:"â‡‚",RightDownVectorBar:"â¥•",RightFloor:"âŒ‹",rightharpoondown:"â‡",rightharpoonup:"â‡€",rightleftarrows:"â‡„",rightleftharpoons:"â‡Œ",rightrightarrows:"â‡‰",rightsquigarrow:"â†",RightTee:"âŠ¢",RightTeeArrow:"â†¦",RightTeeVector:"â¥›",rightthreetimes:"â‹Œ",RightTriangle:"âŠ³",RightTriangleBar:"â§",RightTriangleEqual:"âŠµ",RightUpDownVector:"â¥",RightUpTeeVector:"â¥œ",RightUpVector:"â†¾",RightUpVectorBar:"â¥”",RightVector:"â‡€",RightVectorBar:"â¥“",ring:"Ëš",risingdotseq:"â‰“",rlarr:"â‡„",rlhar:"â‡Œ",rlm:"â€",rmoust:"â±",rmoustache:"â±",rnmid:"â«®",roang:"âŸ­",roarr:"â‡¾",robrk:"âŸ§",ropar:"â¦†",Ropf:"â„",ropf:"ğ•£",roplus:"â¨®",rotimes:"â¨µ",RoundImplies:"â¥°",rpar:")",rpargt:"â¦”",rppolint:"â¨’",rrarr:"â‡‰",Rrightarrow:"â‡›",rsaquo:"â€º",Rscr:"â„›",rscr:"ğ“‡",Rsh:"â†±",rsh:"â†±",rsqb:"]",rsquo:"â€™",rsquor:"â€™",rthree:"â‹Œ",rtimes:"â‹Š",rtri:"â–¹",rtrie:"âŠµ",rtrif:"â–¸",rtriltri:"â§",RuleDelayed:"â§´",ruluhar:"â¥¨",rx:"â„",Sacute:"Åš",sacute:"Å›",sbquo:"â€š",Sc:"âª¼",sc:"â‰»",scap:"âª¸",Scaron:"Å ",scaron:"Å¡",sccue:"â‰½",scE:"âª´",sce:"âª°",Scedil:"Å",scedil:"ÅŸ",Scirc:"Åœ",scirc:"Å",scnap:"âªº",scnE:"âª¶",scnsim:"â‹©",scpolint:"â¨“",scsim:"â‰¿",Scy:"Ğ¡",scy:"Ñ",sdot:"â‹…",sdotb:"âŠ¡",sdote:"â©¦",searhk:"â¤¥",seArr:"â‡˜",searr:"â†˜",searrow:"â†˜",sect:"Â§",semi:";",seswar:"â¤©",setminus:"âˆ–",setmn:"âˆ–",sext:"âœ¶",Sfr:"ğ”–",sfr:"ğ”°",sfrown:"âŒ¢",sharp:"â™¯",SHCHcy:"Ğ©",shchcy:"Ñ‰",SHcy:"Ğ¨",shcy:"Ñˆ",ShortDownArrow:"â†“",ShortLeftArrow:"â†",shortmid:"âˆ£",shortparallel:"âˆ¥",ShortRightArrow:"â†’",ShortUpArrow:"â†‘",shy:"Â­",Sigma:"Î£",sigma:"Ïƒ",sigmaf:"Ï‚",sigmav:"Ï‚",sim:"âˆ¼",simdot:"â©ª",sime:"â‰ƒ",simeq:"â‰ƒ",simg:"âª",simgE:"âª ",siml:"âª",simlE:"âªŸ",simne:"â‰†",simplus:"â¨¤",simrarr:"â¥²",slarr:"â†",SmallCircle:"âˆ˜",smallsetminus:"âˆ–",smashp:"â¨³",smeparsl:"â§¤",smid:"âˆ£",smile:"âŒ£",smt:"âªª",smte:"âª¬",smtes:"âª¬ï¸€",SOFTcy:"Ğ¬",softcy:"ÑŒ",sol:"/",solb:"â§„",solbar:"âŒ¿",Sopf:"ğ•Š",sopf:"ğ•¤",spades:"â™ ",spadesuit:"â™ ",spar:"âˆ¥",sqcap:"âŠ“",sqcaps:"âŠ“ï¸€",sqcup:"âŠ”",sqcups:"âŠ”ï¸€",Sqrt:"âˆš",sqsub:"âŠ",sqsube:"âŠ‘",sqsubset:"âŠ",sqsubseteq:"âŠ‘",sqsup:"âŠ",sqsupe:"âŠ’",sqsupset:"âŠ",sqsupseteq:"âŠ’",squ:"â–¡",Square:"â–¡",square:"â–¡",SquareIntersection:"âŠ“",SquareSubset:"âŠ",SquareSubsetEqual:"âŠ‘",SquareSuperset:"âŠ",SquareSupersetEqual:"âŠ’",SquareUnion:"âŠ”",squarf:"â–ª",squf:"â–ª",srarr:"â†’",Sscr:"ğ’®",sscr:"ğ“ˆ",ssetmn:"âˆ–",ssmile:"âŒ£",sstarf:"â‹†",Star:"â‹†",star:"â˜†",starf:"â˜…",straightepsilon:"Ïµ",straightphi:"Ï•",strns:"Â¯",Sub:"â‹",sub:"âŠ‚",subdot:"âª½",subE:"â«…",sube:"âŠ†",subedot:"â«ƒ",submult:"â«",subnE:"â«‹",subne:"âŠŠ",subplus:"âª¿",subrarr:"â¥¹",Subset:"â‹",subset:"âŠ‚",subseteq:"âŠ†",subseteqq:"â«…",SubsetEqual:"âŠ†",subsetneq:"âŠŠ",subsetneqq:"â«‹",subsim:"â«‡",subsub:"â«•",subsup:"â«“",succ:"â‰»",succapprox:"âª¸",succcurlyeq:"â‰½",Succeeds:"â‰»",SucceedsEqual:"âª°",SucceedsSlantEqual:"â‰½",SucceedsTilde:"â‰¿",succeq:"âª°",succnapprox:"âªº",succneqq:"âª¶",succnsim:"â‹©",succsim:"â‰¿",SuchThat:"âˆ‹",Sum:"âˆ‘",sum:"âˆ‘",sung:"â™ª",Sup:"â‹‘",sup:"âŠƒ",sup1:"Â¹",sup2:"Â²",sup3:"Â³",supdot:"âª¾",supdsub:"â«˜",supE:"â«†",supe:"âŠ‡",supedot:"â«„",Superset:"âŠƒ",SupersetEqual:"âŠ‡",suphsol:"âŸ‰",suphsub:"â«—",suplarr:"â¥»",supmult:"â«‚",supnE:"â«Œ",supne:"âŠ‹",supplus:"â«€",Supset:"â‹‘",supset:"âŠƒ",supseteq:"âŠ‡",supseteqq:"â«†",supsetneq:"âŠ‹",supsetneqq:"â«Œ",supsim:"â«ˆ",supsub:"â«”",supsup:"â«–",swarhk:"â¤¦",swArr:"â‡™",swarr:"â†™",swarrow:"â†™",swnwar:"â¤ª",szlig:"ÃŸ",Tab:"\t",target:"âŒ–",Tau:"Î¤",tau:"Ï„",tbrk:"â´",Tcaron:"Å¤",tcaron:"Å¥",Tcedil:"Å¢",tcedil:"Å£",Tcy:"Ğ¢",tcy:"Ñ‚",tdot:"âƒ›",telrec:"âŒ•",Tfr:"ğ”—",tfr:"ğ”±",there4:"âˆ´",Therefore:"âˆ´",therefore:"âˆ´",Theta:"Î˜",theta:"Î¸",thetasym:"Ï‘",thetav:"Ï‘",thickapprox:"â‰ˆ",thicksim:"âˆ¼",ThickSpace:"âŸâ€Š",thinsp:"â€‰",ThinSpace:"â€‰",thkap:"â‰ˆ",thksim:"âˆ¼",THORN:"Ã",thorn:"Ã¾",Tilde:"âˆ¼",tilde:"Ëœ",TildeEqual:"â‰ƒ",TildeFullEqual:"â‰…",TildeTilde:"â‰ˆ",times:"Ã—",timesb:"âŠ ",timesbar:"â¨±",timesd:"â¨°",tint:"âˆ­",toea:"â¤¨",top:"âŠ¤",topbot:"âŒ¶",topcir:"â«±",Topf:"ğ•‹",topf:"ğ•¥",topfork:"â«š",tosa:"â¤©",tprime:"â€´",TRADE:"â„¢",trade:"â„¢",triangle:"â–µ",triangledown:"â–¿",triangleleft:"â—ƒ",trianglelefteq:"âŠ´",triangleq:"â‰œ",triangleright:"â–¹",trianglerighteq:"âŠµ",tridot:"â—¬",trie:"â‰œ",triminus:"â¨º",TripleDot:"âƒ›",triplus:"â¨¹",trisb:"â§",tritime:"â¨»",trpezium:"â¢",Tscr:"ğ’¯",tscr:"ğ“‰",TScy:"Ğ¦",tscy:"Ñ†",TSHcy:"Ğ‹",tshcy:"Ñ›",Tstrok:"Å¦",tstrok:"Å§",twixt:"â‰¬",twoheadleftarrow:"â†",twoheadrightarrow:"â† ",Uacute:"Ãš",uacute:"Ãº",Uarr:"â†Ÿ",uArr:"â‡‘",uarr:"â†‘",Uarrocir:"â¥‰",Ubrcy:"Ğ",ubrcy:"Ñ",Ubreve:"Å¬",ubreve:"Å­",Ucirc:"Ã›",ucirc:"Ã»",Ucy:"Ğ£",ucy:"Ñƒ",udarr:"â‡…",Udblac:"Å°",udblac:"Å±",udhar:"â¥®",ufisht:"â¥¾",Ufr:"ğ”˜",ufr:"ğ”²",Ugrave:"Ã™",ugrave:"Ã¹",uHar:"â¥£",uharl:"â†¿",uharr:"â†¾",uhblk:"â–€",ulcorn:"âŒœ",ulcorner:"âŒœ",ulcrop:"âŒ",ultri:"â—¸",Umacr:"Åª",umacr:"Å«",uml:"Â¨",UnderBar:"_",UnderBrace:"âŸ",UnderBracket:"âµ",UnderParenthesis:"â",Union:"â‹ƒ",UnionPlus:"âŠ",Uogon:"Å²",uogon:"Å³",Uopf:"ğ•Œ",uopf:"ğ•¦",UpArrow:"â†‘",Uparrow:"â‡‘",uparrow:"â†‘",UpArrowBar:"â¤’",UpArrowDownArrow:"â‡…",UpDownArrow:"â†•",Updownarrow:"â‡•",updownarrow:"â†•",UpEquilibrium:"â¥®",upharpoonleft:"â†¿",upharpoonright:"â†¾",uplus:"âŠ",UpperLeftArrow:"â†–",UpperRightArrow:"â†—",Upsi:"Ï’",upsi:"Ï…",upsih:"Ï’",Upsilon:"Î¥",upsilon:"Ï…",UpTee:"âŠ¥",UpTeeArrow:"â†¥",upuparrows:"â‡ˆ",urcorn:"âŒ",urcorner:"âŒ",urcrop:"âŒ",Uring:"Å®",uring:"Å¯",urtri:"â—¹",Uscr:"ğ’°",uscr:"ğ“Š",utdot:"â‹°",Utilde:"Å¨",utilde:"Å©",utri:"â–µ",utrif:"â–´",uuarr:"â‡ˆ",Uuml:"Ãœ",uuml:"Ã¼",uwangle:"â¦§",vangrt:"â¦œ",varepsilon:"Ïµ",varkappa:"Ï°",varnothing:"âˆ…",varphi:"Ï•",varpi:"Ï–",varpropto:"âˆ",vArr:"â‡•",varr:"â†•",varrho:"Ï±",varsigma:"Ï‚",varsubsetneq:"âŠŠï¸€",varsubsetneqq:"â«‹ï¸€",varsupsetneq:"âŠ‹ï¸€",varsupsetneqq:"â«Œï¸€",vartheta:"Ï‘",vartriangleleft:"âŠ²",vartriangleright:"âŠ³",Vbar:"â««",vBar:"â«¨",vBarv:"â«©",Vcy:"Ğ’",vcy:"Ğ²",VDash:"âŠ«",Vdash:"âŠ©",vDash:"âŠ¨",vdash:"âŠ¢",Vdashl:"â«¦",Vee:"â‹",vee:"âˆ¨",veebar:"âŠ»",veeeq:"â‰š",vellip:"â‹®",Verbar:"â€–",verbar:"|",Vert:"â€–",vert:"|",VerticalBar:"âˆ£",VerticalLine:"|",VerticalSeparator:"â˜",VerticalTilde:"â‰€",VeryThinSpace:"â€Š",Vfr:"ğ”™",vfr:"ğ”³",vltri:"âŠ²",vnsub:"âŠ‚âƒ’",vnsup:"âŠƒâƒ’",Vopf:"ğ•",vopf:"ğ•§",vprop:"âˆ",vrtri:"âŠ³",Vscr:"ğ’±",vscr:"ğ“‹",vsubnE:"â«‹ï¸€",vsubne:"âŠŠï¸€",vsupnE:"â«Œï¸€",vsupne:"âŠ‹ï¸€",Vvdash:"âŠª",vzigzag:"â¦š",Wcirc:"Å´",wcirc:"Åµ",wedbar:"â©Ÿ",Wedge:"â‹€",wedge:"âˆ§",wedgeq:"â‰™",weierp:"â„˜",Wfr:"ğ”š",wfr:"ğ”´",Wopf:"ğ•",wopf:"ğ•¨",wp:"â„˜",wr:"â‰€",wreath:"â‰€",Wscr:"ğ’²",wscr:"ğ“Œ",xcap:"â‹‚",xcirc:"â—¯",xcup:"â‹ƒ",xdtri:"â–½",Xfr:"ğ”›",xfr:"ğ”µ",xhArr:"âŸº",xharr:"âŸ·",Xi:"Î",xi:"Î¾",xlArr:"âŸ¸",xlarr:"âŸµ",xmap:"âŸ¼",xnis:"â‹»",xodot:"â¨€",Xopf:"ğ•",xopf:"ğ•©",xoplus:"â¨",xotime:"â¨‚",xrArr:"âŸ¹",xrarr:"âŸ¶",Xscr:"ğ’³",xscr:"ğ“",xsqcup:"â¨†",xuplus:"â¨„",xutri:"â–³",xvee:"â‹",xwedge:"â‹€",Yacute:"Ã",yacute:"Ã½",YAcy:"Ğ¯",yacy:"Ñ",Ycirc:"Å¶",ycirc:"Å·",Ycy:"Ğ«",ycy:"Ñ‹",yen:"Â¥",Yfr:"ğ”œ",yfr:"ğ”¶",YIcy:"Ğ‡",yicy:"Ñ—",Yopf:"ğ•",yopf:"ğ•ª",Yscr:"ğ’´",yscr:"ğ“",YUcy:"Ğ®",yucy:"Ñ",Yuml:"Å¸",yuml:"Ã¿",Zacute:"Å¹",zacute:"Åº",Zcaron:"Å½",zcaron:"Å¾",Zcy:"Ğ—",zcy:"Ğ·",Zdot:"Å»",zdot:"Å¼",zeetrf:"â„¨",ZeroWidthSpace:"â€‹",Zeta:"Î–",zeta:"Î¶",Zfr:"â„¨",zfr:"ğ”·",ZHcy:"Ğ–",zhcy:"Ğ¶",zigrarr:"â‡",Zopf:"â„¤",zopf:"ğ•«",Zscr:"ğ’µ",zscr:"ğ“",zwj:"â€",zwnj:"â€Œ"}),t.entityMap=t.HTML_ENTITIES},238:e=>{function t(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}t.keys=()=>[],(t.resolve=t).id=238,e.exports=t},268:(e,t,n)=>{"use strict";n.d(t,{Al:()=>s,Gb:()=>i,Oe:()=>l});var r,t=n(546),o=n(999);const i=n.t(t,2),s=(new i.DOMImplementation).createDocument("",""),a=(null===(r=r||n.t(o,2))||void 0===(r=r||n.t(o,2))?void 0:o.install)||window.wgxpath.install,c=function(){const e={document:{},XPathResult:{}};return a(e),e.document.XPathResult=e.XPathResult,e.document}(),l={currentDocument:s,evaluate:c.evaluate,result:c.XPathResult,createNSResolver:c.createNSResolver}},546:(e,t,n)=>{"use strict";var r=n(870),r=(t.assign=r.assign,t.hasDefaultHTMLNamespace=r.hasDefaultHTMLNamespace,t.isHTMLMimeType=r.isHTMLMimeType,t.isValidMimeType=r.isValidMimeType,t.MIME_TYPE=r.MIME_TYPE,t.NAMESPACE=r.NAMESPACE,n(767)),r=(t.DOMException=r.DOMException,t.DOMExceptionName=r.DOMExceptionName,t.ExceptionCode=r.ExceptionCode,t.ParseError=r.ParseError,n(786)),r=(t.Attr=r.Attr,t.CDATASection=r.CDATASection,t.CharacterData=r.CharacterData,t.Comment=r.Comment,t.Document=r.Document,t.DocumentFragment=r.DocumentFragment,t.DocumentType=r.DocumentType,t.DOMImplementation=r.DOMImplementation,t.Element=r.Element,t.Entity=r.Entity,t.EntityReference=r.EntityReference,t.LiveNodeList=r.LiveNodeList,t.NamedNodeMap=r.NamedNodeMap,t.Node=r.Node,t.NodeList=r.NodeList,t.Notation=r.Notation,t.ProcessingInstruction=r.ProcessingInstruction,t.Text=r.Text,t.XMLSerializer=r.XMLSerializer,n(576));t.DOMParser=r.DOMParser,t.normalizeLineEndings=r.normalizeLineEndings,t.onErrorStopParsing=r.onErrorStopParsing,t.onWarningStopParsing=r.onWarningStopParsing},576:(e,t,n)=>{"use strict";var s=n(870),r=n(786),o=n(767),a=n(159),n=n(802),i=r.DOMImplementation,c=s.hasDefaultHTMLNamespace,l=s.isHTMLMimeType,u=s.isValidMimeType,h=s.MIME_TYPE,d=s.NAMESPACE,p=o.ParseError,f=n.XMLReader;function m(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028\u2029]/g,"\n")}function g(e){if(void 0===(e=e||{}).locator&&(e.locator=!0),this.assign=e.assign||s.assign,this.domHandler=e.domHandler||E,this.onError=e.onError||e.errorHandler,e.errorHandler&&"function"!=typeof e.errorHandler)throw new TypeError("errorHandler object is no longer supported, switch to onError!");e.errorHandler&&e.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=e.normalizeLineEndings||m,this.locator=!!e.locator,this.xmlns=this.assign(Object.create(null),e.xmlns)}function E(e){e=e||{};this.mimeType=e.mimeType||h.XML_APPLICATION,this.defaultNamespace=e.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=e.onError}function N(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function S(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function T(e,t){(e.currentElement||e.doc).appendChild(t)}g.prototype.parseFromString=function(e,t){if(!u(t))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+t+'" is not valid.');var n=this.assign(Object.create(null),this.xmlns),r=a.XML_ENTITIES,o=n[""]||null,o=(c(t)?(r=a.HTML_ENTITIES,o=d.HTML):t===h.XML_SVG_IMAGE&&(o=d.SVG),n[""]=o,n.xml=n.xml||d.XML,new this.domHandler({mimeType:t,defaultNamespace:o,onError:this.onError})),i=this.locator?{}:void 0,i=(this.locator&&o.setDocumentLocator(i),new f);return i.errorHandler=o,i.domBuilder=o,s.isHTMLMimeType(t)||"string"==typeof e||i.errorHandler.fatalError("source is not a string"),i.parse(this.normalizeLineEndings(String(e)),n,r),o.doc.documentElement||i.errorHandler.fatalError("missing root element"),o.doc},E.prototype={startDocument:function(){var e=new i;this.doc=l(this.mimeType)?e.createHTMLDocument(!1):e.createDocument(this.defaultNamespace,"")},startElement:function(e,t,n,r){var o=this.doc,i=o.createElementNS(e,n||t),s=r.length;T(this,i),this.currentElement=i,this.locator&&N(this.locator,i);for(var a=0;a<s;a++){e=r.getURI(a);var c=r.getValue(a),l=(n=r.getQName(a),o.createAttributeNS(e,n));this.locator&&N(r.getLocator(a),l),l.value=l.nodeValue=c,i.setAttributeNode(l)}},endElement:function(e,t,n){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){e=this.doc.createProcessingInstruction(e,t);this.locator&&N(this.locator,e),T(this,e)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){var r;(e=S.apply(this,arguments))&&(r=this.cdata?this.doc.createCDATASection(e):this.doc.createTextNode(e),this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&N(this.locator,r))},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){e&&(e.lineNumber=0),this.locator=e},comment:function(e,t,n){e=S.apply(this,arguments);e=this.doc.createComment(e);this.locator&&N(this.locator,e),T(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n,r){var o=this.doc.implementation;o&&o.createDocumentType&&(o=o.createDocumentType(e,t,n,r),this.locator&&N(this.locator,o),T(this,o),this.doc.doctype=o)},reportError:function(t,n){if("function"==typeof this.onError)try{this.onError(t,n,this)}catch(e){throw new p("Reporting "+t+' "'+n+'" caused '+e,this.locator)}else console.error("[xmldom "+t+"]\t"+n,function(e){if(e)return"\n@#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(this.locator))},warning:function(e){this.reportError("warning",e)},error:function(e){this.reportError("error",e)},fatalError:function(e){throw this.reportError("fatalError",e),new p(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){E.prototype[e]=function(){return null}}),t.__DOMHandler=E,t.DOMParser=g,t.normalizeLineEndings=m,t.onErrorStopParsing=function(e){if("error"===e)throw"onErrorStopParsing"},t.onWarningStopParsing=function(){throw"onWarningStopParsing"}},581:(U,t,n)=>{"use strict";n.r(t),n.d(t,{engineReady:()=>function(){return $l(this,void 0,void 0,function*(){return Kl({}).then(()=>te.getall())})},engineSetup:()=>function(){{const e=m.getInstance().json();return e.json=Y.f.jsonPath,e}},exit:()=>function(e){const t=e||0;te.getall().then(()=>process.exit(t))},file:()=>Jl,localeLoader:()=>zl,localePath:()=>tu,move:()=>function(e){{const t=ql("move"),n=t instanceof Vl?t.key(e):e,r=t.processor(n);return m.getInstance().options.pprint?t.pprint(r):t.print(r)}},number:()=>function(e){return Ql("number",e)},numericOrdinal:()=>function(e){return Ql("numericOrdinal",e)},ordinal:()=>function(e){return Ql("ordinal",e)},processFile:()=>Zl,resetEngine:()=>function(){m.getInstance().reset()},setupEngine:()=>Kl,toDescription:()=>function(e){return Ql("description",e)},toEnriched:()=>function(e){return Ql("enriched",e)},toJson:()=>function(e){return Ql("json",e)},toSemantic:()=>function(e){return Ql("semantic",e)},toSpeech:()=>function(e){return Ql("speech",e)},toSpeechStructure:()=>function(e){return Ql("speechStructure",e)},variables:()=>nu,version:()=>Wl,vulgar:()=>function(e){return Ql("vulgar",e)},walk:()=>function(e){return Yl("walker",e)},workerLocalePreferences:()=>function(e){return $l(this,void 0,void 0,function*(){return nl.getLocalePreferences()[e.locale]})},workerNextRules:()=>function(r,o){return $l(this,void 0,void 0,function*(){const e=ce(r),t=new Qc(e),n=Tl(o);return(o=Nl(o,n)).domain2style=Il(n),eu(e,t.stree.xml(),o)})},workerNextStyle:()=>function(r,o,i){return $l(this,void 0,void 0,function*(){const e=ce(r),t=new Qc(e),n=Tl(o);return o.style=Sl(t.nodeDict[i],o),n[o.domain]=o.style,o.domain2style=Il(n),eu(e,t.stree.xml(),o)})},workerRelevantPreferences:()=>function(o,i){return $l(this,void 0,void 0,function*(){var e;const t=ce(o),n=new Qc(t),r=null!=(e=n.stree.root.querySelectorAll(e=>e.id.toString()===i)[0])?e:n.stree.root;return nl.relevantPreferences(r)})},workerSpeech:()=>function(r,o){return $l(this,void 0,void 0,function*(){const e=ce(r),t=new Qc(e),n=Tl(o);return o.domain2style=Il(n),eu(e,t.stree.xml(),o)})}});var c,F,f,k,B,G={};n.r(G),n.d(G,{NodeType:()=>K,cloneNode:()=>Ee,createElement:()=>ue,createElementNS:()=>he,createTextNode:()=>de,formatXml:()=>pe,parseInput:()=>ce,querySelectorAll:()=>ge,querySelectorAllByAttr:()=>fe,querySelectorAllByAttrValue:()=>me,replaceNode:()=>le,serializeXml:()=>Ne,tagName:()=>R,toArray:()=>g}),(t=c=c||{}).DOMAIN="domain",t.STYLE="style",t.LOCALE="locale",t.TOPIC="topic",t.MODALITY="modality";class V{static createProp(...r){const o=l.DEFAULT_ORDER,i={};for(let e=0,t=r.length,n=o.length;e<t&&e<n;e++)i[o[e]]=r[e];return new V(i)}constructor(e,t=Object.keys(e)){this.properties=e,this.order=t}getProperties(){return this.properties}getOrder(){return this.order}getAxes(){return this.order}getProperty(e){return this.properties[e]}updateProperties(e){this.properties=e}allProperties(){const t=[];return this.order.forEach(e=>t.push(this.getProperty(e).slice())),t}toString(){const t=[];return this.order.forEach(e=>t.push(e+": "+this.getProperty(e).toString())),t.join("\n")}}class l extends V{static createCstr(...r){const o=l.DEFAULT_ORDER,i={};for(let e=0,t=r.length,n=o.length;e<t&&e<n;e++)i[o[e]]=r[e];return new l(i)}static defaultCstr(){return l.createCstr.apply(null,l.DEFAULT_ORDER.map(function(e){return l.DEFAULT_VALUES[e]}))}static validOrder(e){const t=l.DEFAULT_ORDER.slice();return e.every(e=>{e=t.indexOf(e);return-1!==e&&t.splice(e,1)})}constructor(e,t){const n={};for(const[t,r]of Object.entries(e))n[t]=[r];super(n,t),this.components=e}getComponents(){return this.components}getValue(e){return this.components[e]}getValues(){return this.order.map(e=>this.getValue(e))}allProperties(){const r=super.allProperties();for(let e,t,n=0;e=r[n],t=this.order[n];n++){const r=this.getValue(t);-1===e.indexOf(r)&&e.unshift(r)}return r}toString(){return this.getValues().join(".")}equal(n){const r=n.getAxes();if(this.order.length!==r.length)return!1;for(let e,t=0;e=r[t];t++){const r=this.getValue(e);if(!r||n.getValue(e)!==r)return!1}return!0}}l.DEFAULT_ORDER=[c.LOCALE,c.MODALITY,c.DOMAIN,c.STYLE,c.TOPIC],l.BASE_LOCALE="base",l.DEFAULT_VALUE="default",l.DEFAULT_VALUES={[c.LOCALE]:"en",[c.DOMAIN]:l.DEFAULT_VALUE,[c.STYLE]:l.DEFAULT_VALUE,[c.TOPIC]:l.DEFAULT_VALUE,[c.MODALITY]:"speech"};class H{constructor(e){this.order=e}parse(e){const n=e.split("."),r={};if(n.length>this.order.length)throw new Error("Invalid dynamic constraint: "+r);let o=0;for(let e,t=0;e=this.order[t],n.length;t++,o++){const o=n.shift();r[e]=o}return new l(r,this.order.slice(0,o))}}class j{constructor(e,t=new V(e.getProperties(),e.getOrder())){this.reference=e,this.fallback=t,this.order=this.reference.getOrder()}getReference(){return this.reference}setReference(e,t){this.reference=e,this.fallback=t||new V(e.getProperties(),e.getOrder()),this.order=this.reference.getOrder()}match(n){const e=n.getAxes();return e.length===this.reference.getAxes().length&&e.every(e=>{var t=n.getValue(e);return t===this.reference.getValue(e)||-1!==this.fallback.getProperty(e).indexOf(t)})}compare(n,r){let o=!1;for(let e,t=0;e=this.order[t];t++){var i=n.getValue(e),s=r.getValue(e);if(!o){const n=this.reference.getValue(e);if(n===i&&n!==s)return-1;if(n===s&&n!==i)return 1;if(n===i&&n===s)continue;n!==i&&n!==s&&(o=!0)}const a=this.fallback.getProperty(e),c=a.indexOf(i),l=a.indexOf(s);if(c<l)return-1;if(l<c)return 1}return 0}toString(){return this.reference.toString()+"\n"+this.fallback.toString()}}(t=F=F||{}).SYNC="sync",t.ASYNC="async",t.HTTP="http",(t=f=f||{}).PITCH="pitch",t.RATE="rate",t.VOLUME="volume",t.PAUSE="pause",t.JOIN="join",t.LAYOUT="layout";const q=[f.PITCH,f.RATE,f.VOLUME,f.PAUSE,f.JOIN],X=((t=k=k||{}).NONE="none",t.SHALLOW="shallow",t.DEEP="deep",(t=B=B||{}).NONE="none",t.LAYOUT="layout",t.COUNTING="counting",t.PUNCTUATION="punctuation",t.SSML="ssml",t.ACSS="acss",t.SABLE="sable",t.VOICEXML="voicexml",{mathspeak:"default",clearspeak:"default"});var Y=n(74);function $(e){return e.match("/$")?e:e+"/"}function W(e,t="json"){return $(Y.f.jsonPath)+e+(t.match(/^\./)?t:"."+t)}class u{static getInstance(){return u.instance=u.instance||new u,u.instance}init(e){return e&&this.startDebugFile_(e),this.isActive_=!0,this.fileHandle}output(...e){this.isActive_&&this.output_(e)}generate(e){this.isActive_&&this.output_(e.apply(e,[]))}exit(e=()=>{}){this.fileHandle.then(()=>{this.isActive_&&this.stream_&&this.stream_.end("","",e)})}constructor(){this.isActive_=!1,this.fileHandle=Promise.resolve(),this.stream_=null}startDebugFile_(t){this.fileHandle=Y.f.fs.promises.open(t,"w"),this.fileHandle=this.fileHandle.then(e=>{this.stream_=e.createWriteStream(t),this.outputFunction=function(...e){this.stream_.write(e.join(" ")),this.stream_.write("\n")}.bind(this),this.stream_.on("error",function(e){console.info("Invalid log file. Debug information sent to console."),this.outputFunction=console.info}.bind(this)),this.stream_.on("finish",function(){console.info("Finalizing debug file.")})})}output_(e){this.stream_?this.fileHandle.then(()=>this.outputFunction.apply(this.outputFunction,["Speech Rule Engine Debugger:"].concat(e))):console.info.apply(console,["Speech Rule Engine Debugger:"].concat(e))}}var K,e,r,z=n(714);class Q{constructor(e={}){this.delay=!1,this.domain="clearspeak",this.style=l.DEFAULT_VALUES[c.STYLE],this.locale=l.DEFAULT_VALUES[c.LOCALE],this.subiso="",this.modality=l.DEFAULT_VALUES[c.MODALITY],this.speech=k.NONE,this.markup=B.NONE,this.mark=!0,this.automark=!1,this.character=!0,this.cleanpause=!0,this.cayleyshort=!0,this.linebreaks=!1,this.rate="100",this.walker="Table",this.structure=!1,this.aria=!1,this.tree=!1,this.strict=!1,this.pprint=!1,this.rules="",this.prune="",this.set(e)}set(e){this.ensureDomain(e);for(var[t,n]of Object.entries(e))(Q.BINARY_FEATURES.includes(t)||Q.STRING_FEATURES.includes(t))&&(this[t]=n)}json(){const t={};return[].concat(Q.STRING_FEATURES,Q.BINARY_FEATURES).forEach(e=>t[e]=this[e]),t}ensureDomain(e){var t,n;e.modality&&"speech"!==e.modality||!e.modality&&"speech"!==this.modality||(e.domain||e.locale)&&("default"===e.domain?e.domain="mathspeak":(t=e.locale||this.locale,n=e.domain||this.domain,-1===J.indexOf(t)||"mathspeak"===n?"en"!==t?"mathspeak"!==n&&"clearspeak"!==n&&(e.domain="mathspeak"):-1===Z.indexOf(n)&&(e.domain="mathspeak"):e.domain="mathspeak"))}}Q.BINARY_FEATURES=["automark","mark","character","cleanpause","strict","structure","aria","pprint","cayleyshort","linebreaks","tree"],Q.STRING_FEATURES=["markup","style","domain","speech","walker","locale","delay","modality","rate","rules","subiso","prune"];const J=["ca","da","es"],Z=["chromevox","clearspeak","mathspeak","emacspeak","html"];class ee extends Error{constructor(e=""){super(),this.message=e,this.name="SRE Error"}}class m{set defaultLocale(e){this._defaultLocale=z.u.ensureLocale(e,this._defaultLocale)}get defaultLocale(){return this._defaultLocale}static getInstance(){return m.instance=m.instance||new m,m.instance}static defaultEvaluator(e,t){return e}static evaluateNode(e){return m.nodeEvaluator(e)}getRate(){var e=parseInt(this.options.rate,10);return isNaN(e)?100:e}setDynamicCstr(t){if(this.defaultLocale&&(l.DEFAULT_VALUES[c.LOCALE]=this.defaultLocale),t){const n=Object.keys(t);for(let e=0;e<n.length;e++){const c=n[e];if(-1!==l.DEFAULT_ORDER.indexOf(c)){const n=t[c];this.options[c]=n}}}const n=[this.options.locale,this.options.modality,this.options.domain,this.options.style].join("."),e=V.createProp([l.DEFAULT_VALUES[c.LOCALE]],[l.DEFAULT_VALUES[c.MODALITY]],[l.DEFAULT_VALUES[c.DOMAIN]],[l.DEFAULT_VALUES[c.STYLE]]),r=this.comparators[this.options.domain],o=this.parsers[this.options.domain];this.parser=o||this.defaultParser,this.dynamicCstr=this.parser.parse(n),this.dynamicCstr.updateProperties(e.getProperties()),this.comparator=r?r():new j(this.dynamicCstr)}constructor(){this.options=new Q,this.config=!1,this.customLoader=null,this.parsers={},this.comparator=null,this.mode=F.SYNC,this.init=!0,this.comparators={},this._defaultLocale=l.DEFAULT_VALUES[c.LOCALE],this.options.locale=this.defaultLocale,this.evaluator=m.defaultEvaluator,this.defaultParser=new H(l.DEFAULT_ORDER),this.parser=this.defaultParser,this.dynamicCstr=l.defaultCstr()}configurate(e){if(this.mode===F.HTTP&&!Y.f.webworker&&!this.config){{var n=e;const s=document.documentElement.querySelectorAll('script[type="text/x-sre-config"]');for(let t=0,e=s.length;t<e;t++){let e;try{e=s[t].innerHTML;var r=JSON.parse(e);for(const[s,a]of Object.entries(r))n[s]=a}catch(n){u.getInstance().output("Illegal configuration ",e)}}}this.config=!0}var t=e;if("undefined"!=typeof SREfeature)for(var[o,i]of Object.entries(SREfeature))t[o]=i}setCustomLoader(e){e&&(this.customLoader=e)}setup(e){void 0!==e.mode&&(this.mode=e.mode),this.configurate(e),this.options.set(e),e.json&&(Y.f.jsonPath=$(e.json)),this.setCustomLoader(e.custom)}json(){return Object.assign({mode:this.mode},this.options.json())}reset(){this.options=new Q}}m.nodeEvaluator=function(e){return[]};class te{static get(e=m.getInstance().options.locale){return te.promises[e]||Promise.resolve("")}static getall(){return Promise.all(Object.values(te.promises))}}te.loaded={},te.promises={};const ne=Y.f.xpath,re={xhtml:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",mml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function oe(e){return re[e]||null}class ie{constructor(){this.lookupNamespaceURI=oe}}function se(e,t,n){return ne.evaluate(e,t,new ie,n,null)}function b(e,t){let n;try{n=se(e,t,ne.result.ORDERED_NODE_ITERATOR_TYPE)}catch(e){return[]}const r=[];for(let e=n.iterateNext();e;e=n.iterateNext())r.push(e);return r}function ae(t){if(m.getInstance().mode===F.HTTP){let e=t;for(;e&&!e.evaluate;)e=e.parentNode;e&&e.evaluate?ne.currentDocument=e:t.ownerDocument&&(ne.currentDocument=t.ownerDocument)}}function g(n){const r=[];for(let e=0,t=n.length;e<t;e++)r.push(n[e]);return r}function ce(e){const t=new Y.f.xmldom.DOMParser,n=e.replace(/&nbsp;/g,"Â ").replace(/>[ \f\n\r\t\v\u200b]+</g,"><").trim(),r=!!n.match(/&(?!lt|gt|amp|quot|apos)\w+;/g);if(!n)throw new Error("Empty input!");try{const e=t.parseFromString(n,r?"text/html":"text/xml");return m.getInstance().mode===F.HTTP?(ne.currentDocument=e,r?e.body.childNodes[0]:e.documentElement):e.documentElement}catch(e){throw new ee("Illegal input: "+e.message)}}function le(e,t){e.parentNode&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))}function ue(e){return Y.f.document.createElement(e)}function he(e,t){return Y.f.document.createElementNS(e,t)}function de(e){return Y.f.document.createTextNode(e)}function pe(e){let n="",r=/(>)(<)(\/*)/g,o=0,i=(e=e.replace(r,"$1\r\n$2$3")).split("\r\n");for(r=/(\.)*(<)(\/*)/g,i=i.map(e=>e.replace(r,"$1\r\n$2$3").split("\r\n")).reduce((e,t)=>e.concat(t),[]);i.length;){let t=i.shift();if(t){let e=0;if(t.match(/^<\w[^>/]*>[^>]+$/)){const n=function(e,t){if(!t)return[!1,""];e=e.match(/^<([^> ]+).*>/),t=t.match(/^<\/([^>]+)>(.*)/);return e&&t&&e[1]===t[1]?[!0,t[2]]:[!1,""]}(t,i[0]);n[0]?n[1]?(t+=i.shift().slice(0,-n[1].length),n[1].trim()&&i.unshift(n[1])):t+=i.shift():e=1}else if(t.match(/^<\/\w/))0!==o&&--o;else if(t.match(/^<\w[^>]*[^/]>.*$/))e=1;else if(t.match(/^<\w[^>]*\/>.+$/)){const n=t.indexOf(">")+1,r=t.slice(n);r.trim()&&i.unshift(),t=t.slice(0,n)+r}else e=0;n+=new Array(o+1).join("  ")+t+"\r\n",o+=e}}return n}function fe(e,t){return e.querySelectorAll?g(e.querySelectorAll(`[${t}]`)):b(`.//*[@${t}]`,e)}function me(e,t,n){return e.querySelectorAll?g(e.querySelectorAll(`[${t}="${n}"]`)):b(`.//*[@${t}="${n}"]`,e)}function ge(e,t){return e.querySelectorAll?g(e.querySelectorAll(t)):b(".//"+t,e)}function R(e){return e.tagName.toUpperCase()}function Ee(e){return e.cloneNode(!0)}function Ne(e){return(new Y.f.xmldom.XMLSerializer).serializeToString(e)}function Se([e,t],n){const r=parseInt(e,16),o=parseInt(t,16),i=[];for(let t=r;t<=o;t++){let e=3<(s=(s=t).toString(16).toUpperCase()).length?s:("000"+s).slice(-4);!1!==n[e]&&(e=n[e]||e,i.push(e))}var s;return i}function Te(e,t={}){return Se(e,t).map(e=>String.fromCodePoint(parseInt(e,16)))}(t=K=K||{})[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",t[t.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",t[t.ENTITY_NODE=6]="ENTITY_NODE",t[t.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE",t[t.DOCUMENT_NODE=9]="DOCUMENT_NODE",t[t.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",t[t.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",t[t.NOTATION_NODE=12]="NOTATION_NODE",(n=o=o||{}).BOLD="bold",n.BOLDFRAKTUR="bold-fraktur",n.BOLDITALIC="bold-italic",n.BOLDSCRIPT="bold-script",n.DOUBLESTRUCK="double-struck",n.DOUBLESTRUCKITALIC="double-struck-italic",n.FULLWIDTH="fullwidth",n.FRAKTUR="fraktur",n.ITALIC="italic",n.MONOSPACE="monospace",n.NORMAL="normal",n.SCRIPT="script",n.SANSSERIF="sans-serif",n.SANSSERIFITALIC="sans-serif-italic",n.SANSSERIFBOLD="sans-serif-bold",n.SANSSERIFBOLDITALIC="sans-serif-bold-italic",(t=e=e||{}).SUPER="super",t.SUB="sub",t.CIRCLED="circled",t.PARENTHESIZED="parenthesized",t.PERIOD="period",t.NEGATIVECIRCLED="negative-circled",t.DOUBLECIRCLED="double-circled",t.CIRCLEDSANSSERIF="circled-sans-serif",t.NEGATIVECIRCLEDSANSSERIF="negative-circled-sans-serif",t.COMMA="comma",t.SQUARED="squared",t.NEGATIVESQUARED="negative-squared",(n=r=r||{}).LATINCAP="latinCap",n.LATINSMALL="latinSmall",n.GREEKCAP="greekCap",n.GREEKSMALL="greekSmall",n.DIGIT="digit";const Ie=[{interval:["1D400","1D419"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.BOLD},{interval:["1D41A","1D433"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.BOLD},{interval:["1D56C","1D585"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.BOLDFRAKTUR},{interval:["1D586","1D59F"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.BOLDFRAKTUR},{interval:["1D468","1D481"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.BOLDITALIC},{interval:["1D482","1D49B"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.BOLDITALIC},{interval:["1D4D0","1D4E9"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.BOLDSCRIPT},{interval:["1D4EA","1D503"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.BOLDSCRIPT},{interval:["1D538","1D551"],base:r.LATINCAP,subst:{"1D53A":"2102","1D53F":"210D","1D545":"2115","1D547":"2119","1D548":"211A","1D549":"211D","1D551":"2124"},capital:!0,category:"Lu",font:o.DOUBLESTRUCK},{interval:["1D552","1D56B"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.DOUBLESTRUCK},{interval:["1D504","1D51D"],base:r.LATINCAP,subst:{"1D506":"212D","1D50B":"210C","1D50C":"2111","1D515":"211C","1D51D":"2128"},capital:!0,category:"Lu",font:o.FRAKTUR},{interval:["1D51E","1D537"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.FRAKTUR},{interval:["FF21","FF3A"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.FULLWIDTH},{interval:["FF41","FF5A"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.FULLWIDTH},{interval:["1D434","1D44D"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.ITALIC},{interval:["1D44E","1D467"],base:r.LATINSMALL,subst:{"1D455":"210E"},capital:!1,category:"Ll",font:o.ITALIC},{interval:["1D670","1D689"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.MONOSPACE},{interval:["1D68A","1D6A3"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.MONOSPACE},{interval:["0041","005A"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.NORMAL},{interval:["0061","007A"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.NORMAL},{interval:["1D49C","1D4B5"],base:r.LATINCAP,subst:{"1D49D":"212C","1D4A0":"2130","1D4A1":"2131","1D4A3":"210B","1D4A4":"2110","1D4A7":"2112","1D4A8":"2133","1D4AD":"211B"},capital:!0,category:"Lu",font:o.SCRIPT},{interval:["1D4B6","1D4CF"],base:r.LATINSMALL,subst:{"1D4BA":"212F","1D4BC":"210A","1D4C4":"2134"},capital:!1,category:"Ll",font:o.SCRIPT},{interval:["1D5A0","1D5B9"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.SANSSERIF},{interval:["1D5BA","1D5D3"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.SANSSERIF},{interval:["1D608","1D621"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.SANSSERIFITALIC},{interval:["1D622","1D63B"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.SANSSERIFITALIC},{interval:["1D5D4","1D5ED"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.SANSSERIFBOLD},{interval:["1D5EE","1D607"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.SANSSERIFBOLD},{interval:["1D63C","1D655"],base:r.LATINCAP,subst:{},capital:!0,category:"Lu",font:o.SANSSERIFBOLDITALIC},{interval:["1D656","1D66F"],base:r.LATINSMALL,subst:{},capital:!1,category:"Ll",font:o.SANSSERIFBOLDITALIC},{interval:["0391","03A9"],base:r.GREEKCAP,subst:{"03A2":"03F4"},capital:!0,category:"Lu",font:o.NORMAL},{interval:["03B0","03D0"],base:r.GREEKSMALL,subst:{"03B0":"2207","03CA":"2202","03CB":"03F5","03CC":"03D1","03CD":"03F0","03CE":"03D5","03CF":"03F1","03D0":"03D6"},capital:!1,category:"Ll",font:o.NORMAL},{interval:["1D6A8","1D6C0"],base:r.GREEKCAP,subst:{},capital:!0,category:"Lu",font:o.BOLD},{interval:["1D6C1","1D6E1"],base:r.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:o.BOLD},{interval:["1D6E2","1D6FA"],base:r.GREEKCAP,subst:{},capital:!0,category:"Lu",font:o.ITALIC},{interval:["1D6FB","1D71B"],base:r.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:o.ITALIC},{interval:["1D71C","1D734"],base:r.GREEKCAP,subst:{},capital:!0,category:"Lu",font:o.BOLDITALIC},{interval:["1D735","1D755"],base:r.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:o.BOLDITALIC},{interval:["1D756","1D76E"],base:r.GREEKCAP,subst:{},capital:!0,category:"Lu",font:o.SANSSERIFBOLD},{interval:["1D76F","1D78F"],base:r.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:o.SANSSERIFBOLD},{interval:["1D790","1D7A8"],base:r.GREEKCAP,subst:{},capital:!0,category:"Lu",font:o.SANSSERIFBOLDITALIC},{interval:["1D7A9","1D7C9"],base:r.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:o.SANSSERIFBOLDITALIC},{interval:["0030","0039"],base:r.DIGIT,subst:{},offset:0,category:"Nd",font:o.NORMAL},{interval:["2070","2079"],base:r.DIGIT,subst:{2071:"00B9",2072:"00B2",2073:"00B3"},offset:0,category:"No",font:e.SUPER},{interval:["2080","2089"],base:r.DIGIT,subst:{},offset:0,category:"No",font:e.SUB},{interval:["245F","2473"],base:r.DIGIT,subst:{"245F":"24EA"},offset:0,category:"No",font:e.CIRCLED},{interval:["3251","325F"],base:r.DIGIT,subst:{},offset:21,category:"No",font:e.CIRCLED},{interval:["32B1","32BF"],base:r.DIGIT,subst:{},offset:36,category:"No",font:e.CIRCLED},{interval:["2474","2487"],base:r.DIGIT,subst:{},offset:1,category:"No",font:e.PARENTHESIZED},{interval:["2487","249B"],base:r.DIGIT,subst:{2487:"1F100"},offset:0,category:"No",font:e.PERIOD},{interval:["2775","277F"],base:r.DIGIT,subst:{2775:"24FF"},offset:0,category:"No",font:e.NEGATIVECIRCLED},{interval:["24EB","24F4"],base:r.DIGIT,subst:{},offset:11,category:"No",font:e.NEGATIVECIRCLED},{interval:["24F5","24FE"],base:r.DIGIT,subst:{},offset:1,category:"No",font:e.DOUBLECIRCLED},{interval:["277F","2789"],base:r.DIGIT,subst:{"277F":"1F10B"},offset:0,category:"No",font:e.CIRCLEDSANSSERIF},{interval:["2789","2793"],base:r.DIGIT,subst:{2789:"1F10C"},offset:0,category:"No",font:e.NEGATIVECIRCLEDSANSSERIF},{interval:["FF10","FF19"],base:r.DIGIT,subst:{},offset:0,category:"Nd",font:o.FULLWIDTH},{interval:["1D7CE","1D7D7"],base:r.DIGIT,subst:{},offset:0,category:"Nd",font:o.BOLD},{interval:["1D7D8","1D7E1"],base:r.DIGIT,subst:{},offset:0,category:"Nd",font:o.DOUBLESTRUCK},{interval:["1D7E2","1D7EB"],base:r.DIGIT,subst:{},offset:0,category:"Nd",font:o.SANSSERIF},{interval:["1D7EC","1D7F5"],base:r.DIGIT,subst:{},offset:0,category:"Nd",font:o.SANSSERIFBOLD},{interval:["1D7F6","1D7FF"],base:r.DIGIT,subst:{},offset:0,category:"Nd",font:o.MONOSPACE},{interval:["1F101","1F10A"],base:r.DIGIT,subst:{},offset:0,category:"No",font:e.COMMA},{interval:["24B6","24CF"],base:r.LATINCAP,subst:{},capital:!0,category:"So",font:e.CIRCLED},{interval:["24D0","24E9"],base:r.LATINSMALL,subst:{},capital:!1,category:"So",font:e.CIRCLED},{interval:["1F110","1F129"],base:r.LATINCAP,subst:{},capital:!0,category:"So",font:e.PARENTHESIZED},{interval:["249C","24B5"],base:r.LATINSMALL,subst:{},capital:!1,category:"So",font:e.PARENTHESIZED},{interval:["1F130","1F149"],base:r.LATINCAP,subst:{},capital:!0,category:"So",font:e.SQUARED},{interval:["1F170","1F189"],base:r.LATINCAP,subst:{},capital:!0,category:"So",font:e.NEGATIVESQUARED},{interval:["1F150","1F169"],base:r.LATINCAP,subst:{},capital:!0,category:"So",font:e.NEGATIVECIRCLED}],Ae=new Map;function be(e,t){return e+t.split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}for(const U of Ie){const t=be(U.base,U.font),n=Te(U.interval,U.subst);let e=Ae.get(t);e?e.unicode=e.unicode.concat(n):((e=U).unicode=n,Ae.set(t,e))}(t=a=a||{}).PUNCTUATION="punctuation",t.FENCE="fence",t.NUMBER="number",t.IDENTIFIER="identifier",t.TEXT="text",t.OPERATOR="operator",t.RELATION="relation",t.LARGEOP="largeop",t.FUNCTION="function",t.ACCENT="accent",t.FENCED="fenced",t.FRACTION="fraction",t.PUNCTUATED="punctuated",t.RELSEQ="relseq",t.MULTIREL="multirel",t.INFIXOP="infixop",t.PREFIXOP="prefixop",t.POSTFIXOP="postfixop",t.APPL="appl",t.INTEGRAL="integral",t.BIGOP="bigop",t.SQRT="sqrt",t.ROOT="root",t.LIMUPPER="limupper",t.LIMLOWER="limlower",t.LIMBOTH="limboth",t.SUBSCRIPT="subscript",t.SUPERSCRIPT="superscript",t.UNDERSCORE="underscore",t.OVERSCORE="overscore",t.TENSOR="tensor",t.TABLE="table",t.MULTILINE="multiline",t.MATRIX="matrix",t.VECTOR="vector",t.CASES="cases",t.ROW="row",t.LINE="line",t.CELL="cell",t.ENCLOSE="enclose",t.INFERENCE="inference",t.RULELABEL="rulelabel",t.CONCLUSION="conclusion",t.PREMISES="premises",t.UNKNOWN="unknown",t.EMPTY="empty";const E=Object.assign({},a),h=((n=_=_||{}).COMMA="comma",n.SEMICOLON="semicolon",n.ELLIPSIS="ellipsis",n.FULLSTOP="fullstop",n.QUESTION="question",n.EXCLAMATION="exclamation",n.QUOTES="quotes",n.DASH="dash",n.TILDE="tilde",n.PRIME="prime",n.DEGREE="degree",n.VBAR="vbar",n.COLON="colon",n.OPENFENCE="openfence",n.CLOSEFENCE="closefence",n.APPLICATION="application",n.DUMMY="dummy",n.UNIT="unit",n.LABEL="label",n.OPEN="open",n.CLOSE="close",n.TOP="top",n.BOTTOM="bottom",n.NEUTRAL="neutral",n.METRIC="metric",n.LATINLETTER="latinletter",n.GREEKLETTER="greekletter",n.OTHERLETTER="otherletter",n.NUMBERSET="numbersetletter",n.INTEGER="integer",n.FLOAT="float",n.OTHERNUMBER="othernumber",n.INFTY="infty",n.MIXED="mixed",n.MULTIACCENT="multiaccent",n.OVERACCENT="overaccent",n.UNDERACCENT="underaccent",n.UNDEROVER="underover",n.SUBSUP="subsup",n.LEFTSUB="leftsub",n.LEFTSUPER="leftsuper",n.RIGHTSUB="rightsub",n.RIGHTSUPER="rightsuper",n.LEFTRIGHT="leftright",n.ABOVEBELOW="abovebelow",n.INTERVAL="interval",n.SETEMPTY="set empty",n.SETEXT="set extended",n.SETSINGLE="set singleton",n.SETCOLLECT="set collection",n.STRING="string",n.SPACE="space",n.ANNOTATION="annotation",n.TEXT="text",n.SEQUENCE="sequence",n.ENDPUNCT="endpunct",n.STARTPUNCT="startpunct",n.NEGATIVE="negative",n.POSITIVE="positive",n.NEGATION="negation",n.MULTIOP="multiop",n.PREFIXOP="prefix operator",n.POSTFIXOP="postfix operator",n.LIMFUNC="limit function",n.INFIXFUNC="infix function",n.PREFIXFUNC="prefix function",n.POSTFIXFUNC="postfix function",n.SIMPLEFUNC="simple function",n.COMPFUNC="composed function",n.SUM="sum",n.INTEGRAL="integral",n.GEOMETRY="geometry",n.BOX="box",n.BLOCK="block",n.ADDITION="addition",n.MULTIPLICATION="multiplication",n.SUBTRACTION="subtraction",n.IMPLICIT="implicit",n.DIVISION="division",n.VULGAR="vulgar",n.EQUALITY="equality",n.INEQUALITY="inequality",n.ARROW="arrow",n.ELEMENT="element",n.NONELEMENT="nonelement",n.REELEMENT="reelement",n.RENONELEMENT="renonelement",n.SET="set",n.DETERMINANT="determinant",n.ROWVECTOR="rowvector",n.BINOMIAL="binomial",n.SQUAREMATRIX="squarematrix",n.CYCLE="cycle",n.MULTILINE="multiline",n.MATRIX="matrix",n.VECTOR="vector",n.CASES="cases",n.TABLE="table",n.CAYLEY="cayley",n.PROOF="proof",n.LEFT="left",n.RIGHT="right",n.UP="up",n.DOWN="down",n.FINAL="final",n.SINGLE="single",n.HYP="hyp",n.AXIOM="axiom",n.LOGIC="logic",n.UNKNOWN="unknown",n.MGLYPH="mglyph",Object.assign({},_)),d=((t=dn=dn||{}).CALIGRAPHIC="caligraphic",t.CALIGRAPHICBOLD="caligraphic-bold",t.OLDSTYLE="oldstyle",t.OLDSTYLEBOLD="oldstyle-bold",t.UNKNOWN="unknown",Object.assign(Object.assign(Object.assign({},o),dn),e)),Re=((a=M=M||{}).ALLLETTERS="allLetters",a.D="d",a.BAR="bar",a.TILDE="tilde",Object.assign(Object.assign({},r),M));function Oe(e,t){return e.toString()}function Ce(e){return e.toString()}function ye(e,t){return e+t.toLowerCase()}const ve={};function Le(e,t=""){if(!e.childNodes||!e.childNodes[0]||!e.childNodes[0].childNodes||e.childNodes[0].childNodes.length<2||e.childNodes[0].childNodes[0].tagName!==E.NUMBER||e.childNodes[0].childNodes[0].getAttribute("role")!==h.INTEGER||e.childNodes[0].childNodes[1].tagName!==E.NUMBER||e.childNodes[0].childNodes[1].getAttribute("role")!==h.INTEGER)return{convertible:!1,content:e.textContent};var n=e.childNodes[0].childNodes[1].textContent,e=e.childNodes[0].childNodes[0].textContent,r=Number(n),o=Number(e);return isNaN(r)||isNaN(o)?{convertible:!1,content:e+` ${t} `+n}:{convertible:!0,enumerator:o,denominator:r}}function Me(e,t,n){var r=Le(e);if(r.convertible){const e=r.enumerator,o=r.denominator;return 0<e&&e<t&&0<o&&o<n}return!1}function _e(e={}){return Object.assign({zero:"zero",ones:[],tens:[],large:[],special:{},wordOrdinal:Ce,numericOrdinal:Ce,numberToWords:Ce,numberToOrdinal:Oe,vulgarSep:" ",numSep:" "},e)}ve.identityCombiner=function(e,t,n){return e+t+n},ve.prefixCombiner=function(e,t,n){return e=n?n+" "+e:e,t?t+" "+e:e},ve.postfixCombiner=function(e,t,n){return e=n?n+" "+e:e,t?e+" "+t:e},ve.romanceCombiner=function(e,t,n){return e=n?e+" "+n:e,t?e+" "+t:e};const N=we();function we(){return{FUNCTIONS:{fracNestDepth:e=>Me(e,10,100),radicalNestDepth:e=>"",combineRootIndex:function(e,t){return e},combineNestedFraction:ve.identityCombiner,combineNestedRadical:ve.identityCombiner,fontRegexp:function(e){return new RegExp("^"+e.split(/ |-/).join("( |-)")+"( |-)")},si:ye,plural:Ce},MESSAGES:{MS:{},MSroots:{},font:{},embellish:{},role:{},enclose:{},navigate:{},regexp:{},unitTimes:""},ALPHABETS:{latinSmall:[],latinCap:[],greekSmall:[],greekCap:[],capPrefix:{default:""},smallPrefix:{default:""},digitPrefix:{default:""},languagePrefix:{},digitTrans:{default:Ce,mathspeak:Ce,clearspeak:Ce},letterTrans:{default:Ce},combiner:(e,t,n)=>e},NUMBERS:_e(),COMBINERS:{},CORRECTIONS:{},SUBISO:{default:"",current:"",all:[]}}}function De(e){switch(e){case 1:return N.MESSAGES.MS.ONCE||"";case 2:return N.MESSAGES.MS.TWICE;default:return e.toString()}}function Pe(e,t){return e===N.MESSAGES.MS.ROOTINDEX||e===N.MESSAGES.MS.INDEX?e:e+" "+t}function xe(e){return Ue(N.MESSAGES.font[e],e)}function Ue(e,t){return void 0===e?t:"string"==typeof e?e:e[0]}const Fe="grammar";class O{static getInstance(){return O.instance=O.instance||new O,O.instance}static parseInput(e){const t={},n=e.split(":");for(const e of n){const n=e.split("="),r=n[0].trim();n[1]?t[r]=n[1].trim():r.match(/^!/)?t[r.slice(1)]=!1:t[r]=!0}return t}static parseState(e){const t={},n=e.split(" ");for(const e of n){const n=e.split(":"),r=n[0],o=n[1];t[r]=o||!0}return t}static translateString(e){if(e.match(/:unit$/))return O.translateUnit(e);const t=m.getInstance();let n=t.evaluator(e,t.dynamicCstr);return n=null===n?e:n,n=O.getInstance().getParameter("plural")?N.FUNCTIONS.plural(n):n}static translateUnit(e){e=O.prepareUnit(e);const t=m.getInstance(),n=O.getInstance().getParameter("plural"),r=t.options.strict,o=`${t.options.locale}.${t.options.modality}.default`;let i,s;return t.options.strict=!0,n&&(i=t.defaultParser.parse(o+".plural"),s=t.evaluator(e,i)),s?(t.options.strict=r,s):(i=t.defaultParser.parse(o+".default"),s=t.evaluator(e,i),t.options.strict=r,s?s=n?N.FUNCTIONS.plural(s):s:O.cleanUnit(e))}static prepareUnit(e){var t=e.match(/:unit$/);return t?e.slice(0,t.index).replace(/\s+/g," ")+e.slice(t.index):e}static cleanUnit(e){return e.match(/:unit$/)?e.replace(/:unit$/,""):e}clear(){this.parameters_={},this.stateStack_=[]}setParameter(e,t){var n=this.parameters_[e];return t?this.parameters_[e]=t:delete this.parameters_[e],n}getParameter(e){return this.parameters_[e]}setCorrection(e,t){this.corrections_[e]=t}setPreprocessor(e,t){this.preprocessors_[e]=t}getCorrection(e){return this.corrections_[e]}getState(){const e=[];for(var[t,n]of Object.entries(this.parameters_))e.push("string"==typeof n?t+":"+n:t);return e.join(" ")}processSingles(){const e={};for(const t of this.singles)e[t]=!1;this.singles=[],this.pushState(e)}pushState(e){for(var[t,n]of Object.entries(e))t.match(/^\?/)&&(delete e[t],t=t.slice(1),this.singles.push(t)),e[t]=this.setParameter(t,n);this.stateStack_.push(e)}popState(){var e,t,n=this.stateStack_.pop();for([e,t]of Object.entries(n))this.setParameter(e,t)}setAttribute(e){var t;e&&e.nodeType===K.ELEMENT_NODE&&(t=this.getState())&&e.setAttribute(Fe,t)}preprocess(e){return this.runProcessors(e,this.preprocessors_)}correct(e){return this.runProcessors(e,this.corrections_)}apply(e,t){return this.currentFlags=t||{},e=this.currentFlags.adjust||this.currentFlags.preprocess?O.getInstance().preprocess(e):e,(this.parameters_.translate||this.currentFlags.translate)&&(e=O.translateString(e)),e=this.currentFlags.adjust||this.currentFlags.correct?O.getInstance().correct(e):e,this.currentFlags={},e}runProcessors(e,t){for(var[n,r]of Object.entries(this.parameters_)){const o=t[n];o&&(e=!0===r?o(e):o(e,r))}return e}constructor(){this.currentFlags={},this.parameters_={},this.corrections_={},this.preprocessors_={},this.stateStack_=[],this.singles=[]}}function ke(e,t){if(!t||!e)return e;t=N.FUNCTIONS.fontRegexp(xe(t));return e.replace(t,"")}function Be(e){if(0===e)return He.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;0<e;){if(e%1e3){var r=function(e){let t=e%1e3,n="",r=He.ones[Math.floor(t/100)];if(n+=r?r+He.numSep+"honderd":"",t%=100)if(n+=n?He.numSep:"",r=He.ones[t])n+=r;else{const e=He.tens[Math.floor(t/10)];r=He.ones[t%10],n+=r?r+"-en-"+e:e}return n}(e%1e3);if(t){const e=He.large[t];n=r+He.numSep+e+(n?He.numSep+n:"")}else n=r+(n?He.numSep+n:"")}e=Math.floor(e/1e3),t++}return n}function Ge(e){return 1===e?"eerste":3===e?"derde":8===e?"agste":9===e?"negende":Be(e)+(e<19?"de":"ste")}O.getInstance().setCorrection("localFont",xe),O.getInstance().setCorrection("localRole",function(e){return Ue(N.MESSAGES.role[e],e)}),O.getInstance().setCorrection("localEnclose",function(e){return Ue(N.MESSAGES.enclose[e],e)}),O.getInstance().setCorrection("ignoreFont",ke),O.getInstance().setPreprocessor("annotation",function(e,t){return e+":"+t}),O.getInstance().setPreprocessor("noTranslateText",function(e){return e.match(new RegExp("^["+N.MESSAGES.regexp.TEXT+"]+$"))&&(O.getInstance().currentFlags.translate=!1),e}),O.getInstance().setCorrection("ignoreCaps",function(e){let t=N.ALPHABETS.capPrefix[m.getInstance().options.domain];return ke(e,t=void 0===t?N.ALPHABETS.capPrefix.default:t)}),O.getInstance().setPreprocessor("numbers2alpha",function(e){return e.match(/\d+/)?N.NUMBERS.numberToWords(parseInt(e,10)):e});function Ve(e,t,n){return e=n?n+" "+e:e,t?e+" "+t:e}const He=_e({wordOrdinal:Ge,numericOrdinal:function(e){return e.toString()+"."},numberToWords:Be,numberToOrdinal:function(e,t){return 1===e?"enkel":2===e?t?"helftes":"helfte":4===e?t?"kwarte":"kwart":Ge(e)+(t?"s":"")}});let je=null;function qe(e){const r=e%1e3,t=Math.floor(r/100),n=t?1===t?"cent":We.ones[t]+"-cents":"",o=function(){var e=r%100%100;if(e<20)return We.ones[e];var t=Math.floor(e/10),n=We.tens[t],e=We.ones[e%10];return n&&e?n+(2===t?"-i-":"-")+e:n||e}();return n&&o?n+We.numSep+o:n||o}function Xe(e){if(0===e)return We.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;0<e;){var r=e%(1<t?1e6:1e3);if(r){let e=We.large[t];if(t)if(1===t)n=(1==r?"":qe(r)+We.numSep)+e+(n?We.numSep+n:"");else{const t=Xe(r);e=1==r?e:e.replace(/\u00f3$/,"ons"),n=t+We.numSep+e+(n?We.numSep+n:"")}else n=qe(r)}e=Math.floor(e/(1<t?1e6:1e3)),t++}return n}function Ye(e){var t=O.getInstance().getParameter("gender");return e.toString()+("f"===t?"a":"n")}function $e(e,t,n){return e="sans serif "+(n?n+" "+e:e),t?e+" "+t:e}const We=_e({numericOrdinal:Ye,numberToWords:Xe,numberToOrdinal:function(e,t){if(1999<e)return Ye(e);if(e<=10)return We.special.onesOrdinals[e-1];const n=Xe(e);return n.match(/mil$/)?n.replace(/mil$/,"milÂ·lÃ¨sima"):n.match(/u$/)?n.replace(/u$/,"vena"):n.match(/a$/)?n.replace(/a$/,"ena"):n+(n.match(/e$/)?"na":"ena")}});let Ke=null;function ze(e,t=!1){return e===Ze.ones[1]?t?"et":"en":e}function Qe(e,t=!1){if(0===e)return Ze.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,r="";for(;0<e;){var o=e%1e3;if(o){const e=function(e,t=!1){let n=e%1e3,r="",o=Ze.ones[Math.floor(n/100)];if(r+=o?ze(o,!0)+" hundrede":"",n%=100)if(r+=r?" og ":"",o=(t?Ze.special.smallOrdinals:Ze.ones)[n])r+=o;else{const e=(t?Ze.special.tensOrdinals:Ze.tens)[Math.floor(n/10)];o=Ze.ones[n%10],r+=o?ze(o)+"og"+e:e}return r}(o,t&&!n);if(n){const t=Ze.large[n],i=1<o?"er":"";r=ze(e,n<=1)+" "+t+i+(r?" og ":"")+r}else r=ze(e)+r}e=Math.floor(e/1e3),n++}return r}function Je(e){if(e%100)return Qe(e,!0);const t=Qe(e);return t.match(/e$/)?t:t+"e"}const Ze=_e({wordOrdinal:Je,numericOrdinal:function(e){return e.toString()+"."},numberToWords:Qe,numberToOrdinal:function(e,t){return 1===e?t?"hel":"hele":2===e?t?"halv":"halve":Je(e)+(t?"dele":"del")}});let et=null;function tt(e,t=!1){return e===st.ones[1]?t?"eine":"ein":e}function nt(e){if(0===e)return st.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;0<e;){var r=e%1e3;if(r){var o=function(e){let t=e%1e3,n="",r=st.ones[Math.floor(t/100)];if(n+=r?tt(r)+"hundert":"",t%=100)if(n+=n?st.numSep:"",r=st.ones[t])n+=r;else{const e=st.tens[Math.floor(t/10)];r=st.ones[t%10],n+=r?tt(r)+"und"+e:e}return n}(e%1e3);if(t){const e=st.large[t],i=1<t&&1<r?e.match(/e$/)?"n":"en":"";n=tt(o,1<t)+e+i+n}else n=tt(o,1<t)+n}e=Math.floor(e/1e3),t++}return n.replace(/ein$/,"eins")}function rt(e){return 1===e?"erste":3===e?"dritte":7===e?"siebte":8===e?"achte":nt(e)+(e<19?"te":"ste")}function ot(e,t,n){return"s"===n&&(t=t.split(" ").map(function(e){return e.replace(/s$/,"")}).join(" "),n=""),e=n?n+" "+e:e,t?t+" "+e:e}function it(e,t,n){return e=n&&"s"!==n?n+" "+e:e,t?e+" "+t:e}const st=_e({wordOrdinal:rt,numericOrdinal:function(e){return e.toString()+"."},numberToWords:nt,numberToOrdinal:function(e,t){return 1===e?"eintel":2===e?t?"halbe":"halb":rt(e)+"l"}});let at=null;function ct(e){if(0===e)return ut.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;0<e;)e%1e3&&(n=function(e){let t=e%1e3,n="";return n+=ut.ones[Math.floor(t/100)]?ut.ones[Math.floor(t/100)]+ut.numSep+"hundred":"",n=(t%=100)?(n+=n?ut.numSep:"")+(ut.ones[t]||ut.tens[Math.floor(t/10)]+(t%10?ut.numSep+ut.ones[t%10]:"")):n}(e%1e3)+(t?"-"+ut.large[t]+"-":"")+n),e=Math.floor(e/1e3),t++;return n.replace(/-$/,"")}function lt(e){let t=ct(e);return t.match(/one$/)?t=t.slice(0,-3)+"first":t.match(/two$/)?t=t.slice(0,-3)+"second":t.match(/three$/)?t=t.slice(0,-5)+"third":t.match(/five$/)?t=t.slice(0,-4)+"fifth":t.match(/eight$/)?t=t.slice(0,-5)+"eighth":t.match(/nine$/)?t=t.slice(0,-4)+"ninth":t.match(/twelve$/)?t=t.slice(0,-6)+"twelfth":t.match(/ty$/)?t=t.slice(0,-2)+"tieth":t+="th",t}const ut=_e({wordOrdinal:lt,numericOrdinal:function(e){var t=e%100,n=e.toString();if(10<t&&t<20)return n+"th";switch(e%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd";default:return n+"th"}},numberToWords:ct,numberToOrdinal:function(e,t){if(1===e)return t?"oneths":"oneth";if(2===e)return t?"halves":"half";e=lt(e);return t?e+"s":e}});let ht=null;function dt(e){const n=e%1e3,t=Math.floor(n/100),r=ft.special.hundreds[t],o=function(){var e=n%100%100;if(e<30)return ft.ones[e];var t=ft.tens[Math.floor(e/10)],e=ft.ones[e%10];return t&&e?t+" y "+e:t||e}();return 1===t?o?r+"to "+o:r:r&&o?r+" "+o:r||o}function pt(e,t,n){return e="sans serif "+(n?n+" "+e:e),t?e+" "+t:e}const ft=_e({numericOrdinal:function(e){var t=O.getInstance().getParameter("gender");return e.toString()+("f"===t?"a":"o")},numberToWords:function(e){if(0===e)return ft.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;0<e;){var r=e%1e3;if(r){let e=ft.large[t];var o=dt(r);n=t?1==r?(e=e.match("/^mil( |$)/")?e:"un "+e)+(n?" "+n:""):(e=e.replace(/\u00f3n$/,"ones"),dt(r)+" "+e+(n?" "+n:"")):o}e=Math.floor(e/1e3),t++}return n},numberToOrdinal:function(e,t){if(1999<e)return e.toString()+"a";if(e<=12)return ft.special.onesOrdinals[e-1];const n=[];if(1e3<=e&&(e-=1e3,n.push("milÃ©sima")),!e)return n.join(" ");let r=0;return 0<(r=Math.floor(e/100))&&(n.push(ft.special.hundredsOrdinals[r-1]),e%=100),e<=12?n.push(ft.special.onesOrdinals[e-1]):(0<(r=Math.floor(e/10))&&(n.push(ft.special.tensOrdinals[r-1]),e%=10),0<e&&n.push(ft.special.onesOrdinals[e-1])),n.join(" ")}});let mt=null,gt=null;function Et(e){if(0===e)return Tt.zero;if(e>=Math.pow(10,36))return e.toString();Tt.special["tens-"+m.getInstance().options.subiso]&&(Tt.tens=Tt.special["tens-"+m.getInstance().options.subiso]);let t=0,n="";for(;0<e;){var r=e%1e3;if(r){let e=Tt.large[t];var o=function(e){let t=e%1e3,n="";if(n+=Tt.ones[Math.floor(t/100)]?Tt.ones[Math.floor(t/100)]+"-cent":"",t%=100){n+=n?"-":"";let e=Tt.ones[t];if(e)n+=e;else{const r=Tt.tens[Math.floor(t/10)];r.match(/-dix$/)?(e=Tt.ones[t%10+10],n+=r.replace(/-dix$/,"")+"-"+e):n+=r+(t%10?"-"+Tt.ones[t%10]:"")}}const r=n.match(/s-\w+$/);return r?n.replace(/s-\w+$/,r[0].slice(1)):n.replace(/-un$/,"-et-un")}(r);if(e&&e.match(/^mille /)){const i=e.replace(/^mille /,"");n=n.match(RegExp(i))?o+(t?"-mille-":"")+n:n.match(RegExp(i.replace(/s$/,"")))?o+(t?"-mille-":"")+n.replace(i.replace(/s$/,""),i):o+(t?"-"+e+"-":"")+n}else e=1==r&&e?e.replace(/s$/,""):e,n=o+(t?"-"+e+"-":"")+n}e=Math.floor(e/1e3),t++}return n.replace(/-$/,"")}const Nt={1:"uniÃ¨me",2:"demi",3:"tiers",4:"quart"};function St(e){if(1===e)return"premiÃ¨re";let t=Et(e);return t.match(/^neuf$/)?t=t.slice(0,-1)+"v":t.match(/cinq$/)?t+="u":t.match(/trois$/)?t+="":(t.match(/e$/)||t.match(/s$/))&&(t=t.slice(0,-1)),t+="iÃ¨me"}const Tt=_e({wordOrdinal:St,numericOrdinal:function(e){var t=O.getInstance().getParameter("gender");return 1===e?e.toString()+("m"===t?"er":"re"):e.toString()+"e"},numberToWords:Et,numberToOrdinal:function(e,t){var n=Nt[e]||St(e);return 3!==e&&t?n+"s":n}});let It=null;function At(n){if(0===n)return Rt.zero;if(n>=Math.pow(10,32))return n.toString();let e=0,t="";const r=function(){let e=n%1e3%1e3,t="";return t+=Rt.ones[Math.floor(e/100)]?Rt.ones[Math.floor(e/100)]+Rt.numSep+Rt.special.hundred:"",t=(e%=100)?(t+=t?Rt.numSep:"")+Rt.ones[e]:t}();if(!(n=Math.floor(n/1e3)))return r;for(;0<n;){const r=n%100;r&&(t=Rt.ones[r]+Rt.numSep+Rt.large[e]+(t?Rt.numSep+t:"")),n=Math.floor(n/100),e++}return r?t+Rt.numSep+r:t}function bt(e){var t=O.getInstance().getParameter("gender");return e<=0?e.toString():e<10?("f"===t?Rt.special.ordinalsFeminine:Rt.special.ordinalsMasculine)[e]:At(e)+("f"===t?"à¤µà¥€à¤‚":"à¤µà¤¾à¤")}const Rt=_e({wordOrdinal:bt,numericOrdinal:function(e){var t=O.getInstance().getParameter("gender");return 0<e&&e<10?("f"===t?Rt.special.simpleSmallOrdinalsFeminine:Rt.special.simpleSmallOrdinalsMasculine)[e]:e.toString().split("").map(function(e){e=parseInt(e,10);return isNaN(e)?"":Rt.special.simpleNumbers[e]}).join("")+("f"===t?"à¤µà¥€à¤‚":"à¤µà¤¾à¤")},numberToWords:At,numberToOrdinal:function(e,t){return e<=10?Rt.special.smallDenominators[e]:bt(e)+" à¤…à¤‚à¤¶"}});let Ot=null;function Ct(e){if(0===e)return Lt.zero;if(e>=Math.pow(10,36))return e.toString();let t=0,n="";for(;0<e;)e%1e4&&(n=function(e){let t=e%1e4,n="";return n+=Lt.ones[Math.floor(t/1e3)]?1===Math.floor(t/1e3)?"ì²œ":Lt.ones[Math.floor(t/1e3)]+"ì²œ":"",(t%=1e3)&&(n+=Lt.ones[Math.floor(t/100)]?1===Math.floor(t/100)?"ë°±":Lt.ones[Math.floor(t/100)]+"ë°±":"",t%=100,n+=Lt.tens[Math.floor(t/10)]+(t%10?Lt.ones[t%10]:"")),n}(e%1e4)+(t?Lt.large[t]+Lt.numSep:"")+n),e=Math.floor(e/1e4),t++;return n.replace(/ $/,"")}function yt(e,t){return 1===e?"ì²«ë²ˆì§¸":vt(e)+"ë²ˆì§¸"}function vt(e){const t=Ct(e),n=Ct(e%=100);if(!n||!e)return t;var r=20===e?"ìŠ¤ë¬´":Lt.tens[10+Math.floor(e/10)],e=Lt.ones[10+Math.floor(e%10)];return t.slice(0,-n.length)+r+e}const Lt=_e({wordOrdinal:vt,numericOrdinal:function(e){return yt(e)},numberToWords:Ct,numberToOrdinal:yt});let Mt=null;function _t(e){if(0===e)return Pt.zero;if(e>=Math.pow(10,36))return e.toString();if(1===e&&O.getInstance().getParameter("fraction"))return"un";let t=0,n="";for(;0<e;)e%1e3&&(n=function(e){let t=e%1e3,n="";if(n+=Pt.ones[Math.floor(t/100)]?Pt.ones[Math.floor(t/100)]+Pt.numSep+"cento":"",t%=100){n+=n?Pt.numSep:"";const e=Pt.ones[t];if(e)n+=e;else{let e=Pt.tens[Math.floor(t/10)];var r=t%10;1!=r&&8!=r||(e=e.slice(0,-1)),n=(n+=e)+(r?Pt.numSep+Pt.ones[t%10]:"")}}return n}(e%1e3)+(t?"-"+Pt.large[t]+"-":"")+n),e=Math.floor(e/1e3),t++;return n.replace(/-$/,"")}function wt(e){var t="m"===O.getInstance().getParameter("gender")?"o":"a";let n=Pt.special.onesOrdinals[e];return n?n.slice(0,-1)+t:(n=_t(e)).slice(0,-1)+"esim"+t}function Dt(e,t,n){return e.match(/^[a-zA-Z]$/)&&(t=t.replace("cerchiato","cerchiata")),e=n?e+" "+n:e,t?e+" "+t:e}const Pt=_e({wordOrdinal:wt,numericOrdinal:function(e){var t=O.getInstance().getParameter("gender");return e.toString()+("m"===t?"o":"a")},numberToWords:_t,numberToOrdinal:function(e,t){if(2===e)return t?"mezzi":"mezzo";const n=wt(e);if(!t)return n;e=n.match(/o$/)?"i":"e";return n.slice(0,-1)+e}});let xt=null;function Ut(e){var t=s.special.endOrdinal[0];return"a"===t&&e.match(/en$/)?e.slice(0,-2)+s.special.endOrdinal:e.match(/(d|n)$/)||e.match(/hundre$/)?e+"de":e.match(/i$/)?e+s.special.endOrdinal:"a"===t&&e.match(/e$/)?e.slice(0,-1)+s.special.endOrdinal:(e.match(/e$/),e+"nde")}function Ft(e){return Bt(e,!0)}const s=_e({wordOrdinal:Ft,numericOrdinal:function(e){return e.toString()+"."},numberToWords:Bt,numberToOrdinal:function(e,t){return Ft(e)}});function kt(e,t=!1){return e===s.ones[1]?"ein"===e?"eitt ":t?"et":"ett":e}function Bt(e,t=!1){return("alt"===m.getInstance().options.subiso?function(e,t=!1){if(0===e)return t?s.special.smallOrdinals[0]:s.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,r="";for(;0<e;){var o,i=e%1e3;i&&(o=function(e,t=!1){let n=e%1e3,r="",o=s.ones[Math.floor(n/100)];if(r+=o?kt(o)+"hundre":"",n%=100){if(r+=r?"og":"",t){const e=s.special.smallOrdinals[n];if(e)return r+e}if(o=s.ones[n])r+=o;else{const e=s.tens[Math.floor(n/10)];o=s.ones[n%10],r+=o?o+"og"+e:e}}return t?Ut(r):r}(e%1e3,!n&&t),!n&&t&&(t=!t),r=(1===n?kt(o,!0):o)+(1<n?s.numSep:"")+(n?s.large[n]+(1<n&&1<i?"er":""):"")+(1<n&&r?s.numSep:"")+r),e=Math.floor(e/1e3),n++}return t?r+(r.match(/tusen$/)?"de":"te"):r}:function(e,t=!1){if(0===e)return t?s.special.smallOrdinals[0]:s.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,r="";for(;0<e;){var o,i=e%1e3;i&&(o=function(e,t=!1){let n=e%1e3,r="";var e=Math.floor(n/100),o=s.ones[e];if(r+=o?(1===e?"":o)+"hundre":"",n%=100){if(r+=r?"og":"",t){const e=s.special.smallOrdinals[n];if(e)return r+e;if(n%10)return r+s.tens[Math.floor(n/10)]+s.special.smallOrdinals[n%10]}r+=s.ones[n]||s.tens[Math.floor(n/10)]+(n%10?s.ones[n%10]:"")}return t?Ut(r):r}(e%1e3,!n&&t),!n&&t&&(t=!t),r=o+(n?" "+s.large[n]+(1<n&&1<i?"er":"")+(r?" ":""):"")+r),e=Math.floor(e/1e3),n++}return t?r+(r.match(/tusen$/)?"de":"te"):r})(e,t)}let Gt=null;function Vt(e){return e.toString().split("").map(function(e){return Wt.ones[parseInt(e,10)]}).join("")}function Ht(e){return e.match(RegExp("^"+Kt.ALPHABETS.languagePrefix.english))?e.slice(1):e}function jt(e,t,n){return e=Ht(e),t?e+t:e}function qt(e,t,n){return t+Ht(e)}function Xt(e,t,n){return t+(n||"")+Ht(e)+"â »"}function Yt(e,t,n){return t+(n||"")+Ht(e)+"â »â »"}function $t(e,t,n){return t+Ht(e)+"â ¾"}const Wt=_e({numberToWords:Vt,numberToOrdinal:Vt});let Kt=null,zt=null;function Qt(e,t=!1){if(0===e)return Zt.zero;if(e>=Math.pow(10,36))return e.toString();let n=0,r="";for(;0<e;){var o,i,s=e%1e3;s&&(o=Zt.large[n],i=1<s&&1<n&&!t?"er":"",r=(1===n&&1==s?"":(1<n&&1==s?"en":function(e){let t=e%1e3,n="";return e=Math.floor(t/100),n+=Zt.ones[e]?(1===e?"":Zt.ones[e]+Zt.numSep)+"hundra":"",n=(t%=100)?(n+=n?Zt.numSep:"")+(Zt.ones[t]||Zt.tens[Math.floor(t/10)]+(t%10?Zt.numSep+Zt.ones[t%10]:"")):n}(e%1e3))+(1<n?" ":""))+(n?o+i+(1<n?" ":""):"")+r),e=Math.floor(e/1e3),n++}return r.replace(/ $/,"")}function Jt(e){let t=Qt(e,!0);return t.match(/^noll$/)?t="nollte":t.match(/ett$/)?t=t.replace(/ett$/,"fÃ¶rsta"):t.match(/tv\xe5$/)?t=t.replace(/tv\xe5$/,"andra"):t.match(/tre$/)?t=t.replace(/tre$/,"tredje"):t.match(/fyra$/)?t=t.replace(/fyra$/,"fjÃ¤rde"):t.match(/fem$/)?t=t.replace(/fem$/,"femte"):t.match(/sex$/)?t=t.replace(/sex$/,"sjÃ¤tte"):t.match(/sju$/)?t=t.replace(/sju$/,"sjunde"):t.match(/\xe5tta$/)?t=t.replace(/\xe5tta$/,"Ã¥ttonde"):t.match(/nio$/)?t=t.replace(/nio$/,"nionde"):t.match(/tio$/)?t=t.replace(/tio$/,"tionde"):t.match(/elva$/)?t=t.replace(/elva$/,"elfte"):t.match(/tolv$/)?t=t.replace(/tolv$/,"tolfte"):t.match(/tusen$/)?t=t.replace(/tusen$/,"tusonde"):t.match(/jard$/)||t.match(/jon$/)?t+="te":t+="de",t}const Zt=_e({wordOrdinal:Jt,numericOrdinal:function(e){const t=e.toString();return t.match(/11$|12$/)?t+":e":t+(t.match(/1$|2$/)?":a":":e")},numberToWords:Qt,numberToOrdinal:function(e,t){if(1===e)return"hel";if(2===e)return t?"halva":"halv";let n=Jt(e);return(n=n.match(/de$/)?n.replace(/de$/,""):n)+(t?"delar":"del")}});let en=null;const tn={af:function(){return je=je||function(){const e=we();return e.NUMBERS=He,e.COMBINERS.germanPostfix=Ve,e.FUNCTIONS.radicalNestDepth=De,e.FUNCTIONS.plural=e=>/.*s$/.test(e)?e:e+"s",e.FUNCTIONS.fontRegexp=function(e){return new RegExp("((^"+e+" )|( "+e+"$))")},e.ALPHABETS.combiner=ve.prefixCombiner,e.ALPHABETS.digitTrans.default=He.numberToWords,e.CORRECTIONS.article=e=>O.getInstance().getParameter("noArticle")?"":e,e}()},ca:function(){return Ke=Ke||function(){const e=we();return e.NUMBERS=We,e.COMBINERS.sansserif=$e,e.FUNCTIONS.fracNestDepth=e=>!1,e.FUNCTIONS.combineRootIndex=Pe,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>e+n,e.FUNCTIONS.fontRegexp=e=>RegExp("^"+e+" "),e.FUNCTIONS.plural=e=>/.*os$/.test(e)?e+"sos":/.*s$/.test(e)?e+"os":/.*ga$/.test(e)?e.slice(0,-2)+"gues":/.*\xe7a$/.test(e)?e.slice(0,-2)+"ces":/.*ca$/.test(e)?e.slice(0,-2)+"ques":/.*ja$/.test(e)?e.slice(0,-2)+"ges":/.*qua$/.test(e)?e.slice(0,-3)+"qÃ¼es":/.*a$/.test(e)?e.slice(0,-1)+"es":/.*(e|i)$/.test(e)?e+"ns":/.*\xed$/.test(e)?e.slice(0,-1)+"ins":e+"s",e.FUNCTIONS.si=(e,t)=>(e=t.match(/^metre/)?e.replace(/a$/,"Ã ").replace(/o$/,"Ã²").replace(/i$/,"Ã­"):e)+t,e.ALPHABETS.combiner=ve.prefixCombiner,e}()},da:function(){return et=et||function(){const t=we();return t.NUMBERS=Ze,t.FUNCTIONS.radicalNestDepth=De,t.FUNCTIONS.fontRegexp=e=>e===t.ALPHABETS.capPrefix.default?RegExp("^"+e+" "):RegExp(" "+e+"$"),t.ALPHABETS.combiner=ve.postfixCombiner,t.ALPHABETS.digitTrans.default=Ze.numberToWords,t}()},de:function(){return at=at||function(){const t=we();return t.NUMBERS=st,t.COMBINERS.germanPostfix=it,t.ALPHABETS.combiner=ot,t.FUNCTIONS.radicalNestDepth=e=>1<e?t.NUMBERS.numberToWords(e)+"fach":"",t.FUNCTIONS.combineRootIndex=(e,t)=>{return e.replace("Wurzel",t?t+"wurzel":"")},t.FUNCTIONS.combineNestedRadical=(e,t,n)=>{t=(t?t+" ":"")+(e=n.match(/exponent$/)?e+"r":e);return n.match(/ /)?n.replace(/ /," "+t+" "):t+" "+n},t.FUNCTIONS.fontRegexp=function(e){return e=e.split(" ").map(function(e){return e.replace(/s$/,"(|s)")}).join(" "),new RegExp("((^"+e+" )|( "+e+"$))")},t.CORRECTIONS.correctOne=e=>e.replace(/^eins$/,"ein"),t.CORRECTIONS.localFontNumber=e=>xe(e).split(" ").map(function(e){return e.replace(/s$/,"")}).join(" "),t.CORRECTIONS.lowercase=e=>e.toLowerCase(),t.CORRECTIONS.article=e=>{var t=O.getInstance().getParameter("case"),n=O.getInstance().getParameter("plural");return"dative"===t?{der:"dem",die:n?"den":"der",das:"dem"}[e]:e},t.CORRECTIONS.masculine=e=>"dative"===O.getInstance().getParameter("case")?e+"n":e,t}()},en:function(){return ht=ht||function(){const e=we();return e.NUMBERS=ut,e.FUNCTIONS.radicalNestDepth=De,e.FUNCTIONS.plural=e=>/.*s$/.test(e)?e:e+"s",e.ALPHABETS.combiner=ve.prefixCombiner,e.ALPHABETS.digitTrans.default=ut.numberToWords,e.CORRECTIONS.article=e=>O.getInstance().getParameter("noArticle")?"":e,e}()},es:function(){return mt=mt||function(){const e=we();return e.NUMBERS=ft,e.COMBINERS.sansserif=pt,e.FUNCTIONS.fracNestDepth=e=>!1,e.FUNCTIONS.combineRootIndex=Pe,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>e+n,e.FUNCTIONS.fontRegexp=e=>RegExp("^"+e+" "),e.FUNCTIONS.plural=e=>/.*(a|e|i|o|u)$/.test(e)?e+"s":/.*z$/.test(e)?e.slice(0,-1)+"ces":/.*c$/.test(e)?e.slice(0,-1)+"ques":/.*g$/.test(e)?e+"ues":/.*\u00f3n$/.test(e)?e.slice(0,-2)+"ones":e+"es",e.FUNCTIONS.si=(e,t)=>(e=t.match(/^metro/)?e.replace(/a$/,"Ã¡").replace(/o$/,"Ã³").replace(/i$/,"Ã­"):e)+t,e.ALPHABETS.combiner=ve.prefixCombiner,e}()},euro:function(){return gt=gt||we()},fr:function(){return It=It||function(){const e=we();return e.NUMBERS=Tt,e.FUNCTIONS.radicalNestDepth=De,e.FUNCTIONS.combineRootIndex=Pe,e.FUNCTIONS.combineNestedFraction=(e,t,n)=>n.replace(/ $/g,"")+t+e,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>n+" "+e,e.FUNCTIONS.fontRegexp=e=>RegExp(" (en |)"+e+"$"),e.FUNCTIONS.plural=e=>/.*s$/.test(e)?e:e+"s",e.CORRECTIONS.article=e=>O.getInstance().getParameter("noArticle")?"":e,e.ALPHABETS.combiner=ve.romanceCombiner,e.SUBISO={default:"fr",current:"fr",all:["fr","be","ch"]},e}()},hi:function(){return Ot=Ot||function(){const e=we();return e.NUMBERS=Rt,e.ALPHABETS.combiner=ve.prefixCombiner,e.FUNCTIONS.radicalNestDepth=De,e}()},it:function(){return xt=xt||function(){const e=we();return e.NUMBERS=Pt,e.COMBINERS.italianPostfix=Dt,e.FUNCTIONS.radicalNestDepth=De,e.FUNCTIONS.combineRootIndex=Pe,e.FUNCTIONS.combineNestedFraction=(e,t,n)=>n.replace(/ $/g,"")+t+e,e.FUNCTIONS.combineNestedRadical=(e,t,n)=>n+" "+e,e.FUNCTIONS.fontRegexp=e=>RegExp(" (en |)"+e+"$"),e.ALPHABETS.combiner=ve.romanceCombiner,e}()},ko:function(){return Mt=Mt||function(){const e=we();return e.NUMBERS=Lt,e.FUNCTIONS.radicalNestDepth=De,e.FUNCTIONS.plural=function(e){return e},e.FUNCTIONS.si=(e,t)=>e+t,e.FUNCTIONS.combineRootIndex=function(e,t){return e+t},e.ALPHABETS.combiner=ve.prefixCombiner,e.ALPHABETS.digitTrans.default=Lt.numberToWords,e.CORRECTIONS.postposition=e=>{if(["ê°™ë‹¤","ëŠ”","ì™€","ë¥¼","ë¡œ"].includes(e))return e;const t=e.slice(-1);let n=0<(t.charCodeAt(0)-44032)%28;return t.match(/[r,l,n,m,1,3,6,7,8,0]/i)&&(n=!0),O.getInstance().setParameter("final",n),e},e.CORRECTIONS.article=e=>{var t=O.getInstance().getParameter("final"),n=(t&&O.getInstance().setParameter("final",!1),{"ëŠ”":"ì€","ì™€":"ê³¼","ë¥¼":"ì„","ë¡œ":"ìœ¼ë¡œ"}[e="ê°™ë‹¤"===e?"ëŠ”":e]);return void 0!==n&&t?n:e},e}()},nb:function(){return Gt=Gt||function(){const e=we();return e.NUMBERS=s,e.ALPHABETS.combiner=ve.prefixCombiner,e.ALPHABETS.digitTrans.default=s.numberToWords,e.FUNCTIONS.radicalNestDepth=De,e}()},nn:function(){return zt=zt||function(){const e=we();return e.NUMBERS=s,e.ALPHABETS.combiner=ve.prefixCombiner,e.ALPHABETS.digitTrans.default=s.numberToWords,e.FUNCTIONS.radicalNestDepth=De,e.SUBISO={default:"",current:"",all:["","alt"]},e}()},sv:function(){return en=en||function(){const e=we();return e.NUMBERS=Zt,e.FUNCTIONS.radicalNestDepth=De,e.FUNCTIONS.fontRegexp=function(e){return new RegExp("((^"+e+" )|( "+e+"$))")},e.ALPHABETS.combiner=ve.prefixCombiner,e.ALPHABETS.digitTrans.default=Zt.numberToWords,e.CORRECTIONS.correctOne=e=>e.replace(/^ett$/,"en"),e}()},nemeth:function(){return Kt=Kt||function(){const e=we();return e.NUMBERS=Wt,e.COMBINERS={postfixCombiner:jt,germanCombiner:qt,embellishCombiner:Xt,doubleEmbellishCombiner:Yt,parensCombiner:$t},e.FUNCTIONS.fracNestDepth=e=>!1,e.FUNCTIONS.fontRegexp=e=>RegExp("^"+e),e.FUNCTIONS.si=Ce,e.ALPHABETS.combiner=(e,t,n)=>t?t+n+e:Ht(e),e.ALPHABETS.digitTrans={default:Wt.numberToWords},e}()}};function nn(){e=z.u.ensureLocale(m.getInstance().options.locale,m.getInstance().defaultLocale),m.getInstance().options.locale=e;var e,t,n=tn[e]();if(e=n,t=m.getInstance().options.subiso,-1===e.SUBISO.all.indexOf(t)&&(m.getInstance().options.subiso=e.SUBISO.default),e.SUBISO.current=m.getInstance().options.subiso,n){for(const i of Object.getOwnPropertyNames(n))N[i]=n[i];for(var[r,o]of Object.entries(n.CORRECTIONS))O.getInstance().setCorrection(r,o)}}const rn={functionApplication:String.fromCodePoint(8289),invisibleTimes:String.fromCodePoint(8290),invisibleComma:String.fromCodePoint(8291),invisiblePlus:String.fromCodePoint(8292)};class on extends Map{get(e){return super.get(e)||{role:h.UNKNOWN,type:E.UNKNOWN,font:d.UNKNOWN}}}class sn extends Map{set(e,t,n=""){return super.set(this.secKey(t,e),n||t),this}has(e,t){return super.has(this.secKey(t,e))}get(e,t){return super.get(this.secKey(t,e))}secKey(e,t){return t?e+" "+t:""+e}}const S={Meaning:new on,Secondary:new sn,FencesHoriz:new Map,FencesVert:new Map,LatexCommands:new Map};function an(e,t){for(const n of e)S.Meaning.set(n,{role:t.role||h.UNKNOWN,type:t.type||E.UNKNOWN,font:t.font||d.UNKNOWN}),t.secondary&&S.Secondary.set(n,t.secondary)}function cn(e,n,t=1){const r={},o=function(){let e=[];for(const t of n)Array.isArray(t)?e=e.concat(Se(t,{}).map(e=>parseInt(e,16))):e.push(parseInt(t,16));return e}();for(const n of o)r[n]||(e.set(String.fromCodePoint(n),String.fromCodePoint(n+t)),r[n]=!0,r[n+t]=!0)}var p,ln,un,hn,o,dn,i,a,pn,fn,n=["cos","cot","csc","sec","sin","tan","arccos","arccot","arccsc","arcsec","arcsin","arctan"].concat(["cosh","coth","csch","sech","sinh","tanh","arcosh","arcoth","arcsch","arsech","arsinh","artanh"],["deg","det","dim","hom","ker","Tr"],["log","ln","lg","exp","gcd","lcm","arg","im","re","Pr"]);function mn(e,n,r,t,o,i=[],s={},a={}){const c=Ae.get(be(e,t));if(c){c.unicode.forEach(t=>{S.Meaning.set(t,{type:n,role:r,font:o}),i.forEach(e=>S.Secondary.set(t,e))});var l,u,h=c.unicode,d=s;for([l,u]of Object.entries(d)){const d=h[l];void 0!==d&&S.Meaning.set(d,u)}var p,f,m=c.unicode,g=a;for([p,f]of Object.entries(g)){const g=m[p];void 0!==g&&S.Secondary.set(g,f)}}}[{set:["23","26","40","5c","a1","a7","b6","bf","2017",["2022","2025"],"2027","203b","203c",["2041","2043"],["2047","2049"],["204b","204d"],"2050","2055","2056",["2058","205e"],"2234","2235","fe45","fe46","fe5f","fe60","fe68","fe6b","ff03","ff06","ff0f","ff20","ff3c"],type:E.PUNCTUATION,role:h.UNKNOWN},{set:["22","ab","bb","2dd",["2018","201f"],"2039","203a",["301d","301f"],"fe10","ff02","ff07"],type:E.PUNCTUATION,role:h.QUOTES},{set:["3b","204f","2a1f","2a3e","fe14","fe54","ff1b"],type:E.PUNCTUATION,role:h.SEMICOLON},{set:["3f","203d","fe16","fe56","ff1f"],type:E.PUNCTUATION,role:h.QUESTION},{set:["21","fe15","fe57","ff01"],type:E.PUNCTUATION,role:h.EXCLAMATION},{set:["5e","60","a8","aa","b4","ba","2c7",["2d8","2da"],"2040","207a","207d","207e","ff3e","ff40"],type:E.PUNCTUATION,role:h.OVERACCENT},{set:["b8","2db","2038","203f","2054","208a","208d","208e"],type:E.PUNCTUATION,role:h.UNDERACCENT},{set:["3a","2982","fe13","fe30","fe55","ff1a"],type:E.PUNCTUATION,role:h.COLON},{set:["2c","2063","fe50","ff0c"],type:E.PUNCTUATION,role:h.COMMA},{set:["2026",["22ee","22f1"],"fe19"],type:E.PUNCTUATION,role:h.ELLIPSIS},{set:["2e","fe52","ff0e"],type:E.PUNCTUATION,role:h.FULLSTOP},{set:["2d","207b","208b","2212","2796","fe63","ff0d"],type:E.OPERATOR,role:h.DASH,secondary:Re.BAR},{set:["5f","af",["2010","2015"],"203e","208b",["fe49","fe4f"],"fe58","ff3f","ffe3"],type:E.PUNCTUATION,role:h.DASH,secondary:Re.BAR},{set:["7e","2dc","2f7","303","330","334","2053","223c","223d","301c","ff5e"],type:E.OPERATOR,role:h.TILDE,secondary:Re.TILDE},{set:["27","2b9","2ba",["2032","2037"],"2057"],type:E.PUNCTUATION,role:h.PRIME},{set:["b0"],type:E.PUNCTUATION,role:h.DEGREE},{set:["2b","b1","2064","2213","2214","2228","222a",["228c","228e"],"2294","2295","229d","229e","22bb","22bd","22c4","22ce","22d3","2304","271b","271c","2795","27cf","29fa","29fb","29fe",["2a22","2a28"],"2a2d","2a2e","2a39","2a42","2a45","2a46","2a48","2a4a","2a4c","2a4f","2a50","2a52","2a54","2a56","2a57","2a59","2a5b","2a5d",["2a61","2a63"],"2adc","2add","fe62","ff0b"],type:E.OPERATOR,role:h.ADDITION},{set:["2a","b7","d7","2020","2021","204e","2051","2062",["2217","2219"],"2227","2229","2240","2293","2297",["2299","229b"],"22a0","22a1","22b9","22bc",["22c5","22cc"],"22cf","22d2","22d4","2303","2305","2306","25cb","2715","2716","27ce","27d1",["29d1","29d7"],"29e2","2a1d",["2a2f","2a37"],["2a3b","2a3d"],"2a40","2a43","2a44","2a47","2a49","2a4b","2a4d","2a4e","2a51","2a53","2a55","2a58","2a5a","2a5c",["2a5e","2a60"],"2ada","2adb","fe61","ff0a"],type:E.OPERATOR,role:h.MULTIPLICATION},{set:["2d","af","2010","2011","2052","207b","208b","2212","2216","2238","2242","2296","229f","2796","29ff",["2a29","2a2c"],"2a3a","2a41","fe63","ff0d"],type:E.OPERATOR,role:h.SUBTRACTION},{set:["2f","f7","2044","2215","2298","2797","27cc","29bc",["29f5","29f9"],"2a38"],type:E.OPERATOR,role:h.DIVISION},{set:["25","2030","2031","ff05","fe6a"],type:E.OPERATOR,role:h.POSTFIXOP},{set:["ac","2200","2201","2203","2204","2206",["221a","221c"],"2310","ffe2"],type:E.OPERATOR,role:h.PREFIXOP},{set:["2320","2321","23aa","23ae","23af","23b2","23b3","23b6","23b7"],type:E.OPERATOR,role:h.PREFIXOP},{set:["1d7ca","1d7cb"],type:E.OPERATOR,role:h.PREFIXOP,font:d.BOLD},{set:["3d","7e","207c","208c","221d","2237",["223a","223f"],"2243","2245","2248",["224a","224e"],["2251","225f"],"2261","2263","229c","22cd","22d5","29e4","29e6","2a66","2a67",["2a6a","2a6c"],["2a6c","2a78"],"fe66","ff1d"],type:E.RELATION,role:h.EQUALITY},{set:["3c","3e","2241","2242","2244","2246","2247","2249","224f","2250","2260","2262",["2264","2281"],"22b0","22b1",["22d6","22e1"],["22e6","22e9"],["2976","2978"],"29c0","29c1","29e1","29e3","29e5",["2a79","2abc"],["2af7","2afa"],"fe64","fe65","ff1c","ff1e"],type:E.RELATION,role:h.INEQUALITY},{set:[["2282","228b"],["228f","2292"],["22b2","22b8"],"22d0","22d1",["22e2","22e5"],["22ea","22ed"],"27c3","27c4",["27c7","27c9"],["27d5","27d7"],"27dc",["2979","297b"],"29df",["2abd","2ad8"]],type:E.RELATION,role:h.SET},{set:["2236",["27e0","27e5"],"292b","292c",["29b5","29bb"],"29be","29bf",["29c2","29d0"]],type:E.RELATION,role:h.UNKNOWN},{set:["2205",["29b0","29b4"]],type:E.IDENTIFIER,role:h.SETEMPTY},{set:["1ab2","221e",["29dc","29de"]],type:E.IDENTIFIER,role:h.INFTY},{set:["22a2","22a3",["22a6","22af"],"27da","27db","27dd","27de","2ade",["2ae2","2ae6"],"2aec","2aed"],type:E.RELATION,role:h.LOGIC},{set:["22a4","22a5","22ba","27d8","27d9","27df","2adf","2ae0",["2ae7","2aeb"],"2af1"],type:E.IDENTIFIER,role:h.LOGIC},{set:[["2190","21ff"],"2301","2324","238b","2794",["2798","27af"],["27b1","27be"],["27f0","27ff"],["2900","292a"],["292d","2975"],["297c","297f"],["2b00","2b11"],["2b30","2b4c"],["ffe9","ffec"]],type:E.RELATION,role:h.ARROW},{set:["2208","220a",["22f2","22f9"],"22ff","27d2","2ad9"],type:E.OPERATOR,role:h.ELEMENT},{set:["2209"],type:E.OPERATOR,role:h.NONELEMENT},{set:["220b","220d",["22fa","22fe"]],type:E.OPERATOR,role:h.REELEMENT},{set:["220c"],type:E.OPERATOR,role:h.RENONELEMENT},{set:[["220f","2211"],["22c0","22c3"],["2a00","2a0b"],"2a3f","2afc","2aff"],type:E.LARGEOP,role:h.SUM},{set:["2140"],type:E.LARGEOP,role:h.SUM,font:d.DOUBLESTRUCK},{set:[["222b","2233"],["2a0c","2a17"],["2a17","2a1c"]],type:E.LARGEOP,role:h.INTEGRAL},{set:[["2500","257F"]],type:E.RELATION,role:h.BOX},{set:[["2580","259F"]],type:E.IDENTIFIER,role:h.BLOCK},{set:[["25A0","25FF"],["2B12","2B2F"],["2B50","2B59"]],type:E.RELATION,role:h.GEOMETRY},{set:["220e","2300","2302","2311","29bd","29e0",["29e8","29f3"],"2a1e","2afe","ffed","ffee"],type:E.OPERATOR,role:h.GEOMETRY},{set:[["221f","2222"],"22be","22bf",["2312","2314"],"237c","27c0",["299b","29af"]],type:E.OPERATOR,role:h.GEOMETRY},{set:["24",["a2","a5"],"b5","2123",["2125","2127"],"212a","212b","fe69","ff04","ffe0","ffe1","ffe5","ffe6"],type:E.IDENTIFIER,role:h.UNKNOWN},{set:["a9","ae","210f","2114","2116","2117",["211e","2122"],"212e","2132",["2139","213b"],["2141","2144"],"214d","214e",["1f12a","1f12c"],"1f18a"],type:E.IDENTIFIER,role:h.OTHERLETTER},{set:["2224","2226","2239","2307","27b0","27bf","27c1","27c2","27ca","27cb","27cd","27d0","27d3","27d4","2981","2999","299a","29e7","29f4","2a20","2a21","2a64","2a65","2a68","2a69","2ae1",["2aee","2af0"],"2af2","2af3","2af5","2af6","2afb","2afd"],type:E.OPERATOR,role:h.UNKNOWN},{set:["2605","2606","26aa","26ab",["2720","274d"]],type:E.OPERATOR,role:h.UNKNOWN},{set:[["2145","2149"]],type:E.IDENTIFIER,role:h.LATINLETTER,font:d.DOUBLESTRUCKITALIC,secondary:Re.ALLLETTERS},{set:[["213c","213f"]],type:E.IDENTIFIER,role:h.GREEKLETTER,font:d.DOUBLESTRUCK,secondary:Re.ALLLETTERS},{set:["3d0","3d7","3f6",["1d26","1d2a"],"1d5e","1d60",["1d66","1d6a"]],type:E.IDENTIFIER,role:h.GREEKLETTER,font:d.NORMAL,secondary:Re.ALLLETTERS},{set:[["2135","2138"]],type:E.IDENTIFIER,role:h.OTHERLETTER,font:d.NORMAL,secondary:Re.ALLLETTERS},{set:["131","237"],type:E.IDENTIFIER,role:h.LATINLETTER,font:d.NORMAL},{set:["1d6a4","1d6a5"],type:E.IDENTIFIER,role:h.LATINLETTER,font:d.ITALIC},{set:["2113","2118"],type:E.IDENTIFIER,role:h.LATINLETTER,font:d.SCRIPT},{set:[["c0","d6"],["d8","f6"],["f8","1bf"],["1c4","2af"],["1d00","1d25"],["1d6b","1d9a"],["1e00","1ef9"],["363","36f"],["1dd3","1de6"],["1d62","1d65"],"1dca","2071","207f",["2090","209c"],"2c7c"],type:E.IDENTIFIER,role:h.LATINLETTER,font:d.NORMAL},{set:[["00bc","00be"],["2150","215f"],"2189"],type:E.NUMBER,role:h.FLOAT},{set:["23E8",["3248","324f"]],type:E.NUMBER,role:h.INTEGER},{set:[["214A","214C"],"2705","2713","2714","2717","2718"],type:E.IDENTIFIER,role:h.UNKNOWN},{set:["20","a0","ad",["2000","200f"],["2028","202f"],["205f","2060"],"206a","206b","206e","206f","feff",["fff9","fffb"]],type:E.TEXT,role:h.SPACE},{set:["7c","a6","2223","23b8","23b9","23d0","2758",["fe31","fe34"],"ff5c","ffe4","ffe8"],type:E.FENCE,role:h.NEUTRAL},{set:["2016","2225","2980","2af4"],type:E.FENCE,role:h.METRIC}].forEach(e=>{var n=e["set"],e=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(e,["set"]);return an(function(){let e=[];for(const t of n)Array.isArray(t)?e=e.concat(Te(t)):e.push(String.fromCodePoint(parseInt(t,16)));return e}(),e)}),cn(S.FencesVert,["23b4",["23dc","23e1"],["fe35","fe44"],"fe47"]),cn(S.FencesHoriz,["28","2045","207D","208D",["2308","230f"],["231c","231f"],"2329","23b0",["2768","2775"],"27c5",["27e6","27ef"],["2983","2998"],["29d8","29db"],"29fc",["2e22","2e29"],["3008","3011"],["3014","301b"],"fd3e","fe17",["fe59","fe5e"],"ff08","ff5f","ff62"]),cn(S.FencesHoriz,["5b","7b","ff3b","ff5b"],2),cn(S.FencesHoriz,[["239b","23a6"]],3),cn(S.FencesHoriz,[["23a7","23a9"]],4),an([...S.FencesHoriz.keys()],{type:E.FENCE,role:h.OPEN}),an([...S.FencesHoriz.values()],{type:E.FENCE,role:h.CLOSE}),an([...S.FencesVert.keys()],{type:E.FENCE,role:h.TOP}),an([...S.FencesVert.values()],{type:E.FENCE,role:h.BOTTOM});for([pn,fn]of Object.entries(d)){pn=e[pn]?d.UNKNOWN:fn===d.FULLWIDTH?d.NORMAL:fn;mn(r.LATINCAP,E.IDENTIFIER,h.LATINLETTER,fn,pn,[Re.ALLLETTERS]),mn(r.LATINSMALL,E.IDENTIFIER,h.LATINLETTER,fn,pn,[Re.ALLLETTERS],{},{3:Re.D}),mn(r.GREEKCAP,E.IDENTIFIER,h.GREEKLETTER,fn,pn,[Re.ALLLETTERS]),mn(r.GREEKSMALL,E.IDENTIFIER,h.GREEKLETTER,fn,pn,[Re.ALLLETTERS],{0:{type:E.OPERATOR,role:h.PREFIXOP,font:pn},26:{type:E.OPERATOR,role:h.PREFIXOP,font:pn}}),mn(r.DIGIT,E.NUMBER,h.INTEGER,fn,pn)}an(["inf","lim","liminf","limsup","max","min","sup","injlim","projlim"],{type:E.FUNCTION,role:h.LIMFUNC}),an(n,{type:E.FUNCTION,role:h.PREFIXFUNC}),an(["mod","rem"],{type:E.OPERATOR,role:h.PREFIXFUNC});class gn{constructor(){this.rules=new Map}static parseUnicode(e){e=parseInt(e,16);return String.fromCodePoint(e)}static testDynamicConstraints_(e,t){return m.getInstance().options.strict?t.cstr.equal(e):m.getInstance().comparator.match(t.cstr)}defineRulesFromMappings(e,t,n){for(var[r,o]of Object.entries(n))for(const[n,i]of Object.entries(o))this.defineRuleFromStrings(e,t,r,n,i)}getRules(e){let t=this.rules.get(e);return t||(t=[],this.rules.set(e,t)),t}defineRuleFromStrings(e,t,n,r,o){let i=this.getRules(e);const s=m.getInstance().parsers[n]||m.getInstance().defaultParser,a=m.getInstance().comparators[n],c=e+`.${t}.${n}.`+r,l=s.parse(c),u=a?a():m.getInstance().comparator,h=u.getReference();u.setReference(l);t={cstr:l,action:o};(i=i.filter(e=>!l.equal(e.cstr))).push(t),this.rules.set(e,i),u.setReference(h)}lookupRule(e,t){let n=this.getRules(t.getValue(c.LOCALE));return 1===(n=n.filter(function(e){return gn.testDynamicConstraints_(t,e)})).length?n[0]:n.length?n.sort((e,t)=>m.getInstance().comparator.compare(e.cstr,t.cstr))[0]:null}}let En=l.DEFAULT_VALUES[c.LOCALE],Nn=l.DEFAULT_VALUES[c.MODALITY];function Sn(e){return(e.locale||e.modality)&&(En=e.locale||En,Nn=e.modality||Nn,1)}let Tn={};function In(e){Tn=e}const An=new Map,bn=new Map;function Rn(e,t){let n=An.get(t);return n||((n=new gn).base=bn.get(e),An.set(t,n),n)}function On(e){var t,n=bn.get(e.key);n&&(t=e.names,Object.assign(e,n),t&&n.names&&(e.names=e.names.concat(t)))}function Cn(e,t,n){Rn(e,t).defineRulesFromMappings(En,Nn,n)}function yn(e,t,n,r){Rn(n,n).defineRuleFromStrings(En,Nn,e,t,r)}function vn(e){if(!Sn(e))for(var[t,n]of Object.entries(e))yn("default","default",t,n)}function Ln(n){for(let e,t=0;e=n.names[t];t++)Cn(n.key,e,n.mappings)}function Mn(e){e=An.get(e);return null!=e&&e.base?e.base.category:""}m.getInstance().evaluator=function(e,t){e=function(e,t){const n=An.get(e);return n?n.lookupRule(null,t):null}(e,t);return e?e.action:null};class T{constructor(e,t){this.speech=e,this.attributes=t}static empty(){return new T("",{})}static stringEmpty(e){return new T(e,{})}static stringAttr(e,t){return new T(e,t)}static singleton(e,t={}){return[T.stringAttr(e,t)]}static node(e,t,n={}){t=T.getAttributes(t);return Object.assign(t,n),new T(e,t)}static getAttributes(e){const t={};for(const n of T.attributeList)e.hasAttribute(n)&&(t[n]=e.getAttribute(n));return t}}T.attributeList=["id","extid"];class _n{constructor(e=null){this.data=e,this.prev=null,this.next=null}}class wn extends Set{constructor(e){super(),this.annotations=[],this.anchor=new _n,this.anchor.next=this.anchor,this.anchor.prev=this.anchor,e.forEach(e=>{var t=new _n(e);e.annotation&&this.annotations.push(t),this.push(t)})}first(){return this.empty?null:this.anchor.next}last(){return this.empty?null:this.anchor.prev}push(e){e.next=this.anchor,e.prev=this.anchor.prev,e.prev.next=e,this.anchor.prev=e,super.add(e)}pop(){var e=this.last();return e?(this.delete(e),e):null}delete(e){return!!this.has(e)&&(super.delete(e),e.prev.next=e.next,e.next=e.prev,!0)}insertAfter(e,t){this.insertBefore(e,t.next)}insertBefore(e,t){const n=new _n(e);t&&this.has(t)?((t.prev.next=n).prev=t.prev,(n.next=t).prev=n):this.push(n)}prevText(e){for(;(e=e.prev)!==this.anchor&&!e.data.text;);return e===this.anchor?null:e}*[Symbol.iterator](){let e=this.anchor.next;for(;e!==this.anchor;)yield e,e=e.next}nextText(e){for(;e!==this.anchor&&!e.data.text;)e=e.next;return e}clear(){this.anchor.next=this.anchor,this.anchor.prev=this.anchor,super.clear()}empty(){return this.anchor.prev===this.anchor&&this.anchor===this.anchor.next}toList(){const e=[];let t=this.anchor.next;for(;t!==this.anchor;)e.push(t.data),t=t.next;return e}}class I{static create(e,t={}){return e.text=O.getInstance().apply(e.text,t),new I(e)}constructor({context:e,text:t,userValue:n,annotation:r,attributes:o,personality:i,layout:s}){this.context=e||"",this.text=t||"",this.userValue=n||"",this.annotation=r||"",this.attributes=o||{},this.personality=i||{},this.layout=s||""}isEmpty(){return 0===this.context.length&&0===this.text.length&&0===this.userValue.length&&0===this.annotation.length}clone(){let e,t;if(this.personality){e={};for(const[t,n]of Object.entries(this.personality))e[t]=n}if(this.attributes){t={};for(const[e,r]of Object.entries(this.attributes))t[e]=r}return new I({context:this.context,text:this.text,userValue:this.userValue,annotation:this.annotation,personality:e,attributes:t,layout:this.layout})}toString(){return'AuditoryDescription(context="'+this.context+'"  text="'+this.text+'"  userValue="'+this.userValue+'"  annotation="'+this.annotation+'")'}descriptionString(){return this.context&&this.text?this.context+" "+this.text:this.context||this.text}descriptionSpan(){return T.stringAttr(this.descriptionString(),this.attributes)}equals(e){return this.context===e.context&&this.text===e.text&&this.userValue===e.userValue&&this.annotation===e.annotation}}const Dn=new Map;function Pn(e,t,n){var r={};if(t){const e=Dn.get(t)||{};Object.assign(r,e)}Dn.set(e,Object.assign(r,n))}function xn(e,t){const n=e.length;let r=0,o=t?t:"";return function(){return r<n&&(r+=1),o+" "+r}}function Un(e,t){const n=parseFloat(t),r=isNaN(n)?t:n;return function(){return[I.create({text:"",personality:{pause:r}})]}}function Fn(e,r){let o;return o=0<e.length?b("../../content/*",e[0]):[],function(){const e=o.shift(),t=r?[I.create({text:r},{translate:!0})]:[];if(!e)return t;var n=m.evaluateNode(e);return t.concat(n)}}function kn(e,t){const n=t.split("-"),r=xn(e,n[0]||""),o=n[1]||"",i=n[2]||"";let s=!0;return function(){var e=r();return s?(s=!1,i+e+o):e+o}}function Bn(e){if(function(e){if(e.hasAttribute("annotation"))return e=e.getAttribute("annotation"),/clearspeak:simple$|clearspeak:simple;/.exec(e)}(e))return!0;if(e.tagName!==E.SUBSCRIPT)return!1;const t=e.childNodes[0].childNodes,n=t[1];return t[0].tagName===E.IDENTIFIER&&(Gn(n)||n.tagName===E.INFIXOP&&n.hasAttribute("role")&&n.getAttribute("role")===h.IMPLICIT&&function(){const e=b("children/*",n);return e.every(e=>Gn(e)||e.tagName===E.IDENTIFIER)}())}function Gn(e){return e.tagName===E.NUMBER&&e.hasAttribute("role")&&e.getAttribute("role")===h.INTEGER}function Vn(e){return b(e.tagName===E.MATRIX?"children/row/children/cell/children/*":"children/line/children/*",e).every(Bn)?[e]:[]}function Hn(e){return Me(e,20,11)?[e]:[]}function jn(e){var t=parseInt(e.textContent,10);return[T.stringEmpty(isNaN(t)?e.textContent:10<t?N.NUMBERS.numericOrdinal(t):N.NUMBERS.wordOrdinal(t))]}let qn=null;function Xn(e){let t=0;var n=e.textContent,r="open"===e.getAttribute("role")?0:1;let o=e.parentNode;for(;o;)o.tagName===E.FENCED&&o.childNodes[0].childNodes[r].textContent===n&&t++,o=o.parentNode;return qn=1<t?N.NUMBERS.wordOrdinal(t):"",[T.stringEmpty(qn)]}function Yn(e){var t,n,r=e.previousSibling;let o,i;return(i=r?(o=r,e):(o=e).nextSibling)&&(r=o.textContent,t=i.textContent,(n=S.Meaning.get(r)).type===E.FENCE&&(n.role===h.NEUTRAL||n.role===h.METRIC?r===t:S.FencesHoriz.get(r)===t||S.FencesVert.get(r)===t))?[e]:[]}function $n(e){const t=g(e.parentNode.childNodes),n=b("../../children/*",e),r=t.indexOf(e);return zn(n[r])||zn(n[r+1])?[e]:[]}function Wn(e){const t=g(e.parentNode.childNodes),n=b("../../children/*",e),r=t.indexOf(e);return Kn(n[r])&&n[r+1]&&(Kn(n[r+1])||n[r+1].tagName===E.ROOT||n[r+1].tagName===E.SQRT||n[r+1].tagName===E.SUPERSCRIPT&&n[r+1].childNodes[0].childNodes[0]&&(n[r+1].childNodes[0].childNodes[0].tagName===E.NUMBER||n[r+1].childNodes[0].childNodes[0].tagName===E.IDENTIFIER)&&("2"===n[r+1].childNodes[0].childNodes[1].textContent||"3"===n[r+1].childNodes[0].childNodes[1].textContent))?[e]:[]}function Kn(e){return e&&(e.tagName===E.NUMBER||e.tagName===E.IDENTIFIER||e.tagName===E.FUNCTION||e.tagName===E.APPL||e.tagName===E.FRACTION)}function zn(e){return e&&(e.tagName===E.FENCED||e.hasAttribute("role")&&e.getAttribute("role")===h.LEFTRIGHT||(e=e)&&(e.tagName===E.MATRIX||e.tagName===E.VECTOR))}function Qn(e){return[T.stringEmpty(N.NUMBERS.wordOrdinal(parseInt(e.textContent,10)))]}function Jn(e){return Mn(e.textContent+":unit")?[e]:[]}function Zn(e,t){const n=[];for(;e.length||t.length;)e.length&&n.push(e.shift()),t.length&&n.push(t.shift());return n}function er(e,t){return e?t?e.filter(e=>t.indexOf(e)<0):e:[]}O.getInstance().setCorrection("insertNesting",function(e,t){if(!t||!e)return e;var n=e.match(/^(open|close) /);return n?n[0]+t+" "+e.substring(n[0].length):t+" "+e});const A={factory:null,options:new Q,updateFactory:function(e){A.factory=e},heuristics:new Map,flags:{combine_juxtaposition:!0,convert_juxtaposition:!0,multioperator:!0},blacklist:{},add:function(e){var t=e.name;A.heuristics.set(t,e),A.flags[t]||(A.flags[t]=!1)},run:function(e,t,n){const r=A.heuristics.get(e);return r&&!A.blacklist[e]&&(A.flags[e]||r.applicable(t))?r.apply(t):n?n(t):t}},tr=[];function nr(n,r){for(let e,t=0;e=tr[t];t++){var o=e.compare(n,r);if(0!==o)return o}return 0}function rr(e,t){return e.match(/^.+:.+$/)||!t?e:e+":"+t}new class{constructor(e,t=null){this.comparator=e,this.type=t,e=this,tr.push(e)}compare(e,t){return this.type&&this.type===e.type&&this.type===t.type?this.comparator(e,t):0}}(function(e,t){return e.role===h.SIMPLEFUNC?1:t.role===h.SIMPLEFUNC?-1:0},E.IDENTIFIER);class or extends Map{set(e,t){return super.set(rr(e,t.font),t),this}setNode(e){this.set(e.textContent,e.meaning())}get(e,t=null){return super.get(rr(e,t))}getNode(e){return this.get(e.textContent,e.font)}}class ir extends Map{add(e,t){const n=this.get(e);n?n.push(t):super.set(e,[t])}get(e,t=null){return super.get(rr(e,t))}getNode(e){return this.get(e.textContent,e.font)}minimize(){for(var[e,t]of this)1===t.length&&this.delete(e)}isMultiValued(){for(const e of this.values())if(1<e.length)return!0;return!1}}class sr extends ir{add(e,t){super.add(rr(e,t.font),t)}addNode(e){this.add(e.textContent,e)}toString(){const e=[];for(var[t,n]of this){var r=Array(t.length+3).join(" "),n=n.map(e=>e.toString()).join("\n"+r);e.push(t+": "+n)}return e.join("\n")}collateMeaning(){const e=new ar;for(var[t,n]of this)e.set(t,n.map(e=>e.meaning()));return e}}class ar extends ir{add(e,t){const n=this.get(e,t.font);n&&n.find(function(e){return e.type===t.type&&e.role===t.role&&e.font===t.font})||super.add(rr(e,t.font),t)}addNode(e){this.add(e.textContent,e.meaning())}toString(){const e=[];for(var[t,n]of this){var r=Array(t.length+3).join(" "),n=n.map(e=>`{type: ${e.type}, role: ${e.role}, font: ${e.font}}`).join("\n"+r);e.push(t+": "+n)}return e.join("\n")}reduce(){for(var[e,t]of this)1!==t.length&&this.set(e,function(e){if(e.length<=1)return e;const t=e.slice(),n=(t.sort(nr),[]);for(var r;r=t.pop(),n.push(r),r&&t.length&&0===nr(t[t.length-1],r););return n}(t))}default(){const e=new or;for(var[t,n]of this)1===n.length&&e.set(t,n[0]);return e}newDefault(){var e=this.default(),t=(this.reduce(),this.default());return e.size!==t.size?t:null}}(_=p=p||{}).ANNOTATION="ANNOTATION",_.ANNOTATIONXML="ANNOTATION-XML",_.MACTION="MACTION",_.MALIGNGROUP="MALIGNGROUP",_.MALIGNMARK="MALIGNMARK",_.MATH="MATH",_.MENCLOSE="MENCLOSE",_.MERROR="MERROR",_.MFENCED="MFENCED",_.MFRAC="MFRAC",_.MGLYPH="MGLYPH",_.MI="MI",_.MLABELEDTR="MLABELEDTR",_.MMULTISCRIPTS="MMULTISCRIPTS",_.MN="MN",_.MO="MO",_.MOVER="MOVER",_.MPADDED="MPADDED",_.MPHANTOM="MPHANTOM",_.MPRESCRIPTS="MPRESCRIPTS",_.MROOT="MROOT",_.MROW="MROW",_.MS="MS",_.MSPACE="MSPACE",_.MSQRT="MSQRT",_.MSTYLE="MSTYLE",_.MSUB="MSUB",_.MSUBSUP="MSUBSUP",_.MSUP="MSUP",_.MTABLE="MTABLE",_.MTD="MTD",_.MTEXT="MTEXT",_.MTR="MTR",_.MUNDER="MUNDER",_.MUNDEROVER="MUNDEROVER",_.NONE="NONE",_.SEMANTICS="SEMANTICS";const cr=Object.values(p),lr=[p.MO,p.MI,p.MN,p.MTEXT,p.MS,p.MSPACE],ur=[p.MERROR,p.MPHANTOM,p.MALIGNGROUP,p.MALIGNMARK,p.MPRESCRIPTS,p.ANNOTATION,p.ANNOTATIONXML],hr=[p.MATH,p.MROW,p.MPADDED,p.MACTION,p.NONE,p.MSTYLE,p.SEMANTICS],dr=[p.MROOT,p.MSQRT],pr=["aria-label","exact-speech","alt"];function fr(e){return e&&R(e)===p.MATH}function mr(e){return e&&(ur.includes(R(e))||!cr.includes(R(e)))}function gr(e){return e&&hr.includes(R(e))}function Er(n){const r=[];for(let e,t=0;e=n[t];t++)if(e.nodeType===K.ELEMENT_NODE){const n=R(e);ur.includes(n)||hr.includes(n)&&0===e.childNodes.length||r.push(e)}return r}function Nr(t,e){var n;if(null!=(n=e.attributes)&&n.length){const n=e.attributes;for(let e=n.length-1;0<=e;e--){const r=n[e].name;r.match(/^ext/)&&(t.attributes[r]=n[e].value,t.nobreaking=!0),pr.includes(r)&&(t.attributes["ext-speech"]=n[e].value,t.nobreaking=!0),r.match(/texclass$/)&&(t.attributes.texclass=n[e].value),"data-latex"===r.toLowerCase()&&(t.attributes.latex=n[e].value),"href"===r&&(t.attributes.href=n[e].value,t.nobreaking=!0)}}}function Sr(e){return e&&e.embellished&&0<e.childNodes.length?Sr(e.childNodes[0]):e}function Tr(n,r,o){o&&n.reverse();const i=[];for(let e,t=0;e=n[t];t++){if(r(e))return o?{head:n.slice(t+1).reverse(),div:e,tail:i.reverse()}:{head:i,div:e,tail:n.slice(t+1)};i.push(e)}return o?{head:[],div:null,tail:i.reverse()}:{head:i,div:null,tail:[]}}function Ir(e,t){let n=e;const r=[],o=[];for(var i;i=Tr(n,t),o.push(i.head),r.push(i.div),n=i.tail,i.div;);return r.pop(),{rel:r,comp:o}}(t=ln=ln||{}).EMBELLISHED="embellished",t.FENCEPOINTER="fencepointer",t.FONT="font",t.ID="id",t.ANNOTATION="annotation",t.ROLE="role",t.TYPE="type",t.CHILDREN="children",t.CONTENT="content",t.TEXT="$t";class Ar{static fromXml(e){const t=parseInt(e.getAttribute("id"),10),n=new Ar(t);return n.type=e.tagName,Ar.setAttribute(n,e,"role"),Ar.setAttribute(n,e,"font"),Ar.setAttribute(n,e,"embellished"),Ar.setAttribute(n,e,"fencepointer","fencePointer"),e.getAttribute("annotation")&&n.parseAnnotation(e.getAttribute("annotation")),Nr(n,e),Ar.processChildren(n,e),n}static setAttribute(e,t,n,r){r=r||n;t=t.getAttribute(n);t&&(e[r]=t)}static processChildren(t,e){for(const n of g(e.childNodes))if(n.nodeType===K.TEXT_NODE)t.textContent=n.textContent;else{const e=g(n.childNodes).map(Ar.fromXml);e.forEach(e=>e.parent=t),"CONTENT"===R(n)?t.contentNodes=e:t.childNodes=e}}constructor(e){this.id=e,this.mathml=[],this.parent=null,this.type=E.UNKNOWN,this.role=h.UNKNOWN,this.font=d.UNKNOWN,this.embellished=null,this.fencePointer="",this.childNodes=[],this.textContent="",this.mathmlTree=null,this.contentNodes=[],this.annotation={},this.attributes={},this.nobreaking=!1}querySelectorAll(n){let r=[];for(let e,t=0;e=this.childNodes[t];t++)r=r.concat(e.querySelectorAll(n));for(let e,t=0;e=this.contentNodes[t];t++)r=r.concat(e.querySelectorAll(n));return n(this)&&r.unshift(this),r}xml(o,i){function e(e,t){const n=t.map(function(e){return e.xml(o,i)}),r=o.createElementNS("",e);for(let e,t=0;e=n[t];t++)r.appendChild(e);return r}const t=o.createElementNS("",this.type);return i||this.xmlAttributes(t),t.textContent=this.textContent,0<this.contentNodes.length&&t.appendChild(e(ln.CONTENT,this.contentNodes)),0<this.childNodes.length&&t.appendChild(e(ln.CHILDREN,this.childNodes)),t}toString(e=!1){var t=ce("<snode/>");return Ne(this.xml(t.ownerDocument,e))}allAttributes(){const e=[];return e.push([ln.ROLE,this.role]),this.font!==d.UNKNOWN&&e.push([ln.FONT,this.font]),Object.keys(this.annotation).length&&e.push([ln.ANNOTATION,this.annotationXml()]),this.embellished&&e.push([ln.EMBELLISHED,this.embellished]),this.fencePointer&&e.push([ln.FENCEPOINTER,this.fencePointer]),e.push([ln.ID,this.id.toString()]),e}annotationXml(){const t=[];for(const[n,e]of Object.entries(this.annotation))e.forEach(e=>t.push(n+":"+e));return t.join(";")}attributesXml(){const e=[];for(var[t,n]of Object.entries(this.attributes))e.push(t+":"+Ar.escapeValue(n));return e.join(";")}toJson(){const n={};n[ln.TYPE]=this.type;var r=this.allAttributes();for(let e,t=0;e=r[t];t++)n[e[0]]=e[1].toString();return this.textContent&&(n[ln.TEXT]=this.textContent),this.childNodes.length&&(n[ln.CHILDREN]=this.childNodes.map(function(e){return e.toJson()})),this.contentNodes.length&&(n[ln.CONTENT]=this.contentNodes.map(function(e){return e.toJson()})),n}updateContent(e,t){var t=t?e.replace(/^[ \f\n\r\t\v\u200b]*/,"").replace(/[ \f\n\r\t\v\u200b]*$/,""):e.trim();this.textContent!==(e=e&&!t?e:t)&&(t=S.Meaning.get(e.replace(/\s/g," ")),this.textContent=e,this.role=t.role,this.type=t.type,this.font=t.font)}addMathmlNodes(n){for(let e,t=0;e=n[t];t++)-1===this.mathml.indexOf(e)&&this.mathml.push(e)}appendChild(e){this.childNodes.push(e),this.addMathmlNodes(e.mathml),e.parent=this}replaceChild(t,n){var e,r=this.childNodes.indexOf(t);-1!==r&&(t.parent=null,(n.parent=this).childNodes[r]=n,r=t.mathml.filter(function(e){return-1===n.mathml.indexOf(e)}),e=n.mathml.filter(function(e){return-1===t.mathml.indexOf(e)}),this.removeMathmlNodes(r),this.addMathmlNodes(e))}appendContentNode(e){e&&(this.contentNodes.push(e),this.addMathmlNodes(e.mathml),e.parent=this)}removeContentNode(e){e&&-1!==(e=this.contentNodes.indexOf(e))&&this.contentNodes.slice(e,1)}equals(r){if(!r)return!1;if(this.type!==r.type||this.role!==r.role||this.textContent!==r.textContent||this.childNodes.length!==r.childNodes.length||this.contentNodes.length!==r.contentNodes.length)return!1;for(let e,t,n=0;e=this.childNodes[n],t=r.childNodes[n];n++)if(!e.equals(t))return!1;for(let e,t,n=0;e=this.contentNodes[n],t=r.contentNodes[n];n++)if(!e.equals(t))return!1;return!0}displayTree(){console.info(this.displayTree_(0))}addAnnotation(e,t){t&&this.addAnnotation_(e,t)}getAnnotation(e){return this.annotation[e]||[]}hasAnnotation(e,t){const n=this.annotation[e];return!!n&&-1!==n.indexOf(t)}parseAnnotation(e){const n=e.split(";");for(let e=0,t=n.length;e<t;e++){var r=n[e].split(":");this.addAnnotation(r[0],r[1])}}meaning(){return{type:this.type,role:this.role,font:this.font}}xmlAttributes(n){var r=this.allAttributes();for(let e,t=0;e=r[t];t++)n.setAttribute(e[0],e[1]);this.addExternalAttributes(n)}addExternalAttributes(e){for(var[t,n]of Object.entries(this.attributes))e.setAttribute(t,n)}static escapeValue(e){return e.replace(/;/g,"\\0003B")}parseAttributes(e){if(e){const n=e.split(";");for(let e=0,t=n.length;e<t;e++){const[r,...o]=n[e].split(":");r&&(this.attributes[r]=o.join("").replace(/\\0003B/g,";"))}}}removeMathmlNodes(n){const r=this.mathml;for(let e,t=0;e=n[t];t++){const n=r.indexOf(e);-1!==n&&r.splice(n,1)}this.mathml=r}displayTree_(t){t++;var n=Array(t).join("  ");let r="";r=(r=r+("\n"+n+this.toString())+"\n"+n+"MathmlTree:")+"\n"+n+this.mathmlTreeString()+"\n"+n+"MathML:";for(let e,t=0;e=this.mathml[t];t++)r+="\n"+n+e.toString();return r+="\n"+n+"Begin Content",this.contentNodes.forEach(function(e){r+=e.displayTree_(t)}),r=r+("\n"+n+"End Content")+("\n"+n+"Begin Children"),this.childNodes.forEach(function(e){r+=e.displayTree_(t)}),r+="\n"+n+"End Children"}mathmlTreeString(){return this.mathmlTree?this.mathmlTree.toString():"EMPTY"}addAnnotation_(e,t){const n=this.annotation[e];n&&!n.includes(t)?n.push(t):this.annotation[e]=[t]}}class br{constructor(){this.leafMap=new sr,this.defaultMap=new or,this.idCounter_=-1}makeNode(e){return this.createNode_(e)}makeUnprocessed(e){const t=this.createNode_();return t.mathml=[e],t.mathmlTree=e,t}makeEmptyNode(){const e=this.createNode_();return e.type=E.EMPTY,e}makeContentNode(e){const t=this.createNode_();return t.updateContent(e),t}makeMultipleContentNodes(t,n){const r=[];for(let e=0;e<t;e++)r.push(this.makeContentNode(n));return r}makeLeafNode(e,t){if(!e)return this.makeEmptyNode();const n=this.makeContentNode(e);n.font=t||n.font;e=this.defaultMap.getNode(n);return e&&(n.type=e.type,n.role=e.role,n.font=e.font),this.leafMap.addNode(n),n}makeBranchNode(e,t,n,r){const o=this.createNode_();return r&&o.updateContent(r),o.type=e,o.childNodes=t,o.contentNodes=n,t.concat(n).forEach(function(e){(e.parent=o).addMathmlNodes(e.mathml)}),o}createNode_(e){return void 0!==e?this.idCounter_=Math.max(this.idCounter_,e):e=++this.idCounter_,new Ar(e)}}function C(e,t){return e.type===t}function Rr(e,t){return e.embellished===t}function y(e,t){return e.role===t}function Or(e){return C(e,E.FENCE)||C(e,E.PUNCTUATION)||C(e,E.OPERATOR)||C(e,E.RELATION)}function Cr(e){return wr(e)&&!y(e,h.DIVISION)||C(e,E.APPL)||Mr(e)}function yr(e){return wr(e)||Mr(e)}function vr(e,t){return t&&C(t,E.IDENTIFIER)&&S.Secondary.has(e.textContent,Re.D)}function Lr(e){var t;if(C(e,E.IDENTIFIER))return(t=e.textContent[0])&&e.textContent[1]&&S.Secondary.has(t,Re.D)}function Mr(e){return Dr(e)||Pr(e)}function _r(e){return e.embellished||((t=e.type)===E.OPERATOR||t===E.RELATION||t===E.FENCE||t===E.PUNCTUATION?e.type:null);var t}function wr(e){return C(e,E.OPERATOR)||Rr(e,E.OPERATOR)}function Dr(e){return C(e,E.RELATION)||Rr(e,E.RELATION)}function Pr(e){return C(e,E.PUNCTUATION)||Rr(e,E.PUNCTUATION)}function xr(e){return C(e,E.FENCE)||Rr(e,E.FENCE)}function Ur(e){return e&&xr(e)&&(!e.embellished||function e(t){return!t.embellished||!function(e){return C(e,E.TENSOR)&&(!C(e.childNodes[1],E.EMPTY)||!C(e.childNodes[2],E.EMPTY))&&(!C(e.childNodes[3],E.EMPTY)||!C(e.childNodes[4],E.EMPTY))}(t)&&(!y(t,h.CLOSE)||!C(t,E.TENSOR))&&(!y(t,h.OPEN)||!C(t,E.SUBSCRIPT)&&!C(t,E.SUPERSCRIPT))&&e(t.childNodes[0])}(e))}function Fr(e){return!!e&&(C(e,E.TABLE)||C(e,E.MULTILINE))}function kr(e){return!!e&&Br(e)&&Fr(e.childNodes[0])}function Br(e){return!!e&&C(e,E.FENCED)&&(y(e,h.LEFTRIGHT)||zr(e))&&1===e.childNodes.length}function Gr(e){return e.childNodes.every(function(e){return e.childNodes.length<=1})}function Vr(e,t,n){return 1===t.length&&(e[n].type===E.PUNCTUATION||e[n].embellished===E.PUNCTUATION)&&e[n]===t[0]}function Hr(e){return C(e,E.IDENTIFIER)&&y(e,h.SIMPLEFUNC)}const jr=[E.PUNCTUATION,E.PUNCTUATED,E.RELSEQ,E.MULTIREL,E.TABLE,E.MULTILINE,E.CASES,E.INFERENCE],qr=[E.LIMUPPER,E.LIMLOWER,E.LIMBOTH,E.SUBSCRIPT,E.SUPERSCRIPT,E.UNDERSCORE,E.OVERSCORE,E.TENSOR];function Xr(e){return(t=e).type===E.NUMBER&&(t.role===h.INTEGER||t.role===h.FLOAT)||e.role===h.VULGAR||e.role===h.MIXED;var t}function Yr(e){var t=e.childNodes;return e.role===h.UNIT&&(!t.length||t[0].role===h.UNIT)}function $r(e){var t=e.childNodes;return e.type===E.INFIXOP&&(e.role===h.MULTIPLICATION||e.role===h.IMPLICIT)&&t.length&&(Yr(t[0])||Xr(t[0]))&&e.childNodes.slice(1).every(Yr)}function Wr(e){return e.type===E.INFIXOP&&(e.role===h.IMPLICIT||e.role===h.UNIT&&!!e.contentNodes.length&&e.contentNodes[0].textContent===rn.invisibleTimes)}function Kr(e){return e.type===E.INFIXOP&&e.role===h.IMPLICIT}function zr(e){return e.role===h.NEUTRAL||e.role===h.METRIC}function Qr(e,t){return zr(e)&&zr(t)&&Sr(e).textContent===Sr(t).textContent}function Jr(e){return zr(e)&&(!e.embellished||e.type!==E.SUPERSCRIPT&&e.type!==E.SUBSCRIPT&&(e.type!==E.TENSOR||e.childNodes[3].type===E.EMPTY&&e.childNodes[4].type===E.EMPTY))}function Zr(e){return zr(e)&&(!e.embellished||e.type!==E.TENSOR||e.childNodes[1].type===E.EMPTY&&e.childNodes[2].type===E.EMPTY)}function eo(e){return[h.ELEMENT,h.NONELEMENT,h.REELEMENT,h.RENONELEMENT].includes(e.role)}class v{static getInstance(){return v.instance=v.instance||new v,v.instance}static tableToMultiline(n){if(!Gr(n))return A.run("rewrite_subcases",n,v.classifyTable);n.type=E.MULTILINE;for(let e,t=0;e=n.childNodes[t];t++)v.rowToLine_(e,h.MULTILINE);var e;return 1!==n.childNodes.length||C(e=n.childNodes[0],E.LINE)&&e.contentNodes.length&&y(e.contentNodes[0],h.LABEL)||!Br(n.childNodes[0].childNodes[0])||v.tableToMatrixOrVector_(v.rewriteFencedLine_(n)),v.binomialForm_(n),v.classifyMultiline(n),n}static number(e){e.type!==E.UNKNOWN&&e.type!==E.IDENTIFIER||(e.type=E.NUMBER),v.meaningFromContent(e,v.numberRole_),v.exprFont_(e)}static classifyMultiline(e){let t=0;var n=e.childNodes.length;let r;for(;t<n&&(!(r=e.childNodes[t])||!r.childNodes.length);)t++;if(!(t>=n)){const o=r.childNodes[0].role;o!==h.UNKNOWN&&e.childNodes.every(function(e){e=e.childNodes[0];return!e||e.role===o&&(C(e,E.RELATION)||C(e,E.RELSEQ))})&&(e.role=o)}}static classifyTable(e){var t=v.computeColumns_(e);return v.classifyByColumns_(e,t,h.EQUALITY)||v.classifyByColumns_(e,t,h.INEQUALITY,[h.EQUALITY])||v.classifyByColumns_(e,t,h.ARROW)||v.detectCaleyTable(e),e}static detectCaleyTable(e){if(!e.mathmlTree)return!1;const t=e.mathmlTree,n=t.getAttribute("columnlines"),r=t.getAttribute("rowlines");return!(!n||!r||!v.cayleySpacing(n)||!v.cayleySpacing(r)||(e.role=h.CAYLEY,0))}static cayleySpacing(e){const t=e.split(" ");return("solid"===t[0]||"dashed"===t[0])&&t.slice(1).every(e=>"none"===e)}static proof(e,t,n){t=v.separateSemantics(t);return v.getInstance().proof(e,t,n)}static findSemantics(e,t,n){n=null==n?null:n,e=v.getSemantics(e);return!(!e||!e[t]||null!=n&&e[t]!==n)}static getSemantics(e){e=e.getAttribute("semantics");return e?v.separateSemantics(e):null}static removePrefix(e){const[,...t]=e.split("_");return t.join("_")}static separateSemantics(e){const n={};return e.split(";").forEach(function(e){var[e,t]=e.split(":");n[v.removePrefix(e)]=t}),n}static matchSpaces_(n,r){for(let e,t=0;e=r[t];t++){const r=n[t].mathmlTree,i=n[t+1].mathmlTree;var o;r&&i&&((o=r.nextSibling)&&o!==i&&(o=v.getSpacer_(o))&&(e.mathml.push(o),e.mathmlTree=o,e.role=h.SPACE))}}static getSpacer_(e){if(R(e)===p.MSPACE)return e;for(;gr(e)&&1===e.childNodes.length;)if(R(e=e.childNodes[0])===p.MSPACE)return e;return null}static fenceToPunct_(e){var t=v.FENCE_TO_PUNCT_[e.role];if(t){for(;e.embellished;)e.embellished=E.PUNCTUATION,y(e,h.SUBSUP)||y(e,h.UNDEROVER)||(e.role=t),e=e.childNodes[0];e.type=E.PUNCTUATION,e.role=t}}static classifyFunction_(t,n){if(t.type===E.APPL||t.type===E.BIGOP||t.type===E.INTEGRAL)return"";if(n[0]&&n[0].textContent===rn.functionApplication){v.getInstance().funcAppls[t.id]=n.shift();let e=h.SIMPLEFUNC;return A.run("simple2prefix",t),t.role!==h.PREFIXFUNC&&t.role!==h.LIMFUNC||(e=t.role),v.propagateFunctionRole_(t,e),"prefix"}return v.CLASSIFY_FUNCTION_[t.role]||((n=t).type===E.IDENTIFIER||n.role===h.LATINLETTER||n.role===h.GREEKLETTER||n.role===h.OTHERLETTER?"simple":"")}static propagateFunctionRole_(e,t){e&&e.type!==E.INFIXOP&&(y(e,h.SUBSUP)||y(e,h.UNDEROVER)||(e.role=t),v.propagateFunctionRole_(e.childNodes[0],t))}static getFunctionOp_(n,r){if(r(n))return n;for(let e,t=0;e=n.childNodes[t];t++){const n=v.getFunctionOp_(e,r);if(n)return n}return null}static tableToMatrixOrVector_(e){const n=e.childNodes[0];C(n,E.MULTILINE)?v.tableToVector_(e):v.tableToMatrix_(e),e.contentNodes.forEach(n.appendContentNode.bind(n));for(let e,t=0;e=n.childNodes[t];t++)v.assignRoleToRow_(e,v.getComponentRoles_(n));return n.parent=null,n}static tableToVector_(e){const t=e.childNodes[0];t.type=E.VECTOR,1!==t.childNodes.length?v.binomialForm_(t):v.tableToSquare_(e)}static binomialForm_(e){y(e,h.UNKNOWN)&&2===e.childNodes.length&&(e.role=h.BINOMIAL,e.childNodes[0].role=h.BINOMIAL,e.childNodes[1].role=h.BINOMIAL)}static tableToMatrix_(e){const t=e.childNodes[0];t.type=E.MATRIX,t.childNodes&&0<t.childNodes.length&&t.childNodes[0].childNodes&&t.childNodes.length===t.childNodes[0].childNodes.length?v.tableToSquare_(e):t.childNodes&&1===t.childNodes.length&&(t.role=h.ROWVECTOR)}static tableToSquare_(e){const t=e.childNodes[0];y(t,h.UNKNOWN)&&(zr(e)?t.role=h.DETERMINANT:t.role=h.SQUAREMATRIX)}static getComponentRoles_(e){var t=e.role;return t&&t!==h.UNKNOWN?t:e.type.toLowerCase()||h.UNKNOWN}static tableToCases_(n,e){for(let e,t=0;e=n.childNodes[t];t++)v.assignRoleToRow_(e,h.CASES);return n.type=E.CASES,n.appendContentNode(e),Gr(n)&&v.binomialForm_(n),n}static rewriteFencedLine_(e){const t=e.childNodes[0],n=e.childNodes[0].childNodes[0],r=e.childNodes[0].childNodes[0].childNodes[0];return n.parent=e.parent,e.parent=n,r.parent=t,n.childNodes=[e],t.childNodes=[r],n}static rowToLine_(t,e){e=e||h.UNKNOWN;C(t,E.ROW)&&(t.type=E.LINE,t.role=e,1===t.childNodes.length&&C(t.childNodes[0],E.CELL)&&(t.childNodes=t.childNodes[0].childNodes,t.childNodes.forEach(function(e){e.parent=t})))}static assignRoleToRow_(e,t){C(e,E.LINE)?e.role=t:C(e,E.ROW)&&(e.role=t,e.childNodes.forEach(function(e){C(e,E.CELL)&&(e.role=t)}))}static nextSeparatorFunction_(e){let t;if(e){if(e.match(/^\s+$/))return null;t=e.replace(/\s/g,"").split("").filter(function(e){return e})}else t=[","];return function(){return 1<t.length?t.shift():t[0]}}static meaningFromContent(e,t){const n=[...e.textContent].filter(e=>e.match(/[^\s]/)),r=n.map(e=>S.Meaning.get(e));t(e,n,r)}static numberRole_(e,t,n){if(e.role===h.UNKNOWN)return n.every(function(e){return e.type===E.NUMBER&&e.role===h.INTEGER||e.type===E.PUNCTUATION&&e.role===h.COMMA})?(e.role=h.INTEGER,void("0"===t[0]&&e.addAnnotation("general","basenumber"))):void(n.every(function(e){return e.type===E.NUMBER&&e.role===h.INTEGER||e.type===E.PUNCTUATION})?e.role=h.FLOAT:e.role=h.OTHERNUMBER)}static exprFont_(e){e.font===d.UNKNOWN&&v.compSemantics(e,"font",d)}static compSemantics(e,n,r){var t=[...e.textContent].map(e=>S.Meaning.get(e)).reduce(function(e,t){return e&&t[n]&&t[n]!==r.UNKNOWN&&t[n]!==e?e===r.UNKNOWN?t[n]:null:e},r.UNKNOWN);t&&(e[n]=t)}static purgeFences_(t){const n=t.rel,r=t.comp,o=[],i=[];for(;0<n.length;){const t=n.shift();let e=r.shift();Ur(t)?(o.push(t),i.push(e)):(v.fenceToPunct_(t),e.push(t),e=e.concat(r.shift()),r.unshift(e))}return i.push(r.shift()),{rel:o,comp:i}}static rewriteFencedNode_(e){var t=e.contentNodes[0],n=e.contentNodes[1];let r=v.rewriteFence_(e,t);return e.contentNodes[0]=r.fence,r=v.rewriteFence_(r.node,n),e.contentNodes[1]=r.fence,(e.contentNodes[0].parent=e).contentNodes[1].parent=e,r.node.parent=null,r.node}static rewriteFence_(e,t){if(!t.embellished)return{node:e,fence:t};const n=t.childNodes[0],r=v.rewriteFence_(e,n);return C(t,E.SUPERSCRIPT)||C(t,E.SUBSCRIPT)||C(t,E.TENSOR)?(y(t,h.SUBSUP)||(t.role=e.role),n!==r.node&&(t.replaceChild(n,r.node),n.parent=e),v.propagateFencePointer_(t,n),{node:t,fence:r.fence}):(t.replaceChild(n,r.fence),t.mathmlTree&&-1===t.mathml.indexOf(t.mathmlTree)&&t.mathml.push(t.mathmlTree),{node:r.node,fence:t})}static propagateFencePointer_(e,t){e.fencePointer=t.fencePointer||t.id.toString(),e.embellished=null}static classifyByColumns_(e,t,n,r=[]){const o=[n].concat(r);return!!(3===t.length&&v.testColumns_(t,1,e=>v.isPureRelation_(e,o))||2===t.length&&(v.testColumns_(t,1,e=>v.isEndRelation_(e,o)||v.isPureRelation_(e,o))||v.testColumns_(t,0,e=>v.isEndRelation_(e,o,!0)||v.isPureRelation_(e,o))))&&(e.role=n,!0)}static isEndRelation_(t,e,n){n=n?t.childNodes.length-1:0;return C(t,E.RELSEQ)&&e.some(e=>y(t,e))&&C(t.childNodes[n],E.EMPTY)}static isPureRelation_(t,e){return C(t,E.RELATION)&&e.some(e=>y(t,e))}static computeColumns_(t){const r=[];for(let n,e=0;n=t.childNodes[e];e++)for(let e,t=0;e=n.childNodes[t];t++)r[t]?r[t].push(e):r[t]=[e];return r}static testColumns_(e,t,n){const r=e[t];return!!r&&r.some(function(e){return e.childNodes.length&&n(e.childNodes[0])})&&r.every(function(e){return!e.childNodes.length||n(e.childNodes[0])})}setNodeFactory(e){v.getInstance().factory_=e,A.updateFactory(v.getInstance().factory_)}getNodeFactory(){return v.getInstance().factory_}identifierNode(e,t,n){if("MathML-Unit"===n)e.type=E.IDENTIFIER,e.role=h.UNIT;else if(!t&&1===e.textContent.length&&(e.role===h.INTEGER||e.role===h.LATINLETTER||e.role===h.GREEKLETTER)&&e.font===d.NORMAL)return e.font=d.ITALIC,A.run("simpleNamedFunction",e);return e.type===E.UNKNOWN&&(e.type=E.IDENTIFIER),v.exprFont_(e),A.run("simpleNamedFunction",e)}implicitNode(e){if(e=v.getInstance().getMixedNumbers_(e),1===(e=v.getInstance().combineUnits_(e)).length)return e[0];e=v.getInstance().implicitNode_(e);return A.run("combine_juxtaposition",e)}text(e,t){return v.exprFont_(e),e.type=E.TEXT,t===p.ANNOTATIONXML?e.role=h.ANNOTATION:t===p.MS?e.role=h.STRING:t===p.MSPACE||e.textContent.match(/^\s*$/)?e.role=h.SPACE:/\s/.exec(e.textContent)?e.role=h.TEXT:e.role=h.UNKNOWN,e}row(e){return 0===(e=e.filter(function(e){return!C(e,E.EMPTY)})).length?v.getInstance().factory_.makeEmptyNode():(e=v.getInstance().getFencesInRow_(e),e=v.getInstance().tablesInRow(e),e=v.getInstance().getPunctuationInRow_(e),e=v.getInstance().getTextInRow_(e),e=v.getInstance().getFunctionsInRow_(e),v.getInstance().relationsInRow_(e))}limitNode(e,t){if(!t.length)return v.getInstance().factory_.makeEmptyNode();let n,r=t[0],o=E.UNKNOWN;if(!t[1])return r;if(A.run("op_with_limits",t),function e(t){return C(t,E.LARGEOP)||C(t,E.LIMBOTH)||C(t,E.LIMLOWER)||C(t,E.LIMUPPER)||C(t,E.FUNCTION)&&y(t,h.LIMFUNC)||(C(t,E.OVERSCORE)||C(t,E.UNDERSCORE))&&e(t.childNodes[0])}(r)){var i=(n=v.MML_TO_LIMIT_[e]).length;if(o=n.type,t=t.slice(0,n.length+1),1===i&&Or(t[1])||2===i&&Or(t[1])&&Or(t[2]))return n=v.MML_TO_BOUNDS_[e],v.getInstance().accentNode_(r,t,n.type,n.length,n.accent);if(2===i){if(Or(t[1]))return r=v.getInstance().accentNode_(r,[r,t[1]],{MSUBSUP:E.SUBSCRIPT,MUNDEROVER:E.UNDERSCORE}[e],1,!0),t[2]?v.getInstance().makeLimitNode_(r,[r,t[2]],null,E.LIMUPPER):r;if(t[2]&&Or(t[2]))return r=v.getInstance().accentNode_(r,[r,t[2]],{MSUBSUP:E.SUPERSCRIPT,MUNDEROVER:E.OVERSCORE}[e],1,!0),v.getInstance().makeLimitNode_(r,[r,t[1]],null,E.LIMLOWER);t[i]||(o=E.LIMLOWER)}return v.getInstance().makeLimitNode_(r,t,null,o)}return n=v.MML_TO_BOUNDS_[e],v.getInstance().accentNode_(r,t,n.type,n.length,n.accent)}tablesInRow(e){let n=Ir(e,kr),r=[];for(let e,t=0;e=n.rel[t];t++)(r=r.concat(n.comp.shift())).push(v.tableToMatrixOrVector_(e));r=r.concat(n.comp.shift()),n=Ir(r,Fr),r=[];for(let e,t=0;e=n.rel[t];t++){const i=n.comp.shift();0<(o=i).length&&y(o[o.length-1],h.OPENFENCE)&&v.tableToCases_(e,i.pop()),(r=r.concat(i)).push(e)}var o;return r.concat(n.comp.shift())}mfenced(t,n,e,r){if(e&&0<r.length){const t=v.nextSeparatorFunction_(e),n=[r.shift()];r.forEach(e=>{n.push(v.getInstance().factory_.makeContentNode(t())),n.push(e)}),r=n}return t&&n?v.getInstance().horizontalFencedNode_(v.getInstance().factory_.makeContentNode(t),v.getInstance().factory_.makeContentNode(n),r):(t&&r.unshift(v.getInstance().factory_.makeContentNode(t)),n&&r.push(v.getInstance().factory_.makeContentNode(n)),v.getInstance().row(r))}fractionLikeNode(e,t,n,r){let o;if(r||!function(e){if(e){if(["negativeveryverythinmathspace","negativeverythinmathspace","negativethinmathspace","negativemediummathspace","negativethickmathspace","negativeverythickmathspace","negativeveryverythickmathspace"].includes(e))return 1;e=e.match(/[0-9.]+/);return e&&0===parseFloat(e[0])}}(n))return o=v.getInstance().fractionNode_(e,t),r&&o.addAnnotation("general","bevelled"),o;{const n=v.getInstance().factory_.makeBranchNode(E.LINE,[e],[]),r=v.getInstance().factory_.makeBranchNode(E.LINE,[t],[]);return o=v.getInstance().factory_.makeBranchNode(E.MULTILINE,[n,r],[]),v.binomialForm_(o),v.classifyMultiline(o),o}}tensor(e,t,n,r,o){const i=v.getInstance().factory_.makeBranchNode(E.TENSOR,[e,v.getInstance().scriptNode_(t,h.LEFTSUB),v.getInstance().scriptNode_(n,h.LEFTSUPER),v.getInstance().scriptNode_(r,h.RIGHTSUB),v.getInstance().scriptNode_(o,h.RIGHTSUPER)],[]);return i.role=e.role,i.embellished=_r(e),i}pseudoTensor(e,t,n){var r=e=>!C(e,E.EMPTY),o=t.filter(r).length,r=n.filter(r).length;if(!o&&!r)return e;const i=o?r?p.MSUBSUP:p.MSUB:p.MSUP,s=[e];return o&&s.push(v.getInstance().scriptNode_(t,h.RIGHTSUB,!0)),r&&s.push(v.getInstance().scriptNode_(n,h.RIGHTSUPER,!0)),v.getInstance().limitNode(i,s)}font(e){return v.MATHJAX_FONTS[e]||e}proof(e,t,n){if(t.inference||t.axiom||console.log("Noise"),t.axiom){const t=v.getInstance().cleanInference(e.childNodes),r=t.length?v.getInstance().factory_.makeBranchNode(E.INFERENCE,n(t),[]):v.getInstance().factory_.makeEmptyNode();return r.role=h.AXIOM,r.mathmlTree=e,r}const r=v.getInstance().inference(e,t,n);return t.proof&&(r.role=h.PROOF,r.childNodes[0].role=h.FINAL),r}inference(e,t,n){if(t.inferenceRule){const t=v.getInstance().getFormulas(e,[],n);return v.getInstance().factory_.makeBranchNode(E.INFERENCE,[t.conclusion,t.premises],[])}const r=t.labelledRule,o=g(e.childNodes),i=[],s=("left"!==r&&"both"!==r||i.push(v.getInstance().getLabel(e,o,n,h.LEFT)),"right"!==r&&"both"!==r||i.push(v.getInstance().getLabel(e,o,n,h.RIGHT)),v.getInstance().getFormulas(e,o,n)),a=v.getInstance().factory_.makeBranchNode(E.INFERENCE,[s.conclusion,s.premises],i);return a.mathmlTree=e,a}getLabel(e,t,n,r){const o=v.getInstance().findNestedRow(t,"prooflabel",r),i=v.getInstance().factory_.makeBranchNode(E.RULELABEL,n(g(o.childNodes)),[]);return i.role=r,i.mathmlTree=o,i}getFormulas(e,t,n){const r=t.length?v.getInstance().findNestedRow(t,"inferenceRule"):e,o="up"===v.getSemantics(r).inferenceRule,i=o?r.childNodes[1]:r.childNodes[0],s=o?r.childNodes[0]:r.childNodes[1],a=i.childNodes[0].childNodes[0],c=g(a.childNodes[0].childNodes),l=[];let u=1;for(const e of c)u%2&&l.push(e.childNodes[0]),u++;const h=n(l),d=n(g(s.childNodes[0].childNodes))[0],p=v.getInstance().factory_.makeBranchNode(E.PREMISES,h,[]),f=(p.mathmlTree=a,v.getInstance().factory_.makeBranchNode(E.CONCLUSION,[d],[]));return f.mathmlTree=s.childNodes[0].childNodes[0],{conclusion:f,premises:p}}findNestedRow(e,t,n){return v.getInstance().findNestedRow_(e,t,0,n)}cleanInference(e){return g(e).filter(function(e){return"MSPACE"!==R(e)})}operatorNode(e){return e.type===E.UNKNOWN&&(e.type=E.OPERATOR),A.run("multioperator",e)}constructor(){this.funcAppls={},this.splitRoles=new Map([[h.SUBTRACTION,h.NEGATIVE],[h.ADDITION,h.POSITIVE]]),this.splitOps=["âˆ’","-","â€","â€‘","+"],this.factory_=new br,A.updateFactory(this.factory_)}implicitNode_(e){const t=v.getInstance().factory_.makeMultipleContentNodes(e.length-1,rn.invisibleTimes),n=(v.matchSpaces_(e,t),v.getInstance().infixNode_(e,t[0]));return n.role=h.IMPLICIT,t.forEach(function(e){e.parent=n}),n.contentNodes=t,n}infixNode_(e,t){let n=v.getInstance().factory_.makeBranchNode(E.INFIXOP,e,[t],Sr(t).textContent);return n.role=t.role,n=A.run("propagateInterval",n),A.run("propagateSimpleFunction",n)}explicitMixed_(n){var r=Ir(n,function(e){return e.textContent===rn.invisiblePlus});if(!r.rel.length)return n;let o=[];for(let e,t=0;e=r.rel[t];t++){const i=r.comp[t],s=r.comp[t+1],a=i.length-1;if(i[a]&&s[0]&&C(i[a],E.NUMBER)&&!y(i[a],h.MIXED)&&C(s[0],E.FRACTION)){const n=v.getInstance().factory_.makeBranchNode(E.NUMBER,[i[a],s[0]],[]);n.role=h.MIXED,(o=o.concat(i.slice(0,a))).push(n),s.shift()}else(o=o.concat(i)).push(e)}return o.concat(r.comp[r.comp.length-1])}concatNode_(e,t,n){if(0===t.length)return e;const r=t.map(function(e){return Sr(e).textContent}).join(" "),o=v.getInstance().factory_.makeBranchNode(n,[e],t,r);return 1<t.length&&(o.role=h.MULTIOP),o}prefixNode_(e,t){const n=this.splitSingles(t);let r=e;for(;0<n.length;){const e=n.pop();r=v.getInstance().concatNode_(r,e,E.PREFIXOP),1===e.length&&-1!==this.splitOps.indexOf(e[0].textContent)&&(r.role=this.splitRoles.get(e[0].role))}return r}splitSingles(e){let t=0;const n=[];let r=0;for(;r<e.length;){var o=e[r];!this.splitRoles.has(o.role)||e[r-1]&&e[r-1].role===o.role||e[r+1]&&e[r+1].role===o.role||-1===this.splitOps.indexOf(o.textContent)||(n.push(e.slice(t,r)),n.push(e.slice(r,r+1)),t=r+1),r++}return t<r&&n.push(e.slice(t,r)),n}postfixNode_(e,t){return t.length?v.getInstance().concatNode_(e,t,E.POSTFIXOP):e}combineUnits_(t){const n=Ir(t,function(e){return!y(e,h.UNIT)});if(t.length===n.rel.length)return n.rel;const r=[];var o,i;do{const t=n.comp.shift();o=n.rel.shift();let e=null;(i=r.pop())&&(t.length&&Xr(i)?t.unshift(i):r.push(i)),1===t.length&&(e=t.pop()),1<t.length&&((e=v.getInstance().implicitNode_(t)).role=h.UNIT),e&&r.push(e),o&&r.push(o)}while(o);return r}getMixedNumbers_(e){const n=Ir(e,function(e){return C(e,E.FRACTION)&&y(e,h.VULGAR)});if(!n.rel.length)return e;let r=[];for(let e,t=0;e=n.rel[t];t++){const o=n.comp[t],i=o.length-1;if(o[i]&&C(o[i],E.NUMBER)&&(y(o[i],h.INTEGER)||y(o[i],h.FLOAT))){const n=v.getInstance().factory_.makeBranchNode(E.NUMBER,[o[i],e],[]);n.role=h.MIXED,(r=r.concat(o.slice(0,i))).push(n)}else(r=r.concat(o)).push(e)}return r.concat(n.comp[n.comp.length-1])}getTextInRow_(e){if(0===e.length)return e;if(1===e.length)return e[0].type===E.TEXT&&e[0].role===h.UNKNOWN&&(e[0].role=h.ANNOTATION),e;const{rel:n,comp:r}=Ir(e,e=>C(e,E.TEXT));if(0===n.length)return e;const o=[];let i=r.shift();for(;0<n.length;){let e=n.shift(),t=r.shift();const a=[];for(;!t.length&&n.length&&e.role!==h.SPACE&&n[0].role!==h.SPACE;)a.push(e),e=n.shift(),t=r.shift();if(a.length){i.length&&o.push(v.getInstance().row(i)),a.push(e);const n=v.getInstance().dummyNode_(a);o.push(n),i=t}else{var s;i=e.role!==h.UNKNOWN?(i.length&&o.push(v.getInstance().row(i)),o.push(e),t):(s=S.Meaning.get(e.textContent)).type!==E.PUNCTUATION?s.type===E.UNKNOWN?(v.meaningFromContent(e,(e,t,n)=>{if(e.role===h.UNKNOWN){if(v.numberRole_(e,t,n),e.role===h.OTHERNUMBER)return n.some(e=>e.type!==E.NUMBER&&e.type!==E.IDENTIFIER)?(e.type=E.TEXT,void(e.role=h.ANNOTATION)):void(e.role=h.UNKNOWN);e.type=E.NUMBER}}),e.type!==E.TEXT||e.role===h.UNKNOWN?(e.role===h.UNKNOWN&&(n.length||t.length?t.length&&t[0].type===E.FENCED?(e.type=E.FUNCTION,e.role=h.PREFIXFUNC):e.role=h.TEXT:(e.type=E.IDENTIFIER,e.role=h.UNIT)),i.push(e),i.concat(t)):(i.length&&o.push(v.getInstance().row(i)),o.push(e),t)):(e.type=s.type,e.role=s.role,e.font=s.font,e.addAnnotation("general","text"),i.push(e),i.concat(t)):(e.role=s.role,e.font=s.font,i.length&&o.push(v.getInstance().row(i)),o.push(e),t)}}return 0<i.length&&o.push(v.getInstance().row(i)),1<o.length?[v.getInstance().dummyNode_(o)]:o}relationsInRow_(e){const t=Ir(e,Dr),n=t.rel[0];if(!n)return v.getInstance().operationsInRow_(e);if(1===e.length)return e[0];e=t.comp.map(v.getInstance().operationsInRow_);let r;return t.rel.some(function(e){return!e.equals(n)})?(r=v.getInstance().factory_.makeBranchNode(E.MULTIREL,e,t.rel),t.rel.every(function(e){return e.role===n.role})&&(r.role=n.role)):(r=v.getInstance().factory_.makeBranchNode(E.RELSEQ,e,t.rel,Sr(n).textContent)).role=n.role,r}operationsInRow_(e){if(0===e.length)return v.getInstance().factory_.makeEmptyNode();if(1===(e=v.getInstance().explicitMixed_(e)).length)return e[0];const t=[];for(;0<e.length&&wr(e[0]);)t.push(e.shift());if(0===e.length)return v.getInstance().prefixNode_(t.pop(),t);if(1===e.length)return v.getInstance().prefixNode_(e[0],t);var n=Tr(e=A.run("convert_juxtaposition",e),wr),r=v.getInstance().wrapFactor(t,n);return v.getInstance().addFactor(r,n)}wrapPostfix(e){var t;(null==(t=e.div)?void 0:t.role)===h.POSTFIXOP&&(e.tail.length&&e.tail[0].type!==E.OPERATOR?e.div.role=h.DIVISION:(e.head=[v.getInstance().postfixNode_(v.getInstance().implicitNode(e.head),[e.div])],e.div=e.tail.shift(),v.getInstance().wrapPostfix(e)))}wrapFactor(e,t){return v.getInstance().wrapPostfix(t),v.getInstance().prefixNode_(v.getInstance().implicitNode(t.head),e)}addFactor(e,t){return t.div?v.getInstance().operationsTree_(t.tail,e,t.div):($r(e)&&(e.role=h.UNIT),e)}operationsTree_(e,t,n,r=[]){if(0===e.length){if(r.unshift(n),t.type!==E.INFIXOP)return v.getInstance().postfixNode_(t,r);{const e=v.getInstance().postfixNode_(t.childNodes.pop(),r);return t.appendChild(e),t}}e=Tr(e,wr);if(0===e.head.length)return r.push(e.div),v.getInstance().operationsTree_(e.tail,t,n,r);r=v.getInstance().wrapFactor(r,e),t=v.getInstance().appendOperand_(t,n,r);return v.getInstance().addFactor(t,e)}appendOperand_(e,t,n){return e.type!==E.INFIXOP?v.getInstance().infixNode_([e,n],t):v.getInstance().appendDivisionOp_(e,t,n)||(v.getInstance().appendExistingOperator_(e,t,n)?e:t.role===h.MULTIPLICATION?v.getInstance().appendMultiplicativeOp_(e,t,n):v.getInstance().appendAdditiveOp_(e,t,n))}appendDivisionOp_(e,t,n){return t.role===h.DIVISION?Wr(e)?v.getInstance().infixNode_([e,n],t):v.getInstance().appendLastOperand_(e,t,n):e.role===h.DIVISION?v.getInstance().infixNode_([e,n],t):null}appendLastOperand_(e,t,n){let r=e,o=e.childNodes[e.childNodes.length-1];for(;o&&o.type===E.INFIXOP&&!Wr(o);)o=(r=o).childNodes[e.childNodes.length-1];n=v.getInstance().infixNode_([r.childNodes.pop(),n],t);return r.appendChild(n),e}appendMultiplicativeOp_(e,t,n){if(Wr(e))return v.getInstance().infixNode_([e,n],t);let r=e,o=e.childNodes[e.childNodes.length-1];for(;o&&o.type===E.INFIXOP&&!Wr(o);)o=(r=o).childNodes[e.childNodes.length-1];n=v.getInstance().infixNode_([r.childNodes.pop(),n],t);return r.appendChild(n),e}appendAdditiveOp_(e,t,n){return v.getInstance().infixNode_([e,n],t)}appendExistingOperator_(e,t,n){return!(!e||e.type!==E.INFIXOP||Wr(e))&&(e.contentNodes[0].equals(t)?(e.appendContentNode(t),e.appendChild(n),!0):v.getInstance().appendExistingOperator_(e.childNodes[e.childNodes.length-1],t,n))}getFencesInRow_(e){let t=Ir(e,xr);e=(t=v.purgeFences_(t)).comp.shift();return v.getInstance().fences_(t.rel,t.comp,[],[e])}fences_(e,t,n,r){if(0===e.length&&0===n.length)return r[0];const o=A.run("bracketed_interval",[e[0],e[1],...t[0]||[]],()=>null);if(o){e.shift(),e.shift(),t.shift();const i=r.pop()||[];return r.push([...i,o,...t.shift()]),v.getInstance().fences_(e,t,n,r)}const i=e=>y(e,h.OPEN);if(0===e.length){const e=r.shift();for(;0<n.length;){if(i(n[0])){const t=n.shift();v.fenceToPunct_(t),e.push(t)}else{const t=Tr(n,i),o=t.head.length-1,s=v.getInstance().neutralFences_(t.head,r.slice(0,o));r=r.slice(o),e.push(...s),t.div&&t.tail.unshift(t.div),n=t.tail}e.push(...r.shift())}return e}const s=n[n.length-1],a=e[0].role;if(a===h.OPEN||zr(e[0])&&(!s||!Qr(e[0],s))){n.push(e.shift());const o=t.shift();return o&&r.push(o),v.getInstance().fences_(e,t,n,r)}if(s&&a===h.CLOSE&&s.role===h.OPEN){const o=v.getInstance().horizontalFencedNode_(n.pop(),e.shift(),r.pop());return r.push(r.pop().concat([o],t.shift())),v.getInstance().fences_(e,t,n,r)}if(s&&Qr(e[0],s)){if(!Jr(s)||!Zr(e[0])){n.push(e.shift());const o=t.shift();return o&&r.push(o),v.getInstance().fences_(e,t,n,r)}const o=v.getInstance().horizontalFencedNode_(n.pop(),e.shift(),r.pop());return r.push(r.pop().concat([o],t.shift())),v.getInstance().fences_(e,t,n,r)}if(s&&a===h.CLOSE&&zr(s)&&n.some(i)){const o=Tr(n,i,!0),s=r.pop(),a=r.length-o.tail.length+1,l=v.getInstance().neutralFences_(o.tail,r.slice(a));r=r.slice(0,a);var c=v.getInstance().horizontalFencedNode_(o.div,e.shift(),r.pop().concat(l,s));return r.push(r.pop().concat([c],t.shift())),v.getInstance().fences_(e,t,o.head,r)}const l=e.shift();return v.fenceToPunct_(l),r.push(r.pop().concat([l],t.shift())),v.getInstance().fences_(e,t,n,r)}neutralFences_(e,t){if(0===e.length)return e;if(1===e.length)return v.fenceToPunct_(e[0]),e;const n=e.shift();if(!Jr(n)){v.fenceToPunct_(n);const r=t.shift();return r.unshift(n),r.concat(v.getInstance().neutralFences_(e,t))}const r=Tr(e,function(e){return Qr(e,n)});if(!r.div){v.fenceToPunct_(n);const r=t.shift();return r.unshift(n),r.concat(v.getInstance().neutralFences_(e,t))}if(!Zr(r.div))return v.fenceToPunct_(r.div),e.unshift(n),v.getInstance().neutralFences_(e,t);const o=v.getInstance().combineFencedContent_(n,r.div,r.head,t);if(0<r.tail.length){const e=o.shift(),t=v.getInstance().neutralFences_(r.tail,o);return e.concat(t)}return o[0]}combineFencedContent_(e,t,n,r){if(0===n.length){const n=v.getInstance().horizontalFencedNode_(e,t,r.shift());return 0<r.length?r[0].unshift(n):r=[[n]],r}const o=r.shift(),i=n.length-1,s=r.slice(0,i),a=(r=r.slice(i)).shift(),c=v.getInstance().neutralFences_(n,s);o.push(...c),o.push(...a);n=v.getInstance().horizontalFencedNode_(e,t,o);return 0<r.length?r[0].unshift(n):r=[[n]],r}horizontalFencedNode_(e,t,n){n=v.getInstance().row(n);let r=v.getInstance().factory_.makeBranchNode(E.FENCED,[n],[e,t]);return e.role===h.OPEN?(v.getInstance().classifyHorizontalFence_(r),r=A.run("propagateComposedFunction",r)):r.role=e.role,r=A.run("detect_cycle",r),v.rewriteFencedNode_(r)}classifyHorizontalFence_(e){if(A.run("interval_heuristic",e),e.role!==h.INTERVAL){e.role=h.LEFTRIGHT;var t=e.childNodes;if((r=(n=e).contentNodes[0])&&-1!==["{","ï¹›","ï½›"].indexOf(r.textContent)&&(r=n.contentNodes[1])&&-1!==["}","ï¹œ","ï½"].indexOf(r.textContent)&&!(1<t.length))if(0===t.length||t[0].type===E.EMPTY)e.role=h.SETEMPTY;else{var n=t[0].type;if(1===t.length&&function e(t){var n=t.type;return-1===jr.indexOf(n)&&(n!==E.INFIXOP||t.role===h.IMPLICIT)&&(n===E.FENCED?t.role!==h.LEFTRIGHT||e(t.childNodes[0]):-1===qr.indexOf(n)||e(t.childNodes[0]))}(t[0]))e.role=h.SETSINGLE;else{var r=t[0].role;if(n===E.PUNCTUATED&&r===h.SEQUENCE){if(t[0].contentNodes[0].role!==h.COMMA)return 1!==t[0].contentNodes.length||t[0].contentNodes[0].role!==h.VBAR&&t[0].contentNodes[0].role!==h.COLON?void 0:(e.role=h.SETEXT,void v.getInstance().setExtension_(e));e.role=h.SETCOLLECT}}}}}setExtension_(e){const t=e.childNodes[0].childNodes[0];t&&t.type===E.INFIXOP&&1===t.contentNodes.length&&eo(t.contentNodes[0])&&(t.addAnnotation("set","intensional"),t.contentNodes[0].addAnnotation("set","intensional"))}getPunctuationInRow_(n){if(n.length<=1)return n;const r=e=>{e=e.type;return"punctuation"===e||"text"===e||"operator"===e||"relation"===e},t=Ir(n,function(e){if(!Pr(e))return!1;if(Pr(e)&&!y(e,h.ELLIPSIS))return!0;e=n.indexOf(e);if(0===e)return!n[1]||!r(n[1]);var t=n[e-1];if(e===n.length-1)return!r(t);e=n[e+1];return!r(t)||!r(e)});if(0===t.rel.length)return n;let o=[],i=t.comp.shift(),s=(0<i.length&&o.push(v.getInstance().row(i)),0);for(;0<t.comp.length;){let e=[];const r=s;for(;e.push(t.rel[s++]),i=t.comp.shift(),t.rel[s]&&i&&0===i.length;);e=A.run("ellipses",e),t.rel.splice(r,s-r,...e),s=r+e.length,o=o.concat(e),i&&0<i.length&&o.push(v.getInstance().row(i))}return 1===o.length&&1===t.rel.length?o:[v.getInstance().punctuatedNode_(o,t.rel)]}punctuatedNode_(t,e){const n=v.getInstance().factory_.makeBranchNode(E.PUNCTUATED,t,e);if(e.length===t.length){const t=e[0].role;if(t!==h.UNKNOWN&&e.every(function(e){return e.role===t}))return n.role=t,n}var r=e[0];return Vr(t,e,0)?n.role=r.childNodes.length&&!r.embellished?r.role:h.STARTPUNCT:Vr(t,e,t.length-1)?n.role=r.childNodes.length&&!r.embellished?r.role:h.ENDPUNCT:e.every(e=>y(e,h.DUMMY))?n.role=h.TEXT:e.every(e=>y(e,h.SPACE))?n.role=h.SPACE:n.role=h.SEQUENCE,n}dummyNode_(e){const t=v.getInstance().factory_.makeMultipleContentNodes(e.length-1,rn.invisibleComma);return t.forEach(function(e){e.role=h.DUMMY}),v.getInstance().punctuatedNode_(e,t)}accentRole_(e,t){if(!Or(e))return!1;var n=e.textContent,n=S.Secondary.get(n,Re.BAR)||S.Secondary.get(n,Re.TILDE)||e.role;return e.role=t===E.UNDERSCORE?h.UNDERACCENT:h.OVERACCENT,e.addAnnotation("accent",n),!0}accentNode_(e,t,n,r,o){var i=(t=t.slice(0,r+1))[1],s=t[2];let a;if(!o&&s&&((a=v.getInstance().factory_.makeBranchNode(E.SUBSCRIPT,[e,i],[])).role=h.SUBSUP,t=[a,s],n=E.SUPERSCRIPT),o){const r=v.getInstance().accentRole_(i,n);s&&(n=v.getInstance().accentRole_(s,E.OVERSCORE)&&!r?(t=[a=v.getInstance().factory_.makeBranchNode(E.OVERSCORE,[e,s],[]),i],E.UNDERSCORE):(t=[a=v.getInstance().factory_.makeBranchNode(E.UNDERSCORE,[e,i],[]),s],E.OVERSCORE),a.role=h.UNDEROVER)}return v.getInstance().makeLimitNode_(e,t,a,n)}makeLimitNode_(e,t,n,r){if(r===E.LIMUPPER&&e.type===E.LIMLOWER)return e.childNodes.push(t[1]),(t[1].parent=e).type=E.LIMBOTH,e;if(r===E.LIMLOWER&&e.type===E.LIMUPPER)return e.childNodes.splice(1,-1,t[1]),(t[1].parent=e).type=E.LIMBOTH,e;const o=v.getInstance().factory_.makeBranchNode(r,t,[]),i=_r(e);return n&&(n.embellished=i),o.embellished=i,o.role=e.role,o}getFunctionsInRow_(e,t){const n=t||[];if(0===e.length)return n;var t=e.shift(),r=v.classifyFunction_(t,e);if(!r)return n.push(t),v.getInstance().getFunctionsInRow_(e,n);e=v.getInstance().getFunctionsInRow_(e,[]),t=v.getInstance().getFunctionArgs_(t,e,r);return n.concat(t)}getFunctionArgs_(e,t,n){let r,o,i;switch(n){case"integral":{const n=v.getInstance().getIntegralArgs_(t);if(!n.intvar&&!n.integrand.length)return n.rest.unshift(e),n.rest;const r=v.getInstance().row(n.integrand);return i=v.getInstance().integralNode_(e,r,n.intvar),A.run("intvar_from_fraction",i),n.rest.unshift(i),n.rest}case"prefix":if(t[0]&&t[0].type===E.FENCED){const n=t.shift();return zr(n)||(n.role=h.LEFTRIGHT),i=v.getInstance().functionNode_(e,n),t.unshift(i),t}if((r=Tr(t,Cr)).head.length)o=v.getInstance().row(r.head),r.div&&r.tail.unshift(r.div);else{if(!r.div||!C(r.div,E.APPL))return t.unshift(e),t;o=r.div}return i=v.getInstance().functionNode_(e,o),r.tail.unshift(i),r.tail;case"bigop":return(r=Tr(t,yr)).head.length?(o=v.getInstance().row(r.head),i=v.getInstance().bigOpNode_(e,o),r.div&&r.tail.unshift(r.div),r.tail.unshift(i),r.tail):(t.unshift(e),t);default:{if(0===t.length)return[e];const n=t[0];return n.type===E.FENCED&&!zr(n)&&function(){var e=n.childNodes;if(0===e.length)return 1;if(!(1<e.length)){const t=e[0];if(t.type===E.INFIXOP){if(t.role!==h.IMPLICIT)return;if(t.childNodes.some(e=>C(e,E.INFIXOP)))return}return 1}}()?(n.role=h.LEFTRIGHT,v.propagateFunctionRole_(e,h.SIMPLEFUNC),i=v.getInstance().functionNode_(e,t.shift()),t.unshift(i)):t.unshift(e),t}}}getIntegralArgs_(e,t=[]){if(0===e.length){const e=Tr(t,yr);return e.div&&e.tail.unshift(e.div),{integrand:e.head,intvar:null,rest:e.tail}}A.run("intvar_from_implicit",e);const n=e[0];if(Mr(n)){const{integrand:n,rest:r}=v.getInstance().getIntegralArgs_(t);return{integrand:n,intvar:null,rest:r.concat(e)}}if(Lr(n))return n.role=h.INTEGRAL,{integrand:t,intvar:n,rest:e.slice(1)};if(e[1]&&vr(n,e[1])){const o=v.getInstance().prefixNode_(e[1],[n]);return o.role=h.INTEGRAL,{integrand:t,intvar:o,rest:e.slice(2)}}return t.push(e.shift()),v.getInstance().getIntegralArgs_(e,t)}functionNode_(e,t){const n=v.getInstance().factory_.makeContentNode(rn.functionApplication),r=v.getInstance().funcAppls[e.id];r&&(n.mathmlTree=r.mathmlTree,n.mathml=r.mathml,n.annotation=r.annotation,n.attributes=r.attributes,delete v.getInstance().funcAppls[e.id]),n.type=E.PUNCTUATION,n.role=h.APPLICATION;var o=v.getFunctionOp_(e,function(e){return C(e,E.FUNCTION)||C(e,E.IDENTIFIER)&&y(e,h.SIMPLEFUNC)});return v.getInstance().functionalNode_(E.APPL,[e,t],o,[n])}bigOpNode_(e,t){var n=v.getFunctionOp_(e,e=>C(e,E.LARGEOP));return v.getInstance().functionalNode_(E.BIGOP,[e,t],n,[])}integralNode_(e,t,n){t=t||v.getInstance().factory_.makeEmptyNode(),n=n||v.getInstance().factory_.makeEmptyNode();var r=v.getFunctionOp_(e,e=>C(e,E.LARGEOP));return v.getInstance().functionalNode_(E.INTEGRAL,[e,t,n],r,[])}functionalNode_(e,t,n,r){var o=t[0];let i;n&&(i=n.parent,r.push(n));const s=v.getInstance().factory_.makeBranchNode(e,t,r);return s.role=o.role,i&&(n.parent=i),s}fractionNode_(e,t){const n=v.getInstance().factory_.makeBranchNode(E.FRACTION,[e,t],[]);return n.role=n.childNodes.every(function(e){return C(e,E.NUMBER)&&y(e,h.INTEGER)})?h.VULGAR:n.childNodes.every(Yr)?h.UNIT:h.DIVISION,A.run("propagateSimpleFunction",n)}scriptNode_(e,t,n){let r;switch(e.length){case 0:r=v.getInstance().factory_.makeEmptyNode();break;case 1:if(r=e[0],n)return r;break;default:r=v.getInstance().dummyNode_(e)}return r.role=t,r}findNestedRow_(n,r,o,i){if(3<o)return null;for(let e,t=0;e=n[t];t++){const n=R(e);if(n!==p.MSPACE){if(n===p.MROW)return v.getInstance().findNestedRow_(g(e.childNodes),r,o+1,i);if(v.findSemantics(e,r,i))return e}}return null}}v.FENCE_TO_PUNCT_={[h.METRIC]:h.METRIC,[h.NEUTRAL]:h.VBAR,[h.OPEN]:h.OPENFENCE,[h.CLOSE]:h.CLOSEFENCE},v.MML_TO_LIMIT_={[p.MSUB]:{type:E.LIMLOWER,length:1},[p.MUNDER]:{type:E.LIMLOWER,length:1},[p.MSUP]:{type:E.LIMUPPER,length:1},[p.MOVER]:{type:E.LIMUPPER,length:1},[p.MSUBSUP]:{type:E.LIMBOTH,length:2},[p.MUNDEROVER]:{type:E.LIMBOTH,length:2}},v.MML_TO_BOUNDS_={[p.MSUB]:{type:E.SUBSCRIPT,length:1,accent:!1},[p.MSUP]:{type:E.SUPERSCRIPT,length:1,accent:!1},[p.MSUBSUP]:{type:E.SUBSCRIPT,length:2,accent:!1},[p.MUNDER]:{type:E.UNDERSCORE,length:1,accent:!0},[p.MOVER]:{type:E.OVERSCORE,length:1,accent:!0},[p.MUNDEROVER]:{type:E.UNDERSCORE,length:2,accent:!0}},v.CLASSIFY_FUNCTION_={[h.INTEGRAL]:"integral",[h.SUM]:"bigop",[h.PREFIXFUNC]:"prefix",[h.LIMFUNC]:"prefix",[h.SIMPLEFUNC]:"prefix",[h.COMPFUNC]:"prefix"},v.MATHJAX_FONTS={"-tex-caligraphic":d.CALIGRAPHIC,"-tex-caligraphic-bold":d.CALIGRAPHICBOLD,"-tex-calligraphic":d.CALIGRAPHIC,"-tex-calligraphic-bold":d.CALIGRAPHICBOLD,"-tex-oldstyle":d.OLDSTYLE,"-tex-oldstyle-bold":d.OLDSTYLEBOLD,"-tex-mathit":d.ITALIC};let to={};function no(e){return Array.from(e.textContent).map(T.stringEmpty)}function ro(e,n){const r=Array.from(e.textContent),o=[],i=v.getInstance(),s=e.ownerDocument;for(let e,t=0;e=r[t];t++){const r=i.getNodeFactory().makeLeafNode(e,d.UNKNOWN),a=i.identifierNode(r,d.UNKNOWN,"");n(a),o.push(a.xml(s))}return o}function oo(e){return ro(e,function(e){e.textContent.match(/\W/)||(e.type=E.NUMBER)})}function io(e){return ro(e,function(e){e.font=d.UNKNOWN,e.type=E.IDENTIFIER})}const so=[E.CASES,E.CELL,E.INTEGRAL,E.LINE,E.MATRIX,E.MULTILINE,E.OVERSCORE,E.ROOT,E.ROW,E.SQRT,E.SUBSCRIPT,E.SUPERSCRIPT,E.TABLE,E.UNDERSCORE,E.VECTOR];function ao(e){return to={},[e]}function co(e,t,n,r,o,i){r=r||so,o=o||{},i=i||function(e){return!1};var s=Ne(t);if(to[e]||(to[e]={}),to[e][s])return to[e][s];if(i(t)||n.indexOf(t.tagName)<0)return 0;t=function t(e,n,r,o,i,s){if(i(e)||-1<r.indexOf(e.tagName)||function(e,n){if(e.attributes){const r=g(e.attributes);for(let e,t=0;e=r[t];t++)if(n[e.nodeName]===e.nodeValue)return 1}}(e,o))return s;if(-1<n.indexOf(e.tagName)&&s++,!e.childNodes||0===e.childNodes.length)return s;const a=g(e.childNodes);return Math.max.apply(null,a.map(function(e){return t(e,n,r,o,i,s)}))}(t,n,er(r,n),o,i,0);return to[e][s]=t}function lo(e){return co("fraction",e,["fraction"],so,{},N.FUNCTIONS.fracNestDepth)}function uo(e,t,n){const r=lo(e),o=Array(r).fill(t);return n&&o.push(n),o.join(N.MESSAGES.regexp.JOINER_FRAC)}function ho(e){return T.singleton(uo(e,N.MESSAGES.MS.START,N.MESSAGES.MS.FRAC_V))}function po(e){return T.singleton(uo(e,N.MESSAGES.MS.END,N.MESSAGES.MS.FRAC_V),{kind:"LAST"})}function fo(e){return T.singleton(uo(e,N.MESSAGES.MS.FRAC_OVER),{})}function mo(e){return T.singleton(uo(e,N.MESSAGES.MS.START,N.MESSAGES.MS.FRAC_B))}function go(e){return T.singleton(uo(e,N.MESSAGES.MS.END,N.MESSAGES.MS.FRAC_B),{kind:"LAST"})}function Eo(e){e=lo(e);return T.singleton(1===e?N.MESSAGES.MS.FRAC_S:N.FUNCTIONS.combineNestedFraction(N.MESSAGES.MS.NEST_FRAC,N.FUNCTIONS.radicalNestDepth(e-1),N.MESSAGES.MS.FRAC_S))}function No(e){e=lo(e);return T.singleton(1===e?N.MESSAGES.MS.ENDFRAC:N.FUNCTIONS.combineNestedFraction(N.MESSAGES.MS.NEST_FRAC,N.FUNCTIONS.radicalNestDepth(e-1),N.MESSAGES.MS.ENDFRAC),{kind:"LAST"})}function So(e){e=lo(e);return T.singleton(1===e?N.MESSAGES.MS.FRAC_OVER:N.FUNCTIONS.combineNestedFraction(N.MESSAGES.MS.NEST_FRAC,N.FUNCTIONS.radicalNestDepth(e-1),N.MESSAGES.MS.FRAC_OVER))}function To(e){return N.FUNCTIONS.fracNestDepth(e)?[e]:[]}function Io(e,t,n){for(;e.parentNode;){var r=e.parentNode,o=r.parentNode;if(!o)break;var i=e.getAttribute&&e.getAttribute("role");(o.tagName===E.SUBSCRIPT&&e===r.childNodes[1]||o.tagName===E.TENSOR&&i&&(i===h.LEFTSUB||i===h.RIGHTSUB))&&(t=n.sub+N.MESSAGES.regexp.JOINER_SUBSUPER+t),(o.tagName===E.SUPERSCRIPT&&e===r.childNodes[1]||o.tagName===E.TENSOR&&i&&(i===h.LEFTSUPER||i===h.RIGHTSUPER))&&(t=n.sup+N.MESSAGES.regexp.JOINER_SUBSUPER+t),e=o}return t.trim()}function Ao(e){return T.singleton(Io(e,N.MESSAGES.MS.SUBSCRIPT,{sup:N.MESSAGES.MS.SUPER,sub:N.MESSAGES.MS.SUB}))}function bo(e){return T.singleton(Io(e,N.MESSAGES.MS.SUB,{sup:N.MESSAGES.MS.SUP,sub:N.MESSAGES.MS.SUB}))}function Ro(e){return T.singleton(Io(e,N.MESSAGES.MS.SUPERSCRIPT,{sup:N.MESSAGES.MS.SUPER,sub:N.MESSAGES.MS.SUB}))}function Oo(e){return T.singleton(Io(e,N.MESSAGES.MS.SUP,{sup:N.MESSAGES.MS.SUP,sub:N.MESSAGES.MS.SUB}))}function Co(e){const t=Io(e,"",{sup:N.MESSAGES.MS.SUPER,sub:N.MESSAGES.MS.SUB});return T.singleton(t?t.replace(new RegExp(N.MESSAGES.MS.SUB+"$"),N.MESSAGES.MS.SUBSCRIPT).replace(new RegExp(N.MESSAGES.MS.SUPER+"$"),N.MESSAGES.MS.SUPERSCRIPT):N.MESSAGES.MS.BASELINE)}function yo(e){e=Io(e,"",{sup:N.MESSAGES.MS.SUP,sub:N.MESSAGES.MS.SUB});return T.singleton(e||N.MESSAGES.MS.BASE)}function vo(e){return co("radical",e,["sqrt","root"],so,{})}function Lo(e,t,n){var r=vo(e),e=(e="sqrt"===e.tagName?"2":b("children/*[1]",e)[0].textContent.trim(),N.MESSAGES.MSroots[e]||"");return n=e?N.FUNCTIONS.combineRootIndex(n,e):n,1===r?n:N.FUNCTIONS.combineNestedRadical(t,N.FUNCTIONS.radicalNestDepth(r-1),n)}function Mo(e){return T.singleton(Lo(e,N.MESSAGES.MS.NESTED,N.MESSAGES.MS.STARTROOT))}function _o(e){return T.singleton(Lo(e,N.MESSAGES.MS.NESTED,N.MESSAGES.MS.ENDROOT))}function wo(e){return T.singleton(Lo(e,N.MESSAGES.MS.NESTED,N.MESSAGES.MS.ROOTINDEX))}function Do(e){return T.singleton(Lo(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.STARTROOT))}function Po(e){return T.singleton(Lo(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.ENDROOT))}function xo(e){return T.singleton(Lo(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.ROOTINDEX))}function Uo(e){return T.singleton(Lo(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.ROOT))}function Fo(e){return T.singleton(Lo(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.INDEX))}function ko(e){e=co("underscore",e,["underscore"],so,{},function(e){return e.tagName&&e.tagName===E.UNDERSCORE&&e.childNodes[0].childNodes[1].getAttribute("role")===h.UNDERACCENT});return T.singleton(Array(e).join(N.MESSAGES.MS.UNDER)+N.MESSAGES.MS.UNDERSCRIPT)}function Bo(e){return T.singleton(N.MESSAGES.MS.ENDSCRIPTS)}function Go(e){e=co("overscore",e,["overscore"],so,{},function(e){return e.tagName&&e.tagName===E.OVERSCORE&&e.childNodes[0].childNodes[1].getAttribute("role")===h.OVERACCENT});return T.singleton(Array(e).join(N.MESSAGES.MS.OVER)+N.MESSAGES.MS.OVERSCRIPT)}function Vo(e){if(e.tagName!==E.MATRIX||e.getAttribute("role")!==h.DETERMINANT)return[];const n=b("children/row/children/cell/children/*",e);for(let e,t=0;e=n[t];t++)if(e.tagName!==E.NUMBER){if(e.tagName===E.IDENTIFIER){const n=e.getAttribute("role");if(n===h.LATINLETTER||n===h.GREEKLETTER||n===h.OTHERLETTER)continue}return[]}return[e]}function Ho(){const e=e=>e.map(e=>"ancestor::"+e),t=e=>"not("+e+")",n=t(e(["subscript","superscript","tensor"]).join(" or ")),r=e(["relseq","multrel"]),o=e(["fraction","punctuation","fenced","sqrt","root"]);let i=[];for(let t,e=0;t=o[e];e++)i=i.concat(r.map(function(e){return t+"/"+e}));return[["ancestor::*/following-sibling::*",n,t(i.join(" | "))].join(" and ")]}function jo(e){if(!e.childNodes.length||!e.childNodes[0].childNodes.length||!e.childNodes[0].childNodes[0].childNodes.length)return T.singleton("");const t=e.childNodes[0].childNodes[0].childNodes[0].textContent;return T.singleton(t.match(/^\(.+\)$/)?t.slice(1,-1):t)}const qo=new Map([[3,"CSFleftsuperscript"],[4,"CSFleftsubscript"],[2,"CSFbaseline"],[1,"CSFrightsubscript"],[0,"CSFrightsuperscript"]]),Xo=new Map([[4,2],[3,3],[2,1],[1,4],[0,5]]);function Yo(o,i=!0){var s;for(const a of["11111","11110","11101","11100","10111","10110","10101","10100","01111","01110","01101","01100"]){let e="tensor"+a,[t,n,r]=function(e){const t=[];let n="",r="",o=parseInt(e,2);for(let e=0;e<5;e++){var i="children/*["+Xo.get(e)+"]";if(1&o){const t=qo.get(e%5);n="[t] "+t+"Verbose; [n] "+i+";"+n,r="[t] "+t+"Brief; [n] "+i+";"+r}else t.unshift("name("+i+')="empty"');o>>=1}return[t,n,r]}(a);o.defineRule(e,"default",n,"self::tensor",...t),i&&(o.defineRule(e,"brief",r,"self::tensor",...t),o.defineRule(e,"sbrief",r,"self::tensor",...t)),3&parseInt(a,2)&&(n+="; [t]"+(s=qo.get(2))+"Verbose",r+="; [t]"+s+"Brief",e+="-baseline",s="((.//*[not(*)])[last()]/@id)!=(((.//ancestor::fraction|ancestor::root|ancestor::sqrt|ancestor::cell|ancestor::line|ancestor::stree)[1]//*[not(*)])[last()]/@id)",o.defineRule(e,"default",n,"self::tensor",s,...t),i&&(o.defineRule(e,"brief",r,"self::tensor",s,...t),o.defineRule(e,"sbrief",r,"self::tensor",s,...t)))}}function $o(e){var t=Object.keys(N.MESSAGES.MSroots).length;if(!t)return[];if(t++,!e.childNodes||0===e.childNodes.length||!e.childNodes[0].childNodes)return[];var n=e.childNodes[0].childNodes[0].textContent;if(!/^\d+$/.test(n))return[];n=parseInt(n,10);return 1<n&&n<=t?[e]:[]}function Wo(e,t){let n=0;return function(){return N.NUMBERS.numericOrdinal(++n)+" "+t}}function Ko(e,t){let n=0;return function(){return N.NUMBERS.numberToOrdinal(++n,!1)+" "+t}}function zo(e){var t=Le(e,N.MESSAGES.MS.FRAC_OVER);return t.convertible&&t.enumerator&&t.denominator?[T.node(N.NUMBERS.numberToWords(t.enumerator),e.childNodes[0].childNodes[0],{separator:""}),T.stringAttr(N.NUMBERS.vulgarSep,{separator:""}),T.node(N.NUMBERS.numberToOrdinal(t.denominator,1!==t.enumerator),e.childNodes[0].childNodes[1])]:[T.node(t.content||"",e)]}function Qo(e){const t=g(e.parentNode.childNodes);return T.singleton(N.NUMBERS.numericOrdinal(t.indexOf(e)+1).toString())}function Jo(e){const t=Co(e);return t[0].speech=t[0].speech.replace(/-$/,""),t}function Zo(e){const t=yo(e);return t[0].speech=t[0].speech.replace(/-$/,""),t}function ei(e){const t=Ro(e);return t[0].speech=t[0].speech.replace(/^exposant/,"exposant gauche"),t}function ti(e){const t=Ao(e);return t[0].speech=t[0].speech.replace(/^indice/,"indice gauche"),t}function ni(e){const t=Oo(e);return t[0].speech=t[0].speech.replace(/^sup/,"sup gauche"),t}function ri(e){const t=bo(e);return t[0].speech=t[0].speech.replace(/^sub/,"sub gauche"),t}function oi(e,t,n){const r=lo(e),o=[...Array(r)].map(e=>t);return n&&o.unshift(n),o.join(N.MESSAGES.regexp.JOINER_FRAC)}function ii(e){return T.singleton(oi(e,N.MESSAGES.MS.START,N.MESSAGES.MS.FRAC_V))}function si(e){return T.singleton(oi(e,N.MESSAGES.MS.END,N.MESSAGES.MS.FRAC_V))}function ai(e){return T.singleton(oi(e,N.MESSAGES.MS.START,N.MESSAGES.MS.FRAC_B))}function ci(e){return T.singleton(oi(e,N.MESSAGES.MS.END,N.MESSAGES.MS.FRAC_B))}function li(e){e=lo(e);return 1===e?T.singleton(N.MESSAGES.MS.FRAC_S):T.singleton(N.FUNCTIONS.combineNestedFraction(N.FUNCTIONS.radicalNestDepth(e-1),N.MESSAGES.MS.NEST_FRAC,N.MESSAGES.MS.FRAC_S))}function ui(e){e=lo(e);return 1===e?T.singleton(N.MESSAGES.MS.ENDFRAC):T.singleton(N.FUNCTIONS.combineNestedFraction(N.FUNCTIONS.radicalNestDepth(e-1),N.MESSAGES.MS.NEST_FRAC,N.MESSAGES.MS.ENDFRAC))}function hi(e){e=lo(e);return 1===e?T.singleton(N.MESSAGES.MS.FRAC_OVER):T.singleton(N.FUNCTIONS.combineNestedFraction(N.FUNCTIONS.radicalNestDepth(e-1),N.MESSAGES.MS.NEST_FRAC,N.MESSAGES.MS.FRAC_OVER))}function di(e){return 1===b("children/*[1]",e)[0].toString().match(/[^>\u2062>]+<\/[^>]*>/g).length?[e]:[]}function pi(e,t,n){e=vo(e);return 1===e?n:N.FUNCTIONS.combineNestedRadical(N.FUNCTIONS.radicalNestDepth(e-1),t,n)}function fi(e){return T.singleton(pi(e,N.MESSAGES.MS.NESTED,N.MESSAGES.MS.STARTROOT))}function mi(e){return T.singleton(pi(e,N.MESSAGES.MS.NESTED,N.MESSAGES.MS.ENDROOT))}function gi(e){return T.singleton(pi(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.STARTROOT))}function Ei(e){return T.singleton(pi(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.ENDROOT))}function Ni(e){return T.singleton(pi(e,N.MESSAGES.MS.NEST_ROOT,N.MESSAGES.MS.ROOT))}function Si(e,t){return e=b("children/*[1]",e)[0].textContent.trim(),N.MESSAGES.MSroots[e]||e+"ì œê³±ê·¼"||t}function Ti(e){return T.singleton(Si(e,N.MESSAGES.MS.ROOTINDEX))}function Ii(e){return T.singleton(Si(e,N.MESSAGES.MS.ROOTINDEX))}function Ai(e){return T.singleton(Si(e,N.MESSAGES.MS.INDEX))}function bi(e){e=b("children/*",e);return T.singleton(N.NUMBERS.wordOrdinal(e.length))}function Ri(e){e=b("children/*",e);return T.singleton(N.NUMBERS.wordOrdinal(e.length-1))}function Oi(e){var t=b("children/*",e),e=b("content/*",e);return T.singleton(N.NUMBERS.wordOrdinal(t.length-e.length))}function Ci(e,t){const n=e;let r=0;return function(){var e=I.create({text:function(e){for(;e;){if("unit"===e.getAttribute("role"))return 1;var t=e.tagName,n=b("children/*",e);e=-1!==yi.indexOf(t)?n[0]:n[n.length-1]}return}(n[r])&&function(e){for(;e;){if("unit"===e.getAttribute("role"))return 1;e=b("children/*",e)[0]}return}(n[r+1])?N.MESSAGES.unitTimes:""},{});return r++,[e]}}const yi=[E.SUPERSCRIPT,E.SUBSCRIPT,E.OVERSCORE,E.UNDERSCORE];function vi(e){for(;e;){if("number"===e.tagName&&"1"===e.textContent)return[e];if("infixop"!==e.tagName||"multiplication"!==e.getAttribute("role")&&"implicit"!==e.getAttribute("role"))return[];e=b("children/*",e)[0]}return[]}function Li(e){e=lo(e);return T.singleton(new Array(e).join(N.MESSAGES.MS.FRACTION_REPEAT)+N.MESSAGES.MS.FRACTION_START)}function Mi(e){e=lo(e);return T.singleton(new Array(e).join(N.MESSAGES.MS.FRACTION_REPEAT)+N.MESSAGES.MS.FRACTION_END)}function _i(e){e=lo(e);return T.singleton(new Array(e).join(N.MESSAGES.MS.FRACTION_REPEAT)+N.MESSAGES.MS.FRACTION_OVER)}function wi(e){e=lo(e);return T.singleton(new Array(e).join(N.MESSAGES.MS.FRACTION_REPEAT)+"â ¸"+N.MESSAGES.MS.FRACTION_OVER)}function Di(e){return N.MESSAGES.regexp.HYPER===lo(e).toString()?[e]:[]}function Pi(e,t){e=function e(t,n){const r=n||0;return t.parentNode?e(t.parentNode,"root"===t.tagName||"sqrt"===t.tagName?r+1:r):r}(e);return T.singleton(1===e?t:new Array(e).join(N.MESSAGES.MS.NESTED)+t)}function xi(e){return Pi(e,N.MESSAGES.MS.STARTROOT)}function Ui(e){return Pi(e,N.MESSAGES.MS.ENDROOT)}function Fi(e){return Pi(e,N.MESSAGES.MS.ROOTINDEX)}function ki(e,c){var t;const l=e.slice(0);let u=!0;const h=e[0].parentNode.parentNode,n=null==(t=h.getAttribute("annotation"))?void 0:t.match(/depth:(\d+)/),d=n?n[1]:"";let p;return p=0<e.length?b("./content/*",h):[],function(){const e=p.shift(),t=l.shift(),n=l[0],r=c?[I.create({text:c},{translate:!0})]:[];if(!e)return r;const o=t?Io(t,"",{sup:N.MESSAGES.MS.SUPER,sub:N.MESSAGES.MS.SUB}):"",i=t&&"EMPTY"!==R(t)||u&&h&&h.previousSibling?[I.create({text:N.MESSAGES.regexp.SPACE+o},{})]:[],s=n&&"EMPTY"!==R(n)||!p.length&&h&&h.nextSibling?[I.create({text:N.MESSAGES.regexp.SPACE},{})]:[],a=m.evaluateNode(e);return a.unshift(new I({text:"",layout:"beginrel"+d})),a.push(new I({text:"",layout:"endrel"+d})),u=!1,r.concat(i,a,s)}}function Bi(e,s){const a=e.slice(0);let c;return c=0<e.length?b("../../content/*",e[0]):[],function(){const e=a.shift(),t=a[0],n=c.shift(),r=s?[I.create({text:s},{translate:!0})]:[];if(!n)return r;var o=e&&"NUMBER"===R(e),i=t&&"NUMBER"===R(t);return r.concat(o&&i&&n.getAttribute("role")===h.SPACE?[I.create({text:N.MESSAGES.regexp.SPACE},{})]:[])}}function Gi(e,t){const n=Fn(e,t),r=null==(t=e[0].parentNode.parentNode.getAttribute("annotation"))?void 0:t.match(/depth:(\d+)/),o=r?r[1]:"";return function(){const e=n();return e.unshift(new I({text:"",layout:"beginrel"+o})),e.push(new I({text:"",layout:"endrel"+o})),e}}O.getInstance().setCorrection("enlargeFence",function(e){if(1===e.length)return"â  "+e;const t=e.split("");return t.every(function(e){return"â ³"===e})?"â  "+t.join("â  "):e.slice(0,-1)+"â  "+e.slice(-1)}),O.getInstance().setCorrection("ignoreEnglish",function(e){return ke(e,N.ALPHABETS.languagePrefix.english)}),O.getInstance().setCorrection("literal",function(e){return Array.from(e).map(e=>m.getInstance().evaluator(e,m.getInstance().dynamicCstr)).join("")});let Vi=!1;class Hi{constructor(e,t,n){this.domain=e,this.name=t,this.func=n,this.active=!1}annotate(e){e.childNodes.forEach(this.annotate.bind(this)),e.contentNodes.forEach(this.annotate.bind(this)),e.addAnnotation(this.domain,this.func(e))}}class ji{constructor(e,t,n,r={}){this.domain=e,this.name=t,this.func=n,this.def=r,this.active=!1}visit(n,e){let r=this.func(n,e);n.addAnnotation(this.domain,r[0]);for(let e,t=0;e=n.childNodes[t];t++)r=this.visit(e,r[1]);for(let e,t=0;e=n.contentNodes[t];t++)r=this.visit(e,r[1]);return r}}const qi=new Map,Xi=new Map;function Yi(e){var t=e.domain+":"+e.name;(e instanceof Hi?qi:Xi).set(t,e)}function $i(e,t){const n=e+":"+t,r=qi.get(n)||Xi.get(n);r&&(r.active=!0)}class Wi{constructor(e,t,n,r){this.name=e,this.dynamicCstr=t,this.precondition=n,this.action=r,this.context=null}toString(){return this.name+" | "+this.dynamicCstr.toString()+" | "+this.precondition.toString()+" ==> "+this.action.toString()}}(o=un=un||{}).NODE="NODE",o.MULTI="MULTI",o.TEXT="TEXT",o.PERSONALITY="PERSONALITY";class Ki{static grammarFromString(e){return O.parseInput(e)}static fromString(e){const t={type:function(e){switch(e){case"[n]":return un.NODE;case"[m]":return un.MULTI;case"[t]":return un.TEXT;case"[p]":return un.PERSONALITY;default:throw"Parse error: "+e}}(e.substring(0,3))};let n=e.slice(3).trim();if(!n)throw new Ji("Missing content.");switch(t.type){case un.TEXT:if('"'===n[0]){const e=Zi(n,"\\(")[0].trim();if('"'!==e.slice(-1))throw new Ji("Invalid string syntax.");t.content=e,-1===(n=n.slice(e.length).trim()).indexOf("(")&&(n="");break}case un.NODE:case un.MULTI:{const e=n.indexOf(" (");if(-1===e){t.content=n.trim(),n="";break}t.content=n.substring(0,e).trim(),n=n.slice(e).trim()}}if(n){const e=Ki.attributesFromString(n);e.grammar&&(t.grammar=e.grammar,delete e.grammar),Object.keys(e).length&&(t.attributes=e)}return new Ki(t)}static attributesFromString(e){if("("!==e[0]||")"!==e.slice(-1))throw new Ji("Invalid attribute expression: "+e);const t={},n=Zi(e.slice(1,-1),",");for(const e of n){const n=e.indexOf(":");var r,o;-1===n?t[e.trim()]="true":(r=e.substring(0,n).trim(),o=e.slice(n+1).trim(),t[r]=r===Fe?Ki.grammarFromString(o):o)}return t}constructor({type:e,content:t,attributes:n,grammar:r}){this.type=e,this.content=t,this.attributes=n,this.grammar=r}toString(){var e="",t=(e=(e+=function(e){switch(e){case un.NODE:return"[n]";case un.MULTI:return"[m]";case un.TEXT:return"[t]";case un.PERSONALITY:return"[p]";default:throw"Unknown type error: "+e}}(this.type))+(this.content?" "+this.content:""),this.attributesToString());return e+=t?" "+t:""}grammarToString(){return this.getGrammar().join(":")}getGrammar(){if(!this.grammar)return[];const e=[];for(var[t,n]of Object.entries(this.grammar))e.push(!0===n?t:!1===n?"!"+t:t+"="+n);return e}attributesToString(){const e=this.getAttributes(),t=this.grammarToString();return t&&e.push("grammar:"+t),0<e.length?"("+e.join(", ")+")":""}getAttributes(){if(!this.attributes)return[];const e=[];for(var[t,n]of Object.entries(this.attributes))e.push("true"===n?t:t+":"+n);return e}}class zi{static fromString(e){const n=Zi(e,";").filter(function(e){return e.match(/\S/)}).map(function(e){return e.trim()}),r=[];for(let e=0,t=n.length;e<t;e++){var o=Ki.fromString(n[e]);o&&r.push(o)}return zi.naiveSpan(r),new zi(r)}static naiveSpan(n){var r;let o=!1;for(let e,t=0;e=n[t];t++)o&&(e.type!==un.TEXT||'"'!==e.content[0]&&!e.content.match(/^CSF/))||!o&&e.type===un.PERSONALITY||(o?null!=(r=e.attributes)&&r.span||((r=n[t+1])&&r.type!==un.NODE||zi.addNaiveSpan(e,r?r.content:"LAST")):o=!0)}static addNaiveSpan(e,t){e.attributes||(e.attributes={}),e.attributes.span=t}constructor(e){this.components=e}toString(){return this.components.map(function(e){return e.toString()}).join("; ")}}class Qi{static constraintValue(n,r){for(let e,t=0;e=r[t];t++)if(n.match(e))return++t;return 0}toString(){var e=this.constraints.join(", ");return`${this.query}, ${e} (${this.priority}, ${this.rank})`}constructor(e,...t){this.query=e,this.constraints=t;var[e,t]=this.presetPriority();this.priority=e?t:this.calculatePriority()}calculatePriority(){const e=Qi.constraintValue(this.query,Qi.queryPriorities);if(!e)return 0;var t=this.query.match(/^self::.+\[(.+)\]/);let n=0;if(null!=t&&t.length&&t[1]){const e=t[1];n=Qi.constraintValue(e,Qi.attributePriorities)}return 100*e+10*n}presetPriority(){if(!this.constraints.length)return[!1,0];var e=this.constraints[this.constraints.length-1].match(/^priority=(.*$)/);if(!e)return[!1,0];this.constraints.pop();e=parseFloat(e[1]);return[!0,isNaN(e)?0:e]}}Qi.queryPriorities=[/^self::\*$/,/^self::[\w-]+$/,/^self::\*\[.+\]$/,/^self::[\w-]+\[.+\]$/],Qi.attributePriorities=[/^@[\w-]+$/,/^@[\w-]+!=".+"$/,/^not\(contains\(@[\w-]+,\s*".+"\)\)$/,/^contains\(@[\w-]+,".+"\)$/,/^@[\w-]+=".+"$/];class Ji extends ee{constructor(e){super(e),this.name="RuleError"}}function Zi(e,t){const n=[];let r="";for(;""!==e;){var o=e.search(t);if(-1===o){if((e.match(/"/g)||[]).length%2!=0)throw new Ji("Invalid string in expression: "+e);n.push(r+e),e=r=""}else if((e.substring(0,o).match(/"/g)||[]).length%2==0)n.push(r+e.substring(0,o)),r="",e=e.substring(o+1);else{const t=e.substring(o).search('"');if(-1===t)throw new Ji("Invalid string in expression: "+e);r+=e.substring(0,o+t+1),e=e.substring(o+t+1)}}return r&&n.push(r),n}class es{constructor(e,t){this.prefix=e,this.store=t}add(e,t){this.checkCustomFunctionSyntax_(e)&&(this.store[e]=t)}addStore(n){var r=Object.keys(n.store);for(let e,t=0;e=r[t];t++)this.add(e,n.store[e])}lookup(e){return this.store[e]}checkCustomFunctionSyntax_(e){var t=new RegExp("^"+this.prefix);return!!e.match(t)||(console.error("FunctionError: Invalid function name. Expected prefix "+this.prefix),!1)}}class ts extends es{constructor(){super("CQF",{})}}class ns extends es{constructor(){super("CSF",{})}}class rs extends es{constructor(){super("CTF",{})}}class os extends es{constructor(){super("CGF",{})}}class is{constructor(){this.customQueries=new ts,this.customStrings=new ns,this.contextFunctions=new rs,this.customGenerators=new os}applyCustomQuery(e,t){const n=this.customQueries.lookup(t);return n?n(e):null}applySelector(e,t){return this.applyCustomQuery(e,t)||b(t,e)}applyQuery(e,t){e=this.applySelector(e,t);return 0<e.length?e[0]:null}applyConstraint(e,t){return!!this.applyQuery(e,t)||function(e,t){let n;try{n=se(e,t,ne.result.BOOLEAN_TYPE)}catch(e){return!1}return n.booleanValue}(t,e)}constructString(e,t){const n=this.constructString_(e,t);return Array.isArray(n)?n.map(e=>e.speech).join(""):n}constructSpan(e,t,n){t=this.constructString_(e,t);if(Array.isArray(t)){const e=t[t.length-1];return e.attributes=Object.assign({},n,e.attributes),t}return[T.node(t,e,n)]}constructString_(t,n){if(!n)return"";if('"'===n.charAt(0))return n.slice(1,-1);const e=this.customStrings.lookup(n);if(e)return e(t);{var r=n,n=t;let e;try{e=se(r,n,ne.result.STRING_TYPE)}catch(r){return""}return e.stringValue}}parse(e){var t=Array.isArray(e)?e:Object.entries(e);for(const e of t)switch(e[0].slice(0,3)){case"CQF":this.customQueries.add(e[0],e[1]);break;case"CSF":this.customStrings.add(e[0],e[1]);break;case"CTF":this.contextFunctions.add(e[0],e[1]);break;case"CGF":this.customGenerators.add(e[0],e[1]);break;default:console.error("FunctionError: Invalid function name "+e[0])}}}class ss{static compareStaticConstraints_(n,r){if(n.length!==r.length)return!1;for(let e,t=0;e=n[t];t++)if(-1===r.indexOf(e))return!1;return!0}static comparePreconditions_(e,t){e=e.precondition,t=t.precondition;return e.query===t.query&&ss.compareStaticConstraints_(e.constraints,t.constraints)}constructor(){this.context=new is,this.parseOrder=l.DEFAULT_ORDER,this.parser=new H(this.parseOrder),this.locale=l.DEFAULT_VALUES[c.LOCALE],this.modality=l.DEFAULT_VALUES[c.MODALITY],this.domain="",this.initialized=!1,this.inherits=null,this.kind="standard",this.customTranscriptions={},this.preconditions=new Map,this.speechRules_=[],this.rank=0,this.parseMethods={Rule:this.defineRule,Generator:this.generateRules,Action:this.defineAction,Precondition:this.definePrecondition,Ignore:this.ignoreRules}}defineRule(e,t,n,r,...o){var i=this.parseAction(n),o=this.parsePrecondition(r,o),s=this.parseCstr(t);if(!(i&&o&&s))return console.error(`Rule Error: ${r}, (${t}): `+n),null;const a=new Wi(e,s,o,i);return a.precondition.rank=this.rank++,this.addRule(a),a}addRule(e){e.context=this.context,this.speechRules_.unshift(e)}deleteRule(e){e=this.speechRules_.indexOf(e);-1!==e&&this.speechRules_.splice(e,1)}findRule(n){for(let e,t=0;e=this.speechRules_[t];t++)if(n(e))return e;return null}findAllRules(e){return this.speechRules_.filter(e)}evaluateDefault(e){const t=e.textContent.slice(0);return t.match(/^\s+$/)?this.evaluateWhitespace(t):this.evaluateString(t)}evaluateWhitespace(e){return[]}evaluateCustom(e){e=this.customTranscriptions[e];return void 0!==e?I.create({text:e},{adjust:!0,translate:!1}):null}evaluateCharacter(e){return this.evaluateCustom(e)||I.create({text:e},{adjust:!0,translate:!0})}removeDuplicates(n){for(let e,t=this.speechRules_.length-1;e=this.speechRules_[t];t--)e!==n&&n.dynamicCstr.equal(e.dynamicCstr)&&ss.comparePreconditions_(e,n)&&this.speechRules_.splice(t,1)}getSpeechRules(){return this.speechRules_}setSpeechRules(e){this.speechRules_=e}getPreconditions(){return this.preconditions}parseCstr(t){try{return this.parser.parse(this.locale+"."+this.modality+(this.domain?"."+this.domain:"")+"."+t)}catch(e){if("RuleError"===e.name)return console.error("Rule Error ",`Illegal Dynamic Constraint: ${t}.`,e.message),null;throw e}}parsePrecondition(t,n){try{const r=this.parsePrecondition_(t);t=r[0];let e=r.slice(1);for(const t of n)e=e.concat(this.parsePrecondition_(t));return new Qi(t,...e)}catch(e){if("RuleError"===e.name)return console.error("Rule Error ",`Illegal preconditions: ${t}, ${n}.`,e.message),null;throw e}}parseAction(t){try{return zi.fromString(t)}catch(e){if("RuleError"===e.name)return console.error("Rule Error ",`Illegal action: ${t}.`,e.message),null;throw e}}parse(e){this.modality=e.modality||this.modality,this.locale=e.locale||this.locale,this.domain=e.domain||this.domain,this.context.parse(e.functions||[]),"actions"!==e.kind&&(this.kind=e.kind||this.kind,this.inheritRules()),this.parseRules(e.rules||[])}parseRules(n){for(let e,t=0;e=n[t];t++){const n=e[0],r=this.parseMethods[n];n&&r&&r.apply(this,e.slice(1))}}generateRules(e){const t=this.context.customGenerators.lookup(e);t&&t(this)}defineAction(n,e){let r;try{r=zi.fromString(e)}catch(n){if("RuleError"===n.name)return void console.error("Action Error ",e,n.message);throw n}const t=this.getFullPreconditions(n);if(t){this.ignoreRules(n);const o=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));t.conditions.forEach(([e,t])=>{e=this.parseCstr(e.toString().replace(o,""));this.addRule(new Wi(n,e,t,r))})}else console.error("Action Error: No precondition for action "+n)}getFullPreconditions(e){var t=this.preconditions.get(e);return t||!this.inherits?t:this.inherits.getFullPreconditions(e)}definePrecondition(e,t,n,...r){const o=this.parsePrecondition(n,r),i=this.parseCstr(t);o&&i?(o.rank=this.rank++,this.preconditions.set(e,new as(i,o))):console.error(`Precondition Error: ${n}, (${t})`)}inheritRules(){if(this.inherits&&this.inherits.getSpeechRules().length){const n=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));this.inherits.getSpeechRules().forEach(e=>{var t=this.parseCstr(e.dynamicCstr.toString().replace(n,""));this.addRule(new Wi(e.name,t,e.precondition,e.action))})}}ignoreRules(t,...n){let r=this.findAllRules(e=>e.name===t);if(n.length){let e=[];for(const t of n){const n=this.parseCstr(t);for(const t of r)n.equal(t.dynamicCstr)?this.deleteRule(t):e.push(t);r=e,e=[]}}else r.forEach(this.deleteRule.bind(this))}parsePrecondition_(e){const t=this.context.customGenerators.lookup(e);return t?t():[e]}}class as{constructor(e,t){this.base=e,this._conditions=[],this.constraints=[],this.allCstr={},this.constraints.push(e),this.addCondition(e,t)}get conditions(){return this._conditions}addConstraint(t){if(!this.constraints.filter(e=>e.equal(t)).length){this.constraints.push(t);const r=[];for(var[e,n]of this.conditions)this.base.equal(e)&&r.push([t,n]);this._conditions=this._conditions.concat(r)}}addBaseCondition(e){this.addCondition(this.base,e)}addFullCondition(t){this.constraints.forEach(e=>this.addCondition(e,t))}addCondition(e,t){var n=e.toString()+" "+t.toString();this.allCstr.condStr||(this.allCstr[n]=!0,this._conditions.push([e,t]))}}class cs extends ss{constructor(){super(),this.annotators=[],this.parseMethods.Alias=this.defineAlias,this.parseMethods.SpecializedRule=this.defineSpecializedRule,this.parseMethods.Specialized=this.defineSpecialized}initialize(){this.initialized||(this.annotations(),this.initialized=!0)}annotations(){for(let e,t=0;e=this.annotators[t];t++)$i(this.domain,e)}defineAlias(e,t,...n){var r=this.parsePrecondition(t,n);if(r){const o=this.preconditions.get(e)||this.getFullPreconditions(e);o?o.addFullCondition(r):console.error("Alias Error: No precondition by the name of "+e)}else console.error(`Precondition Error: ${t} `+n)}defineRulesAlias(t,n,...r){const e=this.findAllRules(function(e){return e.name===t});if(0===e.length)throw new Ji("Rule with name "+t+" does not exist.");const o=[];e.forEach(e=>{(e=>{var n=e.dynamicCstr.toString(),r=e.action.toString();for(let e,t=0;e=o[t];t++)if(e.action===r&&e.cstr===n)return!1;return o.push({cstr:n,action:r}),!0})(e)&&this.addAlias_(e,n,r)})}defineSpecializedRule(t,e,n,r){const o=this.parseCstr(e),i=this.findRule(e=>e.name===t&&o.equal(e.dynamicCstr)),s=this.parseCstr(n);if(!i&&r)throw new Ji("Rule named "+t+" with style "+e+" does not exist.");n=r?zi.fromString(r):i.action,e=new Wi(i.name,s,i.precondition,n);this.addRule(e)}defineSpecialized(e,t,n){var r=this.parseCstr(n);if(r){const o=this.preconditions.get(e);o?o.addConstraint(r):console.error("Alias Error: No precondition by the name of "+e)}else console.error("Dynamic Constraint Error: "+n)}evaluateString(n){const r=[];if(n.match(/^\s+$/))return r;let o=this.matchNumber(n);if(o&&o.length===n.length)return r.push(this.evaluateCharacter(o.number)),r;var i=n.replace(/\s/g," ").split(" ").filter(e=>e);for(let t,e=0;t=i[e];e++)if(1===t.length)r.push(this.evaluateCharacter(t));else if(t.match(new RegExp("^["+N.MESSAGES.regexp.TEXT+"]+$")))r.push(this.evaluateCharacter(t));else{let e=t;for(;e;){o=this.matchNumber(e);const n=e.match(new RegExp("^["+N.MESSAGES.regexp.TEXT+"]+"));if(o)r.push(this.evaluateCharacter(o.number)),e=e.substring(o.length);else if(n)r.push(this.evaluateCharacter(n[0])),e=e.substring(n[0].length);else{const n=Array.from(e),o=n[0];r.push(this.evaluateCharacter(o)),e=n.slice(1).join("")}}}return r}parse(e){super.parse(e),this.annotators=e.annotators||[]}addAlias_(e,t,n){const r=this.parsePrecondition(t,n),o=new Wi(e.name,e.dynamicCstr,r,e.action);o.name=e.name,this.addRule(o)}matchNumber(e){const t=e.match(new RegExp("^"+N.MESSAGES.regexp.NUMBER)),n=e.match(new RegExp("^"+cs.regexp.NUMBER));if(!t&&!n)return null;var r=n&&n[0]===e;return t&&t[0]===e||!r?t?{number:t[0],length:t[0].length}:null:{number:n[0].replace(new RegExp(cs.regexp.DIGIT_GROUP,"g"),"X").replace(new RegExp(cs.regexp.DECIMAL_MARK,"g"),N.MESSAGES.regexp.DECIMAL_MARK).replace(/X/g,N.MESSAGES.regexp.DIGIT_GROUP.replace(/\\/g,"")),length:n[0].length}}}cs.regexp={NUMBER:"((\\d{1,3})(?=(,| ))((,| )\\d{3})*(\\.\\d+)?)|^\\d*\\.\\d+|^\\d+",DECIMAL_MARK:"\\.",DIGIT_GROUP:","};class ls extends cs{constructor(){super(...arguments),this.modality="braille",this.customTranscriptions={"â‹Š":"â ˆâ ¡â ³"}}evaluateString(e){const t=[],n=Array.from(e);for(let e=0;e<n.length;e++)t.push(this.evaluateCharacter(n[e]));return t}annotations(){for(let e,t=0;e=this.annotators[t];t++)$i(this.locale,e)}}class us extends ls{constructor(){super(...arguments),this.locale="euro",this.customTranscriptions={},this.customCommands={"\\cdot":"*","\\lt":"<","\\gt":">"},this.lastSpecial=!1,this.specialChars=["^","_","{","}"]}evaluateString(e){e=e.split(/(\\[a-z]+|\\{|\\}|\\\\)/i),e=this.cleanup(e);return super.evaluateString(e)}cleanup(e){const t=[];let n=!1,r=null;for(var o of e)if(o.match(/^\\/)){"\\text"===o&&(n=!0),this.addSpace(S.LatexCommands.get(o))&&t.push(" ");const e=(o=this.customCommands[o]||o).match(/^\\/);e&&o.match(/^\\[a-zA-Z]+$/)&&r&&t.push(" "),r=e?o:null,t.push(o)}else{const e=o.split("");for(const i of e)n?(t.push(i),n="}"!==i,r=null):i.match(/[a-z]/i)&&r?(r=null,t.push(" "),t.push(i)):i.match(/\s/)||(this.addSpace(i)&&t.push(" "),t.push(i),r=null)}return t.join("")}addSpace(e){if(!e)return!1;if(-1!==this.specialChars.indexOf(e))return!(this.lastSpecial=!0);if(this.lastSpecial)return this.lastSpecial=!1;e=S.Meaning.get(e);return e.type===E.OPERATOR||e.type===E.RELATION||e.type===E.PUNCTUATION&&e.role===h.COLON}}(dn=hn=hn||{}).ROOT="root",dn.DYNAMIC="dynamic",dn.QUERY="query",dn.BOOLEAN="boolean",dn.STATIC="static";class hs{constructor(e,t){this.constraint=e,this.test=t,this.children_={},this.kind=hn.ROOT}getConstraint(){return this.constraint}getKind(){return this.kind}applyTest(e){return this.test(e)}addChild(e){var t=e.getConstraint(),n=this.children_[t];return this.children_[t]=e,n}getChild(e){return this.children_[e]}getChildren(){const e=[];for(const t of Object.values(this.children_))e.push(t);return e}findChildren(e){const t=[];for(const n of Object.values(this.children_))n.applyTest(e)&&t.push(n);return t}removeChild(e){delete this.children_[e]}toString(){return this.constraint}}class ds extends hs{constructor(e,t){super(e,t),this.rule_=null,this.kind=hn.STATIC}getRule(){return this.rule_}setRule(e){this.rule_&&u.getInstance().output("Replacing rule "+this.rule_+" with "+e),this.rule_=e}toString(){return this.getRule()?this.constraint+"\n==> "+this.getRule().action:this.constraint}}function ps(e,t,n){switch(e){case hn.ROOT:return new fs;case hn.DYNAMIC:return new ms(t);case hn.QUERY:return new Ns(t,n);case hn.BOOLEAN:return new Ss(t,n);default:return null}}class fs extends hs{constructor(){super("",()=>!0),this.kind=hn.ROOT}}class ms extends hs{constructor(t){super(t,e=>e===t),this.kind=hn.DYNAMIC}}const gs={"=":(e,t)=>e===t,"!=":(e,t)=>e!==t,"<":(e,t)=>e<t,">":(e,t)=>t<e,"<=":(e,t)=>e<=t,">=":(e,t)=>t<=e};function Es(e){if(e.match(/^self::\*$/))return e=>!0;if(e.match(/^self::\w+$/)){const n=e.slice(6).toUpperCase();return e=>e.tagName&&R(e)===n}if(e.match(/^self::\w+:\w+$/)){const r=e.split(":"),o=oe(r[2]);if(!o)return null;const i=r[3].toUpperCase();return e=>e.localName&&e.localName.toUpperCase()===i&&e.namespaceURI===o}if(e.match(/^@\w+$/)){const s=e.slice(1);return e=>e.hasAttribute&&e.hasAttribute(s)}if(e.match(/^@\w+="[\w\d ]+"$/)){const a=e.split("="),c=a[0].slice(1),l=a[1].slice(1,-1);return e=>e.hasAttribute&&e.hasAttribute(c)&&e.getAttribute(c)===l}if(e.match(/^@\w+!="[\w\d ]+"$/)){const u=e.split("!="),h=u[0].slice(1),d=u[1].slice(1,-1);return e=>!e.hasAttribute||!e.hasAttribute(h)||e.getAttribute(h)!==d}if(e.match(/^contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)$/)){const p=e.split('"')[1];return e=>!!O.getInstance().getParameter(p)}if(e.match(/^not\(\s*contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)\s*\)$/)){const f=e.split('"')[1];return e=>!O.getInstance().getParameter(f)}if(e.match(/^name\(\.\.\/\.\.\)="\w+"$/)){const m=e.split('"')[1].toUpperCase();return e=>{var t;return(null==(t=null==(t=e.parentNode)?void 0:t.parentNode)?void 0:t.tagName)&&R(e.parentNode.parentNode)===m}}if(e.match(/^count\(preceding-sibling::\*\)=\d+$/)){const g=e.split("="),E=parseInt(g[1],10);return e=>{var t;return(null==(t=e.parentNode)?void 0:t.childNodes[E])===e}}if(e.match(/^.+\[@category!?=".+"\]$/)){let[,n,r,o]=e.match(/^(.+)\[@category(!?=)"(.+)"\]$/);var t=o.match(/^unit:(.+)$/);let i="";return t&&(o=t[1],i=":unit"),e=>{var t=b(n,e)[0];if(t){const e=Mn(t.textContent+i);return"="===r?e===o:e!==o}return!1}}if(e.match(/^string-length\(.+\)\W+\d+/)){const[,N,S,T]=e.match(/^string-length\((.+)\)(\W+)(\d+)/),I=gs[S]||gs["="],A=parseInt(T,10);return e=>{e=b(N,e)[0];return!!e&&I(Array.from(e.textContent).length,A)}}return null}class Ns extends ds{constructor(e,t){super(e,Es(e)),this.context=t,this.kind=hn.QUERY}applyTest(e){return this.test?this.test(e):this.context.applyQuery(e,this.constraint)===e}}class Ss extends ds{constructor(e,t){super(e,Es(e)),this.context=t,this.kind=hn.BOOLEAN}applyTest(e){return this.test?this.test(e):this.context.applyConstraint(e,this.constraint)}}class Ts{static collectRules_(e){const t=[];let n=[e];for(;n.length;){const e=n.shift();if(e.getKind()===hn.QUERY||e.getKind()===hn.BOOLEAN){const n=e.getRule();n&&t.unshift(n)}n=n.concat(e.getChildren())}return t}static printWithDepth_(e,n,r){r+=new Array(n+2).join(n.toString())+": "+e.toString()+"\n";var o=e.getChildren();for(let e,t=0;e=o[t];t++)r=Ts.printWithDepth_(e,n+1,r);return r}static order_(e){const t=e.getChildren();if(!t.length)return 0;e=Math.max.apply(null,t.map(Ts.order_));return Math.max(t.length,e)}constructor(){this.root=ps(hn.ROOT,"",null)}addRule(e){let n=this.root;var r=e.context,o=e.dynamicCstr.getValues();for(let e=0,t=o.length;e<t;e++)n=this.addNode_(n,o[e],hn.DYNAMIC,r);n=this.addNode_(n,e.precondition.query,hn.QUERY,r);var i=e.precondition.constraints;for(let e=0,t=i.length;e<t;e++)n=this.addNode_(n,i[e],hn.BOOLEAN,r);n.setRule(e)}lookupRules(t,e){let n=[this.root];const r=[];for(;e.length;){const t=e.shift(),r=[];for(;n.length;)n.shift().getChildren().forEach(e=>{e.getKind()===hn.DYNAMIC&&-1===t.indexOf(e.getConstraint())||r.push(e)});n=r.slice()}for(;n.length;){const e=n.shift();if(e.getRule){const t=e.getRule();t&&r.push(t)}var o=e.findChildren(t);n=n.concat(o)}return r}hasSubtrie(n){let r=this.root;for(let e=0,t=n.length;e<t;e++){var o=n[e];if(!(r=r.getChild(o)))return!1}return!0}toString(){return Ts.printWithDepth_(this.root,0,"")}collectRules(e=this.root){return Ts.collectRules_(e)}order(){return Ts.order_(this.root)}enumerate(e){return this.enumerate_(this.root,e)}byConstraint(e){let t=this.root;for(;e.length&&t;){var n=e.shift();t=t.getChild(n)}return t||null}enumerate_(e,n){n=n||{};var r=e.getChildren();for(let e,t=0;e=r[t];t++)e.kind===hn.DYNAMIC&&(n[e.getConstraint()]=this.enumerate_(e,n[e.getConstraint()]));return n}addNode_(e,t,n,r){let o=e.getChild(t);return o||(o=ps(n,t,r),e.addChild(o)),o}}(a=i=i||{})[a.ENTER=13]="ENTER",a[a.ESC=27]="ESC",a[a.SPACE=32]="SPACE",a[a.PAGE_UP=33]="PAGE_UP",a[a.PAGE_DOWN=34]="PAGE_DOWN",a[a.END=35]="END",a[a.HOME=36]="HOME",a[a.LEFT=37]="LEFT",a[a.UP=38]="UP",a[a.RIGHT=39]="RIGHT",a[a.DOWN=40]="DOWN",a[a.TAB=9]="TAB",a[a.LESS=188]="LESS",a[a.GREATER=190]="GREATER",a[a.DASH=189]="DASH",a[a.ZERO=48]="ZERO",a[a.ONE=49]="ONE",a[a.TWO=50]="TWO",a[a.THREE=51]="THREE",a[a.FOUR=52]="FOUR",a[a.FIVE=53]="FIVE",a[a.SIX=54]="SIX",a[a.SEVEN=55]="SEVEN",a[a.EIGHT=56]="EIGHT",a[a.NINE=57]="NINE",a[a.A=65]="A",a[a.B=66]="B",a[a.C=67]="C",a[a.D=68]="D",a[a.E=69]="E",a[a.F=70]="F",a[a.G=71]="G",a[a.H=72]="H",a[a.I=73]="I",a[a.J=74]="J",a[a.K=75]="K",a[a.L=76]="L",a[a.M=77]="M",a[a.N=78]="N",a[a.O=79]="O",a[a.P=80]="P",a[a.Q=81]="Q",a[a.R=82]="R",a[a.S=83]="S",a[a.T=84]="T",a[a.U=85]="U",a[a.V=86]="V",a[a.W=87]="W",a[a.X=88]="X",a[a.Y=89]="Y",a[a.Z=90]="Z";const Is=new Map([[13,"ENTER"],[27,"ESC"],[32,"SPACE"],[33,"PAGE_UP"],[34,"PAGE_DOWN"],[35,"END"],[36,"HOME"],[37,"LEFT"],[38,"UP"],[39,"RIGHT"],[40,"DOWN"],[9,"TAB"],[188,"LESS"],[190,"GREATER"],[189,"DASH"],[48,"ZERO"],[49,"ONE"],[50,"TWO"],[51,"THREE"],[52,"FOUR"],[53,"FIVE"],[54,"SIX"],[55,"SEVEN"],[56,"EIGHT"],[57,"NINE"],[65,"A"],[66,"B"],[67,"C"],[68,"D"],[69,"E"],[70,"F"],[71,"G"],[72,"H"],[73,"I"],[74,"J"],[75,"K"],[76,"L"],[77,"M"],[78,"N"],[79,"O"],[80,"P"],[81,"Q"],[82,"R"],[83,"S"],[84,"T"],[85,"U"],[86,"V"],[87,"W"],[88,"X"],[89,"Y"],[90,"Z"]]);function As(n,r,e){return(e||function(e,t){return"number"==typeof e&&"number"==typeof t?e+t:"number"==typeof e?t:"number"==typeof t?e:[n,r].sort()[0]}).call(null,n,r)}let bs={},Rs=[];function Os(n){n=n.map(e=>e.clone()),bs={},Rs=[];let r=[];var o={};for(let t,e=0;t=n[e];e++){let e=null;const h=t.descriptionSpan(),d=t.personality,p=d[f.JOIN];delete d[f.JOIN],void 0!==d[f.PAUSE]&&(e={[f.PAUSE]:d[f.PAUSE]},delete d[f.PAUSE]),u=l=c=a=s=i=void 0;var i=r,s=h,a=function(e,n){if(!n)return e;const r={};for(const c of q){var t,o=e[c],i=n[c];!o&&!i||o&&i&&o===i||(t=o||0,vs(r)||(r.open=[],r.close=[]),o||r.close.push(c),i||r.open.push(c),i&&o&&(r.close.push(c),r.open.push(c)),n[c]=t,r[c]=t,bs[c]?bs[c].push(t):bs[c]=[t])}if(vs(r)){let e=r.close.slice();for(;0<e.length;){var s=Rs.pop(),a=er(s,e);if(e=er(e,s),s=a,0!==e.length){if(0!==s.length){r.close=r.close.concat(s),r.open=r.open.concat(s);for(let e,t=0;e=s[t];t++)r[e]=n[e]}}else 0!==s.length&&Rs.push(s)}Rs.push(r.open)}return r}(d,o),c=p,l=e,u=!0;if(u){const u=i[i.length-1];let e;if(u&&(e=u[f.JOIN]),u&&!s.speech&&l&&Ls(u)){const i=f.PAUSE;u[i]=As(u[i],l[i]),l=null}if(u&&s.speech&&0===Object.keys(a).length&&Ms(u)){if(void 0!==e){const i=u.span.pop();s=T.stringAttr(i.speech+e+s.speech,i.attributes)}u.span.push(s),s=T.empty(),u[f.JOIN]=c}}0!==Object.keys(a).length&&i.push(a),s.speech&&i.push({span:[s],join:c}),l&&i.push(l)}return r=function(r){const o={},i=[];for(let t,n=0;t=r[n];n++)if(vs(t))if(!t.close||1!==t.close.length||t.open.length)ys(t,o),i.push(t);else{let e=r[n+1];var s;!e||Ms(e)?(ys(t,o),i.push(t)):(s=Ls(e)?e:null,(e=s?r[n+2]:e)&&vs(e)&&e.open[0]===t.close[0]&&!e.close.length&&e[e.open[0]]===o[e.open[0]]?s?(Cs(i,s),n+=2):n+=1:(ys(t,o),i.push(t)))}else Cs(i,t);return i}(r=r.concat(function(){const t=[];for(let e=Rs.length-1;0<=e;e--){var n=Rs[e];if(n.length){const o={open:[],close:[]};for(let e=0;e<n.length;e++){var r=n[e];o.close.push(r),o[r]=0}t.push(o)}}return t}())),r=m.getInstance().options.cleanpause?function(e){for(;Ls(e[0]);)e.shift();for(;Ls(e[e.length-1]);)e.pop();return e}(r):r}function Cs(e,t){const n=e[e.length-1];if(n){if(Ms(t)&&Ms(n)){if(void 0===n.join)return n.span=n.span.concat(t.span);const e=n.span.pop(),r=t.span.shift();return n.span.push(e+n.join+r),n.span=n.span.concat(t.span),n.join=t.join}Ls(t)&&Ls(n)?n.pause=As(n.pause,t.pause):e.push(t)}else e.push(t)}function ys(e,t){e.rate&&(t.rate=e.rate),e.pitch&&(t.pitch=e.pitch),e.volume&&(t.volume=e.volume)}function vs(e){return"object"==typeof e&&e.open}function Ls(e){return"object"==typeof e&&1===Object.keys(e).length&&Object.keys(e)[0]===f.PAUSE}function Ms(e){var t=Object.keys(e);return"object"==typeof e&&(1===t.length&&"span"===t[0]||2===t.length&&("span"===t[0]&&"join"===t[1]||"span"===t[1]&&"join"===t[0]))}class _s{constructor(){this.separator_=" "}set separator(e){this.separator_=e}get separator(){return"braille"===m.getInstance().options.modality?"":this.separator_}error(e){return null}merge(n){let r="";var o=n.length-1;for(let e,t=0;e=n[t];t++)if(r+=e.speech,t<o){const n=e.attributes.separator;r+=void 0!==n?n:this.separator}return r}finalize(e){return e}pauseValue(e){let t;switch(e){case"long":t=750;break;case"medium":t=500;break;case"short":t=250;break;default:t=parseInt(e,10)}return Math.floor(t*m.getInstance().getRate()/100)}}class ws extends _s{constructor(){super(...arguments),this.ignoreElements=[f.LAYOUT],this.scaleFunction=null}setScaleFunction(t,n,r,o,i=0){this.scaleFunction=e=>{e=(e-t)/(n-t);return+(Math.round(r*(1-e)+o*e+"e+"+i)+"e-"+i)}}applyScaleFunction(e){return this.scaleFunction?this.scaleFunction(e):e}ignoreElement(e){return-1!==this.ignoreElements.indexOf(e)}}class Ds extends ws{markup(e){this.setScaleFunction(-2,2,-100,100,2);const n=Os(e),r=[],o=[];for(let t,e=0;t=n[e];e++)if(t.span)r.push(this.merge(t.span));else if(Ls(t))r.push(this.pause(t));else{if(t.close.length)for(let e=0;e<t.close.length;e++){const n=o.pop();if(-1===t.close.indexOf(n))throw new ee("Unknown closing markup element: "+n);r.push(this.closeTag(n))}t.open.length&&!function(n,r){if(n.length<=1)return n;const o=[];for(let e,t=0;e=r[t],n.length;t++)e.close&&e.close.length&&e.close.forEach(function(e){var t=n.indexOf(e);-1!==t&&(o.unshift(e),n.splice(t,1))});return o}(t.open.slice(),n.slice(e+1)).forEach(e=>{r.push(this.prosodyElement(e,t[e])),o.push(e)})}return r.join(" ")}}class Ps extends Ds{constructor(){super(...arguments),this.values=new Map}finalize(e){var t=this.values.get("rel");if(ks.clear(),t){var n=Object.keys(t).map(e=>parseInt(e)).sort();for(let e,t=0;e=n[t];t++)ks.set(e,t+1)}{t=e,xs="";const r=ce(`<all>${t}</all>`);return u.getInstance().generate(()=>[pe(r.toString())]),xs=Gs(r)}}pause(e){return""}prosodyElement(e,t){return e===f.LAYOUT?`<${t}>`:""}closeTag(e){return`</${e}>`}markup(e){this.values.clear();const t=[];let n=[];for(const r of e)if(r.layout){t.push(this.processContent(n)),n=[];const[e,o,i]=this.layoutValue(r.layout);"begin"!==e?"end"!==e?console.warn("Something went wrong with layout markup: "+o):t.push("</"+o+">"):t.push("<"+o+(i?` value="${i}"`:"")+">")}else n.push(r);return t.push(this.processContent(n)),t.join("")}processContent(e){const n=[],r=Os(e);for(let e,t=0;e=r[t];t++)e.span?n.push(this.merge(e.span)):Ls(e);return n.join("")}layoutValue(e){var t=e.match(/^(begin|end|)(.*\D)(\d*)$/),n=t[3];return n?(e=t[2],this.values.has(e)||this.values.set(e,{}),this.values.get(e)[n]=!0,[t[1],e,n]):[t[1],t[2],""]}}Ps.options={cayleyshort:m.getInstance().options.cayleyshort,linebreaks:m.getInstance().options.linebreaks};let xs="";const Us={TABLE:function(e){let t=qs(e);t.forEach(e=>{e.cells=e.cells.slice(1).slice(0,-1),e.width=e.width.slice(1).slice(0,-1)});var[e,n]=Xs(t);return $s(t=Ys(t,n),e)},CASES:function(e){let t=qs(e);t.forEach(e=>{e.cells=e.cells.slice(0,-1),e.width=e.width.slice(0,-1)});var[e,n]=Xs(t);return $s(t=Ys(t,n),e)},CAYLEY:function(e){let t=qs(e);t.forEach(e=>{e.cells=e.cells.slice(1).slice(0,-1),e.width=e.width.slice(1).slice(0,-1),e.sep=e.sep+e.sep});const[n,r]=Xs(t),o={lfence:"",rfence:"",cells:r.map(e=>"â "+new Array(e).join("â ’")),width:r,height:1,sep:t[0].sep};return m.getInstance().options.cayleyshort&&"â €"===t[0].cells[0]&&(o.cells[0]="â €"),t.splice(1,0,o),$s(t=Ys(t,r),n)},MATRIX:function(e){var e=qs(e),[t,n]=Xs(e);return $s(Ys(e,n),t)},CELL:Gs,FENCE:Gs,ROW:Gs,FRACTION:function(e){var[e,t,,n,r]=Array.from(e.childNodes),t=Fs(t),n=Fs(n),o=Hs(t),i=Hs(n),o=Math.max(o,i),i=e+new Array(o+1).join("â ’")+r;return zs(t,o=i.length)+`
${i}
`+zs(n,o)},NUMERATOR:Qs,DENOMINATOR:Qs,REL:Js,OP:Js};function Fs(e){const t=R(e),n=Us[t];return n?n(e):e.textContent}const ks=new Map;function Bs(e,t){if(!e||!t)return e+t;var n=Vs(e),r=Vs(t),o=n-r;e=o<0?js(e,r,Hs(e)):e,t=0<o?js(t,n,Hs(t)):t;const i=e.split(/\r\n|\r|\n/),s=t.split(/\r\n|\r|\n/),a=[];for(let e=0;e<i.length;e++)a.push(i[e]+s[e]);return a.join("\n")}function Gs(e){let t="";for(const n of Array.from(e.childNodes))t=n.nodeType!==K.TEXT_NODE?Bs(t,Fs(n)):Bs(t,n.textContent);return t}function Vs(e){return e.split(/\r\n|\r|\n/).length}function Hs(e){return e.split(/\r\n|\r|\n/).reduce((e,t)=>Math.max(t.length,e),0)}function js(e,t,n){i=t-Vs(t=e),e=t+(0<i?new Array(1+i).join("\n"):"");{var r=e,o=n;const s=r.split(/\r\n|\r|\n/),a=[];for(const r of s){const s=o-r.length;a.push(r+(0<s?new Array(1+s).join("â €"):""))}return a.join("\n")}var i}function qs(e){const t=Array.from(e.childNodes),n=[];for(const e of t)e.nodeType===K.ELEMENT_NODE&&n.push(function(e){const t=Array.from(e.childNodes),n=Ks(t[0]),r=Ks(t[t.length-1]);n&&t.shift(),r&&t.pop();let o="";const i=[];for(const e of t)if(e.nodeType===K.TEXT_NODE)o=e.textContent;else{const t=Fs(e);i.push(t)}return{lfence:n,rfence:r,sep:o,cells:i,height:i.reduce((e,t)=>Math.max(Vs(t),e),0),width:i.map(Hs)}}(e));return n}function Xs(e){const t=e.reduce((e,t)=>Math.max(t.height,e),0),n=[];for(let t=0;t<e[0].width.length;t++)n.push(e.map(e=>e.width[t]).reduce((e,t)=>Math.max(e,t),0));return[t,n]}function Ys(t,n){const e=[];for(const r of t)if(0!==r.height){const t=[];for(let e=0;e<r.cells.length;e++)t.push(js(r.cells[e],r.height,n[e]));r.cells=t,e.push(r)}return e}function $s(t,n){if(1===n)return t.map(e=>e.lfence+e.cells.join(e.sep)+e.rfence).join("\n");const r=[];for(const n of t){const t=Ws(n.sep,n.height);let e=n.cells.shift();for(;n.cells.length;)e=Bs(e,t),e=Bs(e,n.cells.shift());e=Bs(Ws(n.lfence,n.height),e),e=Bs(e,Ws(n.rfence,n.height)),r.push(e),r.push(n.lfence+new Array(Hs(e)-3).join(n.sep)+n.rfence)}return r.slice(0,-1).join("\n")}function Ws(e,t){let n="";for(;t;)n+=e+"\n",t--;return n.slice(0,-1)}function Ks(e){return e.nodeType===K.ELEMENT_NODE&&"FENCE"===R(e)?Fs(e):""}function zs(e,t){const n=(t-Hs(e))/2,[r,o]=Math.floor(n)===n?[n,n]:[Math.floor(n),Math.ceil(n)],i=e.split(/\r\n|\r|\n/),s=[],[a,c]=[new Array(r+1).join("â €"),new Array(o+1).join("â €")];for(const e of i)s.push(a+e+c);return s.join("\n")}function Qs(e){var t=e.firstChild,e=Gs(e);if(t&&t.nodeType===K.ELEMENT_NODE){if("ENGLISH"===R(t))return"â °"+e;if("NUMBER"===R(t))return"â ¼"+e}return e}function Js(e){if(!m.getInstance().options.linebreaks)return Gs(e);var t=ks.get(parseInt(e.getAttribute("value")));return(t?`<br value="${t}"/>`:"")+Gs(e)}class Zs extends _s{markup(e){var n=Os(e);let r="",o=null,i=!1;for(let e,t=0;e=n[t];t++)vs(e)||(Ls(e)?o=e:(o&&(r+=this.pause(o[f.PAUSE]),o=null),r+=(i?this.separator:"")+this.merge(e.span),i=!0));return r}pause(e){e="number"==typeof e?e<=250?"short":e<=500?"medium":"long":e;return Zs.PAUSE_PUNCTUATION.get(e)||""}}Zs.PAUSE_PUNCTUATION=new Map([["short",","],["medium",";"],["long","."]]);class ea extends Ds{finalize(e){return`<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="${m.getInstance().options.locale}"><prosody rate="`+m.getInstance().getRate()+'%">'+this.separator+e+this.separator+"</prosody></speak>"}pause(e){return'<break time="'+this.pauseValue(e[f.PAUSE])+'ms"/>'}prosodyElement(e,t){t=(t=Math.floor(this.applyScaleFunction(t)))<0?t.toString():"+"+t.toString();return"<prosody "+e.toLowerCase()+'="'+t+(e===f.VOLUME?">":'%">')}closeTag(e){return"</prosody>"}markup(e){return ea.MARKS={},super.markup(e)}merge(t){const n=[];let r="";for(let e=0;e<t.length;e++){const s=t[e];var o,i;this.isEmptySpan(s)||(o=ea.MARK_KIND?s.attributes.kind:"",!(i=m.getInstance().options.automark?s.attributes.id:m.getInstance().options.mark?s.attributes.extid:"")||i===r||ea.MARK_ONCE&&ea.MARKS[i]||(n.push(o?`<mark name="${i}" kind="${o}"/>`:`<mark name="${i}"/>`),r=i,ea.MARKS[i]=!0),m.getInstance().options.character&&1===s.speech.length&&s.speech.match(/[a-zA-Z]/)?n.push('<say-as interpret-as="'+ea.CHARACTER_ATTR+'">'+s.speech+"</say-as>"):n.push(s.speech))}return n.join(this.separator)}isEmptySpan(e){const t=e.attributes.separator;return e.speech.match(/^\s*$/)&&(!t||t.match(/^\s*$/))}}ea.MARK_ONCE=!1,ea.MARK_KIND=!0,ea.CHARACTER_ATTR="character",ea.MARKS={};class ta extends _s{markup(e){let n="";const r=Os(e).filter(e=>e.span);if(!r.length)return n;var o=r.length-1;for(let e,t=0;e=r[t];t++)if(e.span&&(n+=this.merge(e.span)),!(t>=o)){const r=e.join;n+=void 0===r?this.separator:r}return n}}const na=new ea,ra=new Map([[B.NONE,new ta],[B.COUNTING,new class extends ta{finalize(e){const t=super.finalize(e),n="braille"===m.getInstance().options.modality?"â£¿â €â£¿â €â£¿â €â£¿â €â£¿â €":"0123456789";e=new Array(Math.trunc(t.length/10)+1).join(n);return t+"\n"+(e+=n.slice(0,t.length%10))}}],[B.PUNCTUATION,new Zs],[B.LAYOUT,new Ps],[B.ACSS,new class extends ws{markup(e){this.setScaleFunction(-2,2,0,10,0);const n=Os(e),r=[],o={open:[]};let i=null,s=!1;for(let e,t=0;e=n[t];t++)if(vs(e))!function(t,n){delete t.open,n.close.forEach(e=>delete t[e]),n.open.forEach(e=>t[e]=n[e]);var e=Object.keys(t);t.open=e}(o,e);else if(Ls(e))s&&(a=i,c=e,l=Math.max,i=a?{pause:As(a.pause,c.pause,l)}:c);else{const n='"'+this.merge(e.span)+'"';s=!0,i&&(r.push(this.pause(i)),i=null);a=this.prosody_(o);r.push(a?"(text ("+a+") "+n+")":n)}var a,c,l;return"(exp "+r.join(" ")+")"}error(e){return'(error "'+Is.get(e)+'")'}prosodyElement(e,t){switch(t=this.applyScaleFunction(t),e){case f.RATE:return"(richness . "+t+")";case f.PITCH:return"(average-pitch . "+t+")";case f.VOLUME:return"(stress . "+t+")"}return"(value . "+t+")"}pause(e){return"(pause . "+this.pauseValue(e[f.PAUSE])+")"}prosody_(n){const r=n.open,o=[];for(let e,t=0;e=r[t];t++)o.push(this.prosodyElement(e,n[e]));return o.join(" ")}}],[B.SABLE,new class extends Ds{finalize(e){return'<?xml version="1.0"?><!DOCTYPE SABLE PUBLIC "-//SABLE//DTD SABLE speech mark up//EN" "Sable.v0_2.dtd" []><SABLE>'+this.separator+e+this.separator+"</SABLE>"}pause(e){return'<BREAK MSEC="'+this.pauseValue(e[f.PAUSE])+'"/>'}prosodyElement(e,t){switch(t=this.applyScaleFunction(t),e){case f.PITCH:return'<PITCH RANGE="'+t+'%">';case f.RATE:return'<RATE SPEED="'+t+'%">';case f.VOLUME:return'<VOLUME LEVEL="'+t+'%">';default:return"<"+e.toUpperCase()+' VALUE="'+t+'">'}}closeTag(e){return"</"+e.toUpperCase()+">"}}],[B.VOICEXML,na],[B.SSML,na]]);function oa(e){const t=ra.get(m.getInstance().options.markup);return t?t.markup(e):""}function ia(e){const t=ra.get(m.getInstance().options.markup);return t?t.finalize(e):e}class sa{getSpeechMap(e){let t=this.speechMaps.get(e);return t||(t=new Map,this.speechMaps.set(e,t)),t}setMap(e,t,n){this.getSpeechMap(t).set(e,n.map(e=>e.clone()))}constructor(e){this.node=e,this.speechMaps=new Map,this.nodeMap=null}addNode(e,t,n="speech"){e.nodeType===K.ELEMENT_NODE&&e.hasAttribute("id")&&this.setMap(n,e.getAttribute("id"),t)}get(e){return this.speechMaps.get(e)}getNodeMap(){if(this.nodeMap)return this.nodeMap;this.nodeMap=new Map;for(const n of fe(this.node,"id")){var e,t=n.getAttribute("id");this.nodeMap.has(t)?"children"!==(e=n.parentNode.tagName)&&"stree"!==e||this.nodeMap.set(t,n):this.nodeMap.set(n.getAttribute("id"),n)}return this.nodeMap}completeModality(e,t){const n=m.getInstance().options.modality;m.getInstance().options.modality=e;for(const[n,r]of this.getNodeMap())this.getSpeechMap(n).has(e)||t(r);m.getInstance().options.modality=n}json(e=["none"]){const t={},n=m.getInstance().options.markup;for(const[n,r]of this.speechMaps){const o={};for(const i of e)m.getInstance().options.markup=i,r.forEach((e,t)=>o[t+"-"+i]=oa(e)),t[n]=o}return m.getInstance().options.markup=n,t}}class aa{static getInstance(){return aa.instance=aa.instance||new aa,aa.instance}static debugSpeechRule(t,n){const e=t.precondition,r=t.context.applyQuery(n,e.query);u.getInstance().output(e.query,r&&r.toString()),e.constraints.forEach(e=>u.getInstance().output(e,t.context.applyConstraint(n,e)))}static debugNamedSpeechRule(n,r){var o=aa.getInstance().trie.collectRules().filter(e=>e.name==n);for(let e,t=0;e=o[t];t++)u.getInstance().output("Rule",n,"DynamicCstr:",e.dynamicCstr.toString(),"number",t),aa.debugSpeechRule(e,r)}evaluateNode(e,t=!1){ae(e),this.speechStructure&&!t||(this.speechStructure=new sa(e));t=(new Date).getTime();let n=[];try{n=this.evaluateNode_(e)}catch(e){console.error("Something went wrong computing speech."),u.getInstance().output(e)}var r=(new Date).getTime();return u.getInstance().output("Time:",r-t),n}toString(){return this.trie.collectRules().map(e=>e.toString()).join("\n")}runInSetting(e,t){var n,r;const o=m.getInstance(),i=o.options,s=new Q;for(const t of Q.BINARY_FEATURES)s[t]=null!=(n=e[t])?n:i[t];for(const t of Q.STRING_FEATURES)s[t]=null!=(r=e[t])?r:i[t];o.options=s,o.setDynamicCstr();t=t();return o.options=i,o.setDynamicCstr(),t}static addStore(e){const t=function(e){var t,n,r,o=`${e.locale}.${e.modality}.`+e.domain;if("actions"===e.kind){const i=ca.get(o);return i.parse(e),i}Vi||(Pn(l.BASE_LOCALE+".speech.mathspeak","",{CQFspaceoutNumber:oo,CQFspaceoutIdentifier:io,CSFspaceoutText:no,CSFopenFracVerbose:ho,CSFcloseFracVerbose:po,CSFoverFracVerbose:fo,CSFopenFracBrief:mo,CSFcloseFracBrief:go,CSFopenFracSbrief:Eo,CSFcloseFracSbrief:No,CSFoverFracSbrief:So,CSFvulgarFraction:zo,CQFvulgarFractionSmall:To,CSFopenRadicalVerbose:Mo,CSFcloseRadicalVerbose:_o,CSFindexRadicalVerbose:wo,CSFopenRadicalBrief:Do,CSFcloseRadicalBrief:Po,CSFindexRadicalBrief:xo,CSFopenRadicalSbrief:Uo,CSFindexRadicalSbrief:Fo,CQFisSmallRoot:$o,CSFsuperscriptVerbose:Ro,CSFsuperscriptBrief:Oo,CSFsubscriptVerbose:Ao,CSFsubscriptBrief:bo,CSFbaselineVerbose:Co,CSFbaselineBrief:yo,CSFleftsuperscriptVerbose:Ro,CSFleftsubscriptVerbose:Ao,CSFrightsuperscriptVerbose:Ro,CSFrightsubscriptVerbose:Ao,CSFleftsuperscriptBrief:Oo,CSFleftsubscriptBrief:bo,CSFrightsuperscriptBrief:Oo,CSFrightsubscriptBrief:bo,CSFunderscript:ko,CSFoverscript:Go,CSFendscripts:Bo,CTFordinalCounter:Wo,CTFwordCounter:Ko,CTFcontentIterator:Fn,CQFdetIsSimple:Vo,CSFRemoveParens:jo,CQFresetNesting:ao,CGFbaselineConstraint:Ho,CGFtensorRules:Yo}),Pn("es.speech.mathspeak",l.BASE_LOCALE+".speech.mathspeak",{CTFunitMultipliers:Ci,CQFoneLeft:vi}),Pn("fr.speech.mathspeak",l.BASE_LOCALE+".speech.mathspeak",{CSFbaselineVerbose:Jo,CSFbaselineBrief:Zo,CSFleftsuperscriptVerbose:ei,CSFleftsubscriptVerbose:ti,CSFleftsuperscriptBrief:ni,CSFleftsubscriptBrief:ri}),Pn("ko.speech.mathspeak",l.BASE_LOCALE+".speech.mathspeak",{CSFopenFracVerbose:ii,CSFcloseFracVerbose:si,CSFopenFracBrief:ai,CSFcloseFracBrief:ci,CSFopenFracSbrief:li,CSFoverFracSbrief:hi,CSFcloseFracSbrief:ui,CQFisSimpleIndex:di,CSFindexRadicalVerbose:Ti,CSFindexRadicalBrief:Ii,CSFindexRadicalSbrief:Ai,CSFopenRadicalVerbose:fi,CSFcloseRadicalVerbose:mi,CSFopenRadicalBrief:gi,CSFcloseRadicalBrief:Ei,CSFopenRadicalSbrief:Ni}),Pn(l.BASE_LOCALE+".speech.clearspeak","",{CTFpauseSeparator:Un,CTFnodeCounter:kn,CTFcontentIterator:Fn,CSFvulgarFraction:zo,CQFvulgarFractionSmall:Hn,CQFcellsSimple:Vn,CSFordinalExponent:jn,CSFwordOrdinal:Qn,CQFmatchingFences:Yn,CSFnestingDepth:Xn,CQFfencedArguments:$n,CQFsimpleArguments:Wn,CQFspaceoutNumber:oo,CQFisUnit:Jn}),Pn("en.prefix.default","",{CSFordinalPosition:Qo}),Pn("en.speech.chromevox","",{CTFnodeCounter:xn,CTFcontentIterator:Fn}),Pn("en.speech.emacspeak","en.speech.chromevox",{CQFvulgarFractionSmall:To,CSFvulgarFraction:zo}),Pn("ko.summary.","ko.speech.mathspeak",{CSFordinalConversion:bi,CSFdecreasedOrdinalConversion:Ri,CSFlistOrdinalConversion:Oi}),Pn("nemeth.braille.default",l.BASE_LOCALE+".speech.mathspeak",{CSFopenFraction:Li,CSFcloseFraction:Mi,CSFoverFraction:_i,CSFoverBevFraction:wi,CQFhyperFraction:Di,CSFopenRadical:xi,CSFcloseRadical:Ui,CSFindexRadical:Fi,CSFsubscript:Ao,CSFsuperscript:Ro,CSFbaseline:Co,CGFtensorRules:e=>Yo(e,!1),CTFcontentIterator:Gi,CTFrelationIterator:ki,CTFimplicitIterator:Bi}),Pn("euro.braille.default","nemeth.braille.default",{}),Vi=!0),e&&!e.functions&&(e.functions=(n=e.locale,r=e.modality,t=e.domain,Dn.get([n,r,t].join("."))||Dn.get([l.DEFAULT_VALUES[c.LOCALE],r,t].join("."))||Dn.get([l.BASE_LOCALE,r,t].join("."))||{}));n=e.locale;const i=new("braille"===(r=e.modality)&&"euro"===n?us:"braille"===r?ls:cs);return ca.set(o,i),e.inherits&&(i.inherits=ca.get(`${e.inherits}.${e.modality}.`+e.domain)),i.parse(e),i.initialize(),i}(e);"abstract"!==t.kind&&t.getSpeechRules().forEach(e=>aa.getInstance().trie.addRule(e)),aa.getInstance().addEvaluator(t)}processGrammar(e,t,n){const r={};for(var[o,i]of Object.entries(n))r[o]="string"==typeof i?e.constructString(t,i):i;O.getInstance().pushState(r)}addEvaluator(e){const t=e.evaluateDefault.bind(e),n=this.evaluators_[e.locale];if(n)n[e.modality]=t;else{const r={};r[e.modality]=t,this.evaluators_[e.locale]=r}}getEvaluator(e,t){e=this.evaluators_[e]||this.evaluators_[l.DEFAULT_VALUES[c.LOCALE]];return e[t]||e[l.DEFAULT_VALUES[c.MODALITY]]}enumerate(e){return this.trie.enumerate(e)}constructor(){this.trie=null,this.evaluators_={},this.speechStructure=null,this.trie=new Ts}evaluateNode_(e){return e?(this.updateConstraint_(),function(e){const t=new wn(e);for(const e of t.annotations){const r=e.data;var n;"punctuation"===r.annotation&&(n=t.prevText(e))&&"punctuation"!==(n=n.data).annotation&&"â €"!==n.text&&1===r.text.length&&-1!==la.indexOf(r.text)&&(r.text="â ¸"+r.text)}return t.toList()}(this.evaluateTree_(e))):[]}evaluateTree_(e){var t=this.evaluateTreeInternal_(e);return this.speechStructure.addNode(e,t,m.getInstance().options.modality),t}evaluateTreeInternal_(o){const i=m.getInstance();let s;u.getInstance().generate(()=>[o.toString()]),O.getInstance().setAttribute(o);const a=this.lookupRule(o,i.dynamicCstr);if(!a)return i.options.strict?[]:(s=this.getEvaluator(i.options.locale,i.options.modality)(o),o.attributes&&this.addPersonality_(s,{},!1,o),s);u.getInstance().generate(()=>["Apply Rule:",a.name,a.dynamicCstr.toString(),i.mode===F.HTTP?Ne(o):o.toString()]),O.getInstance().processSingles();const c=a.context,l=a.action.components;s=[];for(let r,e=0;r=l[e];e++){let t=[];const F=r.content||"",l=r.attributes||{};let e=!1,n=(r.grammar&&this.processGrammar(c,o,r.grammar),null);if(l.engine){n=m.getInstance().dynamicCstr.getComponents();const o=Object.assign({},n,O.parseInput(l.engine));m.getInstance().setDynamicCstr(o),this.updateConstraint_()}switch(r.type){case un.NODE:{const i=c.applyQuery(o,F);i&&(t=this.evaluateTree_(i))}break;case un.MULTI:{e=!0;const i=c.applySelector(o,F);0<i.length&&(t=this.evaluateNodeList_(c,i,l.sepFunc,c.constructString(o,l.separator),l.ctxtFunc,c.constructString(o,l.context)))}break;case un.TEXT:{const i=l.span;let e={};if(i){const a=b(i,o);e=a.length?T.getAttributes(a[0]):{kind:i}}t=c.constructSpan(o,F,e).map(function(e){return I.create({text:e.speech,attributes:e.attributes},{adjust:!0})})}break;default:un.PERSONALITY;t=[I.create({text:F})]}t[0]&&!e&&(l.context&&(t[0].context=c.constructString(o,l.context)+(t[0].context||"")),l.annotation&&(t[0].annotation=l.annotation)),this.addLayout(t,l,e),r.grammar&&O.getInstance().popState(),s=s.concat(this.addPersonality_(t,l,e,o)),n&&(m.getInstance().setDynamicCstr(n),this.updateConstraint_())}return O.getInstance().popState(),s}evaluateNodeList_(n,r,e,o,t,i){if(!r.length)return[];const s=o||"",a=i||"",c=n.contextFunctions.lookup(t),l=c?c(r,a):function(){return a},u=n.contextFunctions.lookup(e),h=u?u(r,s):function(){return[I.create({text:s},{translate:!0})]};let d=[];for(let e,t=0;e=r[t];t++){const o=this.evaluateTree_(e);if(0<o.length&&(o[0].context=l()+(o[0].context||""),d=d.concat(o),t<r.length-1)){const n=h();d=d.concat(n)}}return d}addLayout(e,t,n){const r=t.layout;r&&(r.match(/^begin/)?e.unshift(new I({text:"",layout:r})):r.match(/^end/)?e.push(new I({text:"",layout:r})):(e.unshift(new I({text:"",layout:"begin"+r})),e.push(new I({text:"",layout:"end"+r}))))}addPersonality_(n,e,t,r){const o={};let i=null;for(const n of q){const t=e[n];if(void 0!==t){const r=parseFloat(t),s=isNaN(r)?'"'===t.charAt(0)?t.slice(1,-1):t:r;n===f.PAUSE?i=s:o[n]=s}}for(let e,t=0;e=n[t];t++)this.addRelativePersonality_(e,o),this.addExternalAttributes_(e,r);if(t&&n.length&&delete n[n.length-1].personality[f.JOIN],i&&n.length){const e=n[n.length-1];e.text||Object.keys(e.personality).length?n.push(I.create({text:"",personality:{pause:i}})):e.personality[f.PAUSE]=i}return n}addExternalAttributes_(t,e){var n;if(void 0===t.attributes.id&&(t.attributes.id=e.getAttribute("id")),null!=(n=e.attributes)&&n.length){const n=e.attributes;for(let e=n.length-1;0<=e;e--){const r=n[e].name;!t.attributes[r]&&r.match(/^ext/)&&(t.attributes[r]=n[e].value)}}}addRelativePersonality_(e,t){if(!e.personality)return e.personality=t,e;const n=e.personality;for(const[e,r]of Object.entries(t))n[e]&&"number"==typeof n[e]&&"number"==typeof r?n[e]=(n[e]+r).toString():n[e]||(n[e]=r);return e}updateConstraint_(){const n=m.getInstance().dynamicCstr,r=m.getInstance().options.strict,e=this.trie,o={};let i=n.getValue(c.LOCALE),s=n.getValue(c.MODALITY),t=n.getValue(c.DOMAIN);e.hasSubtrie([i,s,t])||(t=l.DEFAULT_VALUES[c.DOMAIN],e.hasSubtrie([i,s,t])||(s=l.DEFAULT_VALUES[c.MODALITY],e.hasSubtrie([i,s,t])||(i=l.DEFAULT_VALUES[c.LOCALE]))),o[c.LOCALE]=[i],o[c.MODALITY]=["summary"!==s?s:l.DEFAULT_VALUES[c.MODALITY]],o[c.DOMAIN]=["speech"!==s?l.DEFAULT_VALUES[c.DOMAIN]:t];var a=n.getOrder();for(let e,t=0;e=a[t];t++)if(!o[e]){const c=n.getValue(e),i=this.makeSet_(c,n.preference),s=l.DEFAULT_VALUES[e];r||c===s||i.push(s),o[e]=i}n.updateProperties(o)}makeSet_(e,t){return t&&Object.keys(t).length?e.split(":"):[e]}lookupRule(e,t){if(!e||e.nodeType!==K.ELEMENT_NODE&&e.nodeType!==K.TEXT_NODE)return null;e=this.lookupRules(e,t);return 0<e.length?this.pickMostConstraint_(t,e):null}lookupRules(e,t){return this.trie.lookupRules(e,t.allProperties())}pickMostConstraint_(e,t){const n=m.getInstance().comparator;return t.sort(function(e,t){return n.compare(e.dynamicCstr,t.dynamicCstr)||t.precondition.priority-e.precondition.priority||t.precondition.constraints.length-e.precondition.constraints.length||t.precondition.rank-e.precondition.rank}),u.getInstance().generate((()=>["Applicable Rules:",...t.map(e=>e.name+"("+e.dynamicCstr.toString()+")")]).bind(this)),t[0]}}const ca=new Map,la=(m.nodeEvaluator=aa.getInstance().evaluateNode.bind(aa.getInstance()),["â †","â ’","â ²","â ¦","â ´","â „"]),ua={small:["default"],capital:["default"],digit:["default"]};function ha(e){const t=m.getInstance().options.locale;var n;m.getInstance().options.locale=e,nn(),Sn({locale:e}),e=N.ALPHABETS,n=(e,t)=>{const n={};return Object.keys(e).forEach(e=>n[e]=!0),Object.keys(t).forEach(e=>n[e]=!0),Object.keys(n)},ua.small=n(e.smallPrefix,e.letterTrans),ua.capital=n(e.capPrefix,e.letterTrans),ua.digit=n(e.digitPrefix,e.digitTrans);for(const e of Ae.values()){const t=e.unicode;if("offset"in e){r=void 0;o=void 0;i=void 0;s=void 0;var r=t;var o=e.font;var i=e.offset||0;var s=da(o);for(let e,t=0;e=r[t];t++){const r=N.ALPHABETS.digitPrefix,h=t+i;pa(s.combiner,e,h,s.font,r,N.ALPHABETS.digitTrans,ua.digit)}}else{u=l=o=c=a=void 0;var a=t,c=N.ALPHABETS[e.base],o=e.font,l=!!e.capital,u=da(o);for(let e,t,n=0;e=a[n],t=c[n];n++){const a=l?N.ALPHABETS.capPrefix:N.ALPHABETS.smallPrefix,c=l?ua.capital:ua.small;pa(u.combiner,e,t,u.font,a,N.ALPHABETS.letterTrans,c)}}}m.getInstance().options.locale=t,nn()}function da(e){return"string"==typeof(e="normal"!==e&&"fullwidth"!==e&&(N.MESSAGES.font[e]||N.MESSAGES.embellish[e])||"")?{font:e,combiner:N.ALPHABETS.combiner}:{font:e[0],combiner:N.COMBINERS[e[1]]||ve[e[1]]||N.ALPHABETS.combiner}}function pa(n,r,o,i,s,a,c){for(let e,t=0;e=c[t];t++){const c=e in a?a[e]:a.default,l=e in s?s[e]:s.default;yn(e,"default",r,n(c(o),i,l))}}var fa=function(e,s,a,c){return new(a=a||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())})};const ma={functions:function(e){for(const n of e)Sn(n)||(t=n.key,an(n.names||[],S.Meaning.get(t)||{type:E.FUNCTION,role:h.PREFIXFUNC}),"base"!==En?(On(n),Ln(n)):bn.set(n.key,n));var t},symbols:function(e){for(const t of e)if(!Sn(t)){const e=gn.parseUnicode(t.key);"base"!==En?Cn(e,e,t.mappings):bn.set(e,t)}},units:function(e){for(const r of e)if(!Sn(r)){r.key+=":unit";if("base"!==En){On(r),r.names&&(r.names=r.names.map(function(e){return e+":unit"}));if(r.si){t=void 0;n=void 0;var t=r;for(const o of Object.keys(Tn)){const i=Object.assign({},t);i.mappings={};var n=Tn[o];i.names=i.names.map(function(e){return o+e});for(const s of Object.keys(t.mappings)){i.mappings[s]={};for(const a of Object.keys(t.mappings[s]))i.mappings[s][a]=tn[En]().FUNCTIONS.si(n,t.mappings[s][a])}Ln(i)}}Ln(r)}else bn.set(r.key,r)}},si:e=>e.forEach(In),messages:function(e){const t=tn[e.locale];if(t){var n=e.kind.toUpperCase(),r=e.messages;if(r){const o=t();for(const[e,t]of Object.entries(r))o[n][e]=t}}else console.error("Locale "+e.locale+" does not exist!")},rules:aa.addStore,characters:e=>e.forEach(vn)};let ga=!1;function Ea(e=m.getInstance().options.locale){if(!te.loaded[e]){te.loaded[e]=[!1,!1],En=l.DEFAULT_VALUES[c.LOCALE],Nn=l.DEFAULT_VALUES[c.MODALITY];{var n=e;const r=m.getInstance().customLoader?m.getInstance().customLoader:Na(),t=new Promise(t=>{r(n).then(e=>{{var r="string"==typeof(e=e)?JSON.parse(e):e;let n=!0;for(let e,t=0;e=Object.keys(r)[t];t++){var o=e.split("/");n&&"symbols"===o[1]&&"base"!==o[0]&&(ha(o[0]),n=!1),ma[o[1]](r[e])}}te.loaded[n]=[!0,!0],t(n)},e=>{te.loaded[n]=[!0,!1],console.error("Unable to load locale: "+n),m.getInstance().options.locale=m.getInstance().defaultLocale,t(n)})});te.promises[n]=t}}}function Na(){switch(m.getInstance().mode){case F.ASYNC:return Sa;case F.HTTP:return Ia;default:F.SYNC;return Ta}}function Sa(e){const t=W(e);return new Promise((n,r)=>{Y.f.fs.readFile(t,"utf8",(e,t)=>{if(e)return r(e);n(t)})})}function Ta(e){const r=W(e);return new Promise((e,t)=>{let n="{}";try{n=Y.f.fs.readFileSync(r,"utf8")}catch(e){return t(e)}e(n)})}function Ia(e){const r=W(e),o=new XMLHttpRequest;return new Promise((t,n)=>{o.onreadystatechange=function(){var e;4===o.readyState&&(0===(e=o.status)||200<=e&&e<400?t(o.responseText):n(e))},o.open("GET",r,!0),o.send()})}function Aa(e,s,a,c){return new(a=a||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())})}var L,M,ba,Ra,_,w;function Oa(t){return Aa(this,void 0,void 0,function*(){t.debug&&u.getInstance().init();const e=m.getInstance();return e.setup(t),nn(),e.setDynamicCstr(),e.init?(te.promises.init=new Promise((e,t)=>{setTimeout(()=>{e("init")},10)}),e.init=!1,te.get()):e.options.delay?(e.options.delay=!1,te.get()):function(){return fa(this,arguments,void 0,function*(t=m.getInstance().options.locale){if(!ga){for(const e of Ae.values())for(const n of e.unicode)bn.set(n,{key:n,category:e.category});Ea(l.BASE_LOCALE),ga=!0}return te.promises[l.BASE_LOCALE].then(()=>fa(this,void 0,void 0,function*(){var e=m.getInstance().defaultLocale;return e?(Ea(e),te.promises[e].then(()=>fa(this,void 0,void 0,function*(){return Ea(t),te.promises[t]}))):(Ea(t),te.promises[t])}))})}()})}class Ca extends class{constructor(e){this.type=e,this.factory_=new br}getFactory(){return this.factory_}setFactory(e){this.factory_=e}getType(){return this.type}parseList(n){const r=[];for(let e,t=0;e=n[t];t++)r.push(this.parse(e));return r}}{static getAttribute_(e,t,n){if(!e.hasAttribute(t))return n;const r=e.getAttribute(t);return r.match(/^\s*$/)?null:r}constructor(e){super("MathML"),this.options=e,A.options=e,this.parseMap_=new Map([[p.SEMANTICS,this.semantics_.bind(this)],[p.MATH,this.rows_.bind(this)],[p.MROW,this.rows_.bind(this)],[p.MPADDED,this.rows_.bind(this)],[p.MSTYLE,this.rows_.bind(this)],[p.MFRAC,this.fraction_.bind(this)],[p.MSUB,this.limits_.bind(this)],[p.MSUP,this.limits_.bind(this)],[p.MSUBSUP,this.limits_.bind(this)],[p.MOVER,this.limits_.bind(this)],[p.MUNDER,this.limits_.bind(this)],[p.MUNDEROVER,this.limits_.bind(this)],[p.MROOT,this.root_.bind(this)],[p.MSQRT,this.sqrt_.bind(this)],[p.MTABLE,this.table_.bind(this)],[p.MLABELEDTR,this.tableLabeledRow_.bind(this)],[p.MTR,this.tableRow_.bind(this)],[p.MTD,this.tableCell_.bind(this)],[p.MS,this.text_.bind(this)],[p.MTEXT,this.text_.bind(this)],[p.MSPACE,this.space_.bind(this)],[p.ANNOTATIONXML,this.text_.bind(this)],[p.MI,this.identifier_.bind(this)],[p.MN,this.number_.bind(this)],[p.MO,this.operator_.bind(this)],[p.MFENCED,this.fenced_.bind(this)],[p.MENCLOSE,this.enclosed_.bind(this)],[p.MMULTISCRIPTS,this.multiscripts_.bind(this)],[p.ANNOTATION,this.empty_.bind(this)],[p.NONE,this.empty_.bind(this)],[p.MACTION,this.action_.bind(this)]]);const t={type:E.IDENTIFIER,role:h.NUMBERSET,font:d.DOUBLESTRUCK};["C","H","N","P","Q","R","Z","â„‚","â„","â„•","â„™","â„š","â„","â„¤"].forEach((e=>this.getFactory().defaultMap.set(e,t)).bind(this))}parse(e){v.getInstance().setNodeFactory(this.getFactory());const t=g(e.childNodes),n=R(e),r=this.parseMap_.get(n),o=(r||this.dummy_.bind(this))(e,t);return Nr(o,e),-1===[p.MATH,p.MROW,p.MPADDED,p.MSTYLE,p.SEMANTICS,p.MACTION].indexOf(n)&&(o.mathml.unshift(e),o.mathmlTree=e),o}semantics_(e,t){return t.length?this.parse(t[0]):this.getFactory().makeEmptyNode()}rows_(e,t){const n=e.getAttribute("semantics");if(n&&n.match("bspr_"))return v.proof(e,n,this.parseList.bind(this));let r;if(1===(t=Er(t)).length)(r=this.parse(t[0])).type!==E.EMPTY||r.mathmlTree||(r.mathmlTree=e);else{const n=A.run("function_from_identifiers",e);r=n&&n!==e?n:v.getInstance().row(this.parseList(t))}return r.mathml.unshift(e),r}fraction_(e,t){if(!t.length)return this.getFactory().makeEmptyNode();var n=this.parse(t[0]),t=t[1]?this.parse(t[1]):this.getFactory().makeEmptyNode();return v.getInstance().fractionLikeNode(n,t,e.getAttribute("linethickness"),"true"===e.getAttribute("bevelled"))}limits_(e,t){return v.getInstance().limitNode(R(e),this.parseList(t))}root_(e,t){return t[1]?this.getFactory().makeBranchNode(E.ROOT,[this.parse(t[1]),this.parse(t[0])],[]):this.sqrt_(e,t)}sqrt_(e,t){t=this.parseList(Er(t));return this.getFactory().makeBranchNode(E.SQRT,[v.getInstance().row(t)],[])}table_(e,t){const n=e.getAttribute("semantics");if(n&&n.match("bspr_"))return v.proof(e,n,this.parseList.bind(this));const r=this.getFactory().makeBranchNode(E.TABLE,this.parseList(t),[]);return r.mathmlTree=e,v.tableToMultiline(r)}tableRow_(e,t){const n=this.getFactory().makeBranchNode(E.ROW,this.parseList(t),[]);return n.role=h.TABLE,n}tableLabeledRow_(e,t){if(!t.length)return this.tableRow_(e,t);const n=this.parse(t[0]),r=(n.role=h.LABEL,(null==(e=n.childNodes[0])?void 0:e.type)===E.TEXT&&(n.childNodes[0].role=h.LABEL),this.getFactory().makeBranchNode(E.ROW,this.parseList(t.slice(1)),[n]));return r.role=h.TABLE,r}tableCell_(e,t){t=this.parseList(Er(t)),t=t.length?1===t.length&&C(t[0],E.EMPTY)?t:[v.getInstance().row(t)]:[];const n=this.getFactory().makeBranchNode(E.CELL,t,[]);return n.role=h.TABLE,n}space_(e,t){const n=e.getAttribute("width"),r=n&&n.match(/[a-z]*$/);if(!r)return this.empty_(e,t);var o=r[0],i=parseFloat(n.slice(0,r.index)),o={cm:.4,pc:.5,em:.5,ex:1,in:.15,pt:5,mm:5}[o];if(!o||isNaN(i)||i<o)return this.empty_(e,t);i=this.getFactory().makeUnprocessed(e);return v.getInstance().text(i,R(e))}text_(e,t){const n=this.leaf_(e,t);return e.textContent?(n.updateContent(e.textContent,!0),v.getInstance().text(n,R(e))):n}identifier_(e,t){t=this.leaf_(e,t);return v.getInstance().identifierNode(t,v.getInstance().font(e.getAttribute("mathvariant")),e.getAttribute("class"))}number_(e,t){e=this.leaf_(e,t);return v.number(e),e}operator_(e,t){e=this.leaf_(e,t);return v.getInstance().operatorNode(e),e}fenced_(e,t){var t=this.parseList(Er(t)),n=Ca.getAttribute_(e,"separators",","),r=Ca.getAttribute_(e,"open","("),e=Ca.getAttribute_(e,"close",")"),r=v.getInstance().mfenced(r,e,n,t);return v.getInstance().tablesInRow([r])[0]}enclosed_(e,t){const n=this.parseList(Er(t)),r=this.getFactory().makeBranchNode(E.ENCLOSE,[v.getInstance().row(n)],[]);return r.role=e.getAttribute("notation")||h.UNKNOWN,r}multiscripts_(e,n){if(!n.length)return this.getFactory().makeEmptyNode();var t=this.parse(n.shift());if(!n.length)return t;const r=[],o=[],i=[],s=[];let a=!1,c=0;for(let e,t=0;e=n[t];t++)R(e)!==p.MPRESCRIPTS?((a?1&c?r:o:1&c?i:s).push(e),c++):(a=!0,c=0);return Er(r).length||Er(o).length?v.getInstance().tensor(t,this.parseList(o),this.parseList(r),this.parseList(s),this.parseList(i)):v.getInstance().pseudoTensor(t,this.parseList(s),this.parseList(i))}empty_(e,t){return this.getFactory().makeEmptyNode()}action_(e,t){const n=t[e.hasAttribute("selection")?parseInt(e.getAttribute("selection"),10)-1:0],r=this.parse(n);return r.mathmlTree=n,r}dummy_(e,t){const n=this.getFactory().makeUnprocessed(e);return n.role=e.tagName,n.textContent=e.textContent,n}leaf_(e,t){if(1===t.length&&t[0].nodeType!==K.TEXT_NODE){const n=this.getFactory().makeUnprocessed(e);return n.role=t[0].tagName,Nr(n,t[0]),n}const n=this.getFactory().makeLeafNode(e.textContent,v.getInstance().font(e.getAttribute("mathvariant")));return e.hasAttribute("data-latex")&&S.LatexCommands.set(e.getAttribute("data-latex"),e.textContent),n}}class ya{constructor(e,t,n=e=>!1){this.name=e,this.apply=t,this.applicable=n}}class va extends ya{}class La extends ya{}const Ma="data-semantic-",_a=((M=L=L||{}).ADDED="data-semantic-added",M.ALTERNATIVE="data-semantic-alternative",M.CHILDREN="data-semantic-children",M.COLLAPSED="data-semantic-collapsed",M.CONTENT="data-semantic-content",M.EMBELLISHED="data-semantic-embellished",M.FENCEPOINTER="data-semantic-fencepointer",M.FONT="data-semantic-font",M.ID="data-semantic-id",M.ANNOTATION="data-semantic-annotation",M.ATTRIBUTES="data-semantic-attributes",M.OPERATOR="data-semantic-operator",M.OWNS="data-semantic-owns",M.PARENT="data-semantic-parent",M.POSTFIX="data-semantic-postfix",M.PREFIX="data-semantic-prefix",M.ROLE="data-semantic-role",M.SPEECH="data-semantic-speech",M.STRUCTURE="data-semantic-structure",M.SUMMARY="data-semantic-summary",M.TYPE="data-semantic-type",[L.ADDED,L.ALTERNATIVE,L.CHILDREN,L.COLLAPSED,L.CONTENT,L.EMBELLISHED,L.FENCEPOINTER,L.FONT,L.ID,L.ANNOTATION,L.ATTRIBUTES,L.OPERATOR,L.OWNS,L.PARENT,L.POSTFIX,L.PREFIX,L.ROLE,L.SPEECH,L.STRUCTURE,L.SUMMARY,L.TYPE]);function wa(e){return e.map(function(e){return e.id}).join(",")}function Da(n,e){n.setAttribute(L.TYPE,e.type);var r=e.allAttributes();for(let e,t=0;e=r[t];t++)n.setAttribute(Ma+e[0].toLowerCase(),e[1]);e.childNodes.length&&n.setAttribute(L.CHILDREN,wa(e.childNodes)),e.contentNodes.length&&n.setAttribute(L.CONTENT,wa(e.contentNodes)),e.parent&&n.setAttribute(L.PARENT,e.parent.id.toString());var t=e.attributesXml();t&&n.setAttribute(L.ATTRIBUTES,t);{t=n;const o=[];return e.role===h.MGLYPH&&o.push("image"),e.attributes.href&&o.push("link"),void(o.length&&t.setAttribute(L.POSTFIX,o.join(" ")))}}function Pa(e){return Ma+e}function xa(){const e=ue("mrow");return e.setAttribute(L.ADDED,"true"),e}class D{static fromTree(e){return D.fromNode(e.root)}static fromNode(e){return new D(D.fromNode_(e))}static fromString(e){return new D(D.fromString_(e))}static simpleCollapseStructure(e){return"number"==typeof e}static contentCollapseStructure(e){return!!e&&!D.simpleCollapseStructure(e)&&"c"===e[0]}static interleaveIds(e,t){return Zn(D.collapsedLeafs(e),D.collapsedLeafs(t))}static collapsedLeafs(...e){return e.reduce((e,t)=>{return e.concat((e=t,D.simpleCollapseStructure(e)?[e]:D.contentCollapseStructure(e[1])?e.slice(2):e.slice(1)))},[])}static fromStructure(e,t,n){return new D(D.tree_(e,t.root,n))}static combineContentChildren(e,t,n,r){switch(e){case E.RELSEQ:case E.INFIXOP:case E.MULTIREL:return Zn(r,n);case E.PREFIXOP:return n.concat(r);case E.POSTFIXOP:return r.concat(n);case E.MATRIX:case E.VECTOR:case E.FENCED:return r.unshift(n[0]),r.push(n[1]),r;case E.CASES:return r.unshift(n[0]),r;case E.APPL:return[r[0],n[0],r[1]];case E.ROOT:return[r[0],r[1]];case E.ROW:case E.LINE:return n.length&&r.unshift(n[0]),r;default:return r}}static makeSexp_(e){return D.simpleCollapseStructure(e)?e.toString():D.contentCollapseStructure(e)?"(c "+e.slice(1).map(D.makeSexp_).join(" ")+")":"("+e.map(D.makeSexp_).join(" ")+")"}static fromString_(e){let t=e.replace(/\(/g,"[");return t=(t=(t=t.replace(/\)/g,"]")).replace(/ /g,",")).replace(/c/g,'"c"'),JSON.parse(t)}static fromNode_(e){if(!e)return[];const t=e.contentNodes;let n;t.length&&(n=t.map(D.fromNode_)).unshift("c");const r=e.childNodes;if(!r.length)return t.length?[e.id,n]:e.id;const o=r.map(D.fromNode_);return t.length&&o.unshift(n),o.unshift(e.id),o}static tree_(r,e,o,i=0,t=1,n=1){if(!e)return[];const s=e.id,a=[s];ae(r);var c=b(`.//self::*[@${L.ID}=${s}]`,r)[0];if(!e.childNodes.length)return D.addAria(c,i,t,n,o),e.id;var l=D.combineContentChildren(e.type,e.role,e.contentNodes.map(function(e){return e}),e.childNodes.map(function(e){return e}));c&&D.addOwns_(c,l);for(let e,t=0,n=l.length;e=l[t];t++)a.push(D.tree_(r,e,o,i+1,t+1,n));return D.addAria(c,i,t,n,o),a}static addAria(e,t,n,r,o){var i=!o.tree||t?"treeitem":"tree";o.aria&&e&&(e.setAttribute("aria-level",t.toString()),e.setAttribute("aria-posinset",n.toString()),e.setAttribute("aria-setsize",r.toString()),e.setAttribute("role",i),e.hasAttribute(L.OWNS)&&e.setAttribute("aria-owns",e.getAttribute(L.OWNS)))}static addOwns_(e,t){const n=e.getAttribute(L.COLLAPSED),r=n?D.realLeafs_(D.fromString(n).array):t.map(e=>e.id);e.setAttribute(L.OWNS,r.join(" "))}static realLeafs_(t){if(D.simpleCollapseStructure(t))return[t];if(D.contentCollapseStructure(t))return[];let n=[];for(let e=1;e<t.length;e++)n=n.concat(D.realLeafs_(t[e]));return n}constructor(e){this.parents=null,this.levelsMap=null,this.array=e=0===e?e:e||[]}populate(){this.parents&&this.levelsMap||(this.parents={},this.levelsMap={},this.populate_(this.array,this.array,[]))}toString(){return D.makeSexp_(this.array)}populate_(n,e,r){if(D.simpleCollapseStructure(n))return this.levelsMap[n]=e,void(this.parents[n]=n===r[0]?r.slice(1):r);const o=D.contentCollapseStructure(n)?n.slice(1):n,i=[o[0]].concat(r);for(let e=0,t=o.length;e<t;e++){const r=o[e];this.populate_(r,n,i)}}isRoot(e){return e===this.levelsMap[e][0]}directChildren(e){return this.isRoot(e)?this.levelsMap[e].slice(1).map(e=>D.simpleCollapseStructure(e)?e:D.contentCollapseStructure(e)?e[1]:e[0]):[]}subtreeNodes(e){if(!this.isRoot(e))return[];const n=(e,t)=>{D.simpleCollapseStructure(e)?t.push(e):(e=D.contentCollapseStructure(e)?e.slice(1):e).forEach(e=>n(e,t))},t=this.levelsMap[e],r=[];return n(t.slice(1),r),r}}function Ua(e,t,n){let r=null;if(!e.length)return r;const o=n[n.length-1],i=o&&o.length,s=t&&t.length,a=v.getInstance();if(i&&s){if(t[0].type===E.INFIXOP&&t[0].role===h.IMPLICIT)return r=e.pop(),o.push(a.postfixNode_(o.pop(),e)),r;r=e.shift();const n=a.prefixNode_(t.shift(),e);return t.unshift(n),r}return i?o.push(a.postfixNode_(o.pop(),e)):s&&t.unshift(a.prefixNode_(t.shift(),e)),r}function Fa(e){return e.childNodes[0]&&e.childNodes[0].childNodes[0]&&R(e.childNodes[0])===p.MPADDED&&R(e.childNodes[0].childNodes[0])===p.MPADDED&&R(e.childNodes[0].childNodes[e.childNodes[0].childNodes.length-1])===p.MPHANTOM}A.add(new va("combine_juxtaposition",function(n){for(let e,t=n.childNodes.length-1;e=n.childNodes[t];t--)Kr(e)&&!e.nobreaking&&(n.childNodes.splice(t,1,...e.childNodes),n.contentNodes.splice(t,0,...e.contentNodes),e.childNodes.concat(e.contentNodes).forEach(function(e){e.parent=n}),n.addMathmlNodes(e.mathml));return n})),A.add(new va("propagateSimpleFunction",e=>(e.type!==E.INFIXOP&&e.type!==E.FRACTION||!e.childNodes.every(Hr)||(e.role=h.COMPFUNC),e),e=>"clearspeak"===A.options.domain)),A.add(new va("simpleNamedFunction",e=>(e.role!==h.UNIT&&-1!==["f","g","h","F","G","H"].indexOf(e.textContent)&&(e.role=h.SIMPLEFUNC),e),e=>"clearspeak"===A.options.domain)),A.add(new va("propagateComposedFunction",e=>(e.type===E.FENCED&&e.childNodes[0].role===h.COMPFUNC&&(e.role=h.COMPFUNC),e),e=>"clearspeak"===A.options.domain)),A.add(new va("multioperator",e=>{e.role!==h.UNKNOWN||e.textContent.length<=1||(v.compSemantics(e,"role",h),v.compSemantics(e,"type",E))})),A.add(new La("convert_juxtaposition",r=>{let o=Ir(r,function(e){return e.textContent===rn.invisibleTimes&&e.type===E.OPERATOR});r=(o=o.rel.length?function(e){const t=[],n=[];let r=e.comp.shift(),o=null,i=[];for(;e.comp.length;)if(i=[],r.length)o&&t.push(o),n.push(r),o=e.rel.shift(),r=e.comp.shift();else{for(o&&i.push(o);!r.length&&e.comp.length;)r=e.comp.shift(),i.push(e.rel.shift());o=Ua(i,r,n)}return i.length||r.length?(t.push(o),n.push(r)):(i.push(o),Ua(i,r,n)),{rel:t,comp:n}}(o):o).comp[0];for(let e,t,n=1;e=o.comp[n],t=o.rel[n-1];n++)r.push(t),r=r.concat(e);return(o=Ir(r,function(e){return e.textContent===rn.invisibleTimes&&(e.type===E.OPERATOR||e.type===E.INFIXOP)})).rel.length?function e(t,n,r){if(!n.length)return t;const o=t.pop(),i=n.shift(),s=r.shift();if(i.type===E.INFIXOP&&(i.role===h.IMPLICIT||i.role===h.UNIT)){u.getInstance().output("Juxta Heuristic Case 2");const a=(o?[o,i]:[i]).concat(s);return e(t.concat(a),n,r)}if(!o)return u.getInstance().output("Juxta Heuristic Case 3"),e([i].concat(s),n,r);const a=s.shift();if(!a){u.getInstance().output("Juxta Heuristic Case 9");const s=A.factory.makeBranchNode(E.INFIXOP,[o,n.shift()],[i],i.textContent);return s.role=h.IMPLICIT,A.run("combine_juxtaposition",s),n.unshift(s),e(t,n,r)}if(wr(o)||wr(a))return u.getInstance().output("Juxta Heuristic Case 4"),e(t.concat([o,i,a]).concat(s),n,r);let c=null;return Kr(o)&&Kr(a)?(u.getInstance().output("Juxta Heuristic Case 5"),o.contentNodes.push(i),o.contentNodes=o.contentNodes.concat(a.contentNodes),o.childNodes.push(a),o.childNodes=o.childNodes.concat(a.childNodes),a.childNodes.forEach(e=>e.parent=o),(i.parent=o).addMathmlNodes(i.mathml),o.addMathmlNodes(a.mathml),c=o):Kr(o)?(u.getInstance().output("Juxta Heuristic Case 6"),o.contentNodes.push(i),o.childNodes.push(a),a.parent=o,(i.parent=o).addMathmlNodes(i.mathml),o.addMathmlNodes(a.mathml),c=o):Kr(a)?(u.getInstance().output("Juxta Heuristic Case 7"),a.contentNodes.unshift(i),a.childNodes.unshift(o),o.parent=a,(i.parent=a).addMathmlNodes(i.mathml),a.addMathmlNodes(o.mathml),c=a):(u.getInstance().output("Juxta Heuristic Case 8"),(c=A.factory.makeBranchNode(E.INFIXOP,[o,a],[i],i.textContent)).role=h.IMPLICIT),t.push(c),e(t.concat(s),n,r)}(o.comp.shift(),o.rel,o.comp):r})),A.add(new va("simple2prefix",e=>(1<e.textContent.length&&!e.textContent[0].match(/[A-Z]/)&&(e.role=h.PREFIXFUNC),e),e=>"braille"===A.options.modality&&e.type===E.IDENTIFIER)),A.add(new va("detect_cycle",e=>{e.type=E.MATRIX,e.role=h.CYCLE;const t=e.childNodes[0];return t.type=E.ROW,t.role=h.CYCLE,t.textContent="",t.contentNodes=[],e},e=>e.type===E.FENCED&&e.childNodes[0].type===E.INFIXOP&&e.childNodes[0].role===h.IMPLICIT&&e.childNodes[0].childNodes.every(function(e){return e.type===E.NUMBER})&&e.childNodes[0].contentNodes.every(function(e){return e.role===h.SPACE}))),A.add(new La("intvar_from_implicit",function(e){var t=e[0].childNodes;e.splice(0,1,...t)},e=>e[0]&&Wr(e[0]))),A.add(new va("intvar_from_fraction",function(e){const t=e.childNodes[1],n=t.childNodes[0];if(Lr(n))n.role=h.INTEGRAL;else if(Wr(n)){const r=n.childNodes.length,o=n.childNodes[r-2],i=n.childNodes[r-1];if(Lr(i))i.role=h.INTEGRAL;else if(vr(o,i)){const e=v.getInstance().prefixNode_(i,[o]);e.role=h.INTEGRAL,2===r?t.childNodes[0]=e:(n.childNodes.pop(),n.contentNodes.pop(),(n.childNodes[r-2]=e).parent=n)}}},e=>{if(e.type!==E.INTEGRAL)return!1;var[,e,t]=e.childNodes;return t.type===E.EMPTY&&e.type===E.FRACTION})),A.add(new va("rewrite_subcases",function(n){n.addAnnotation("Emph","top");let e=[];if(n.hasAnnotation("Emph","left")){const t=Ba(n.childNodes[0].childNodes[0].childNodes[0],!0);t.forEach(e=>e.addAnnotation("Emph","left")),e=e.concat(t);for(let e,t=0;e=n.childNodes[t];t++)e.childNodes.shift()}if(e.push(n),n.hasAnnotation("Emph","right")){const t=Ba(n.childNodes[0].childNodes[n.childNodes[0].childNodes.length-1].childNodes[0]);t.forEach(e=>e.addAnnotation("Emph","left")),e=e.concat(t),n.childNodes[0].childNodes.pop()}v.tableToMultiline(n);const t=v.getInstance().row(e),r=n.annotation.Emph;return n.annotation.Emph=["table"],r.forEach(e=>t.addAnnotation("Emph",e)),t},n=>{let r=!0,o=!0;if(Fa(n.childNodes[0].childNodes[0].mathmlTree)){for(let e,t=1;e=n.childNodes[t];t++)if(e.childNodes[0].childNodes.length){r=!1;break}}else r=!1;if(r&&n.addAnnotation("Emph","left"),Fa(n.childNodes[0].childNodes[n.childNodes[0].childNodes.length-1].mathmlTree)){const r=n.childNodes[0].childNodes.length;for(let e,t=1;e=n.childNodes[t];t++)if(e.childNodes.length>=r){o=!1;break}}else o=!1;return o&&n.addAnnotation("Emph","right"),r||o}));const ka=[E.PUNCTUATED,E.RELSEQ,E.MULTIREL,E.INFIXOP,E.PREFIXOP,E.POSTFIXOP];function Ba(e,t){if(!e.childNodes.length)return Va(e),[e];let n=null;if(e.type!==E.PUNCTUATED||(t?e.role!==h.ENDPUNCT:e.role!==h.STARTPUNCT)||Va((r=e.childNodes)[t?r.length-1:0])&&(e=r[t?0:r.length-1],n=r[t?r.length-1:0]),-1===ka.indexOf(e.type))return n?t?[e,n]:[n,e]:[e];{var r=e.childNodes;Va(r[t?r.length-1:0]);const o=D.combineContentChildren(e.type,e.role,e.contentNodes,e.childNodes);return n&&(t?o.push(n):o.unshift(n)),o}}const Ga={[h.METRIC]:h.METRIC,[h.VBAR]:h.NEUTRAL,[h.OPENFENCE]:h.OPEN,[h.CLOSEFENCE]:h.CLOSE};function Va(e){var t;if(e.type===E.PUNCTUATION)return t=Ga[e.role],t&&(e.role=t,e.type=E.FENCE,e.addAnnotation("Emph","fence"),1)}function Ha(e,t,n,r=n){const o=[];for(;e&&e.role===n;)o.push(e),e=t.shift();return o.length?(e&&t.unshift(e),[1===o.length?o[0]:function(e,t){const n=A.factory.makeBranchNode(E.PUNCTUATION,e,[]);return n.role=t,n}(o,r),t]):[e,t]}function ja(e){return["[","ï¼»"].includes(e)}function qa(e){return["]","ï¼½"].includes(e)}function Xa(e){return["(","â½","â‚"].includes(e)}function Ya(e){return[")","â¾","â‚"].includes(e)}function $a(e){return e.role===h.INFTY||e.type===E.PREFIXOP&&e.childNodes[0].role===h.INFTY}function Wa(e){var t=e.childNodes[0];if(e.type!==E.FENCED||(null==t?void 0:t.type)!==E.PUNCTUATED||3!==(null==t?void 0:t.childNodes.length)||1!==(null==t?void 0:t.contentNodes.length)||(null==t?void 0:t.childNodes[1].role)!==h.COMMA)return!1;var t=e.childNodes[0].childNodes[0],n=e.childNodes[0].childNodes[2],r=e.contentNodes[0].textContent,e=e.contentNodes[1].textContent;return!!(ja(r)&&Ya(e)||Xa(r)&&qa(e))||!(!Xa(r)||!Ya(e)||!$a(t)&&!$a(n))}function Ka(e){return e.hasAnnotation("clearspeak","simple")}function za(e){return e.type===E.IDENTIFIER&&(e.role===h.LATINLETTER||e.role===h.GREEKLETTER||e.role===h.OTHERLETTER||e.role===h.SIMPLEFUNC)}function Qa(e){return e.type===E.NUMBER&&(e.role===h.INTEGER||e.role===h.FLOAT)}function Ja(e){return Qa(e)||function(e){if(Za("Fraction_Over")||Za("Fraction_FracOver"))return!1;if(e.type!==E.FRACTION||e.role!==h.VULGAR)return!1;if(Za("Fraction_Ordinal"))return!0;var t=parseInt(e.childNodes[0].textContent,10),e=parseInt(e.childNodes[1].textContent,10);return 0<t&&t<20&&0<e&&e<11}(e)}function Za(e){return m.getInstance().options.style===e}A.add(new La("ellipses",e=>{const t=[];let n=e.shift();for(;n;)[n,e]=Ha(n,e,h.FULLSTOP,h.ELLIPSIS),[n,e]=Ha(n,e,h.DASH),t.push(n),n=e.shift();return t},e=>1<e.length)),A.add(new La("op_with_limits",e=>{const t=e[0];return t.type=E.LARGEOP,t.role=h.SUM,e},e=>e[0].type===E.OPERATOR&&e.slice(1).some(e=>e.type===E.RELSEQ||e.type===E.MULTIREL||e.type===E.INFIXOP&&e.role===h.ELEMENT||e.type===E.PUNCTUATED&&e.role===h.SEQUENCE))),A.add(new class extends ya{}("function_from_identifiers",e=>{var t=g(e.childNodes).map(e=>e.textContent.trim()).join("");if(S.Meaning.get(t).type===E.UNKNOWN)return e;const n=A.factory.makeLeafNode(t,v.getInstance().font(e.getAttribute("mathvariant")));return n.mathmlTree=e,n},e=>{const t=g(e.childNodes);return!(t.length<2)&&t.every(e=>R(e)===p.MI&&S.Meaning.get(e.textContent.trim()).role===h.LATINLETTER)})),A.add(new La("bracketed_interval",e=>{const t=e[0],n=e[1],r=e.slice(2),o=v.getInstance().row(r),i=A.factory.makeBranchNode(E.FENCED,[o],[t,n]);return i.role=h.INTERVAL,i},e=>{var t=e[0],n=e[1],e=e.slice(2);if(!(t&&n&&(qa(t.textContent)&&(ja(n.textContent)||qa(n.textContent))||ja(n.textContent)&&(ja(t.textContent)||qa(t.textContent)))))return!1;if(1===e.length&&e[0].type===E.PUNCTUATED&&1===e[0].contentNodes.length)return!0;n=Ir(e,Pr);return!(1!==n.rel.length||!n.comp[0].length||!n.comp[1].length)})),A.add(new va("interval_heuristic",e=>(e.role=h.INTERVAL,e),e=>Wa(e))),A.add(new va("propagateInterval",e=>(e.childNodes.forEach(e=>{Wa(e)&&(e.role=h.INTERVAL)}),e),e=>eo(e))),Yi(new Hi("clearspeak","simple",function(e){return Ja(e=e)||(za(t=e)||t.type===E.INFIXOP&&t.role===h.IMPLICIT&&(2===t.childNodes.length&&(za(t.childNodes[0])||Ja(t.childNodes[0]))&&za(t.childNodes[1])||3===t.childNodes.length&&Ja(t.childNodes[0])&&za(t.childNodes[1])&&za(t.childNodes[2])))||(t=e).type===E.PUNCTUATED&&t.role===h.ENDPUNCT&&2===t.childNodes.length&&t.childNodes[1].role===h.DEGREE&&(za(t.childNodes[0])||Qa(t.childNodes[0])||t.childNodes[0].type===E.PREFIXOP&&t.childNodes[0].role===h.NEGATIVE&&(za(t.childNodes[0].childNodes[0])||Qa(t.childNodes[0].childNodes[0])))||(t=e).type===E.PREFIXOP&&t.role===h.NEGATIVE&&Ka(t.childNodes[0])&&t.childNodes[0].type!==E.PREFIXOP&&t.childNodes[0].type!==E.APPL&&t.childNodes[0].type!==E.PUNCTUATED||(t=e).type===E.APPL&&(t.childNodes[0].role===h.PREFIXFUNC||t.childNodes[0].role===h.SIMPLEFUNC)&&(Ka(t.childNodes[1])||t.childNodes[1].type===E.FENCED&&Ka(t.childNodes[1].childNodes[0]))?"simple":"";var t})),$i("clearspeak","simple"),Yi(new Hi("clearspeak","unit",function(e){return(e=e).type===E.TEXT&&e.role!==h.LABEL||e.type===E.PUNCTUATED&&e.role===h.TEXT&&Qa(e.childNodes[0])&&function(t){for(let e=0;e<t.length-1;e++)if(t[e].type!==E.TEXT||""!==t[e].textContent)return;return t[t.length-1].type===E.TEXT}(e.childNodes.slice(1))||e.type===E.IDENTIFIER&&e.role===h.UNIT||e.type===E.INFIXOP&&(e.role===h.IMPLICIT||e.role===h.UNIT)?"unit":""})),$i("clearspeak","unit");const ec=[E.MULTIREL,E.RELSEQ,E.APPL,E.ROW,E.LINE],tc=[E.SUBSCRIPT,E.SUPERSCRIPT,E.OVERSCORE,E.UNDERSCORE];function nc(e,t){var n,e=e.parent;if(e)return n=e.type,-1!==ec.indexOf(n)||n===E.PREFIXOP&&e.role===h.NEGATIVE&&!t.script&&!t.enclosed||n===E.PREFIXOP&&e.role===h.GEOMETRY||!(n!==E.PUNCTUATED||t.enclosed&&e.role!==h.TEXT)}Yi(new ji("nemeth","number",function(e,t){return e.childNodes.length?(-1!==tc.indexOf(e.type)&&(t.script=!0),e.type===E.FENCED?(t.number=!1,t.enclosed=!0):e.type===E.PREFIXOP&&e.role!==h.GEOMETRY&&e.role!==h.NEGATIVE?t.number=!1:nc(e,t)&&(t.number=!0,t.enclosed=!1),["",t]):(nc(e,t)&&(t.number=!0,t.script=!1,t.enclosed=!1),[t.number?"number":"",{number:!1,enclosed:t.enclosed,script:t.script}])},{number:!0})),$i("nemeth","number"),Yi(new ji("depth","depth",function(e){return e.parent?[parseInt(e.parent.annotation.depth[0])+1]:[1]})),$i("depth","depth");class rc{static empty(){const e=ce("<math/>"),t=new rc(e,new Q);return t.mathml=e,t}static fromNode(e,t){const n=rc.empty();return n.root=e,t&&(n.mathml=t),n}static fromRoot(e,t){let n=e;for(;n.parent;)n=n.parent;const r=rc.fromNode(n);return t&&(r.mathml=t),r}static fromXml(e){const t=rc.empty();return e.childNodes[0]&&(t.root=Ar.fromXml(e.childNodes[0])),t}constructor(e,t){this.mathml=e,this.options=t,this.parser=new Ca(t),this.root=this.parser.parse(e),this.collator=this.parser.getFactory().leafMap.collateMeaning();var n=this.collator.newDefault(),r=(n&&(this.parser=new Ca(t),this.parser.getFactory().defaultMap=n,this.root=this.parser.parse(e)),oc.visit(this.root,{}),this.root);for(const o of qi.values())o.active&&o.annotate(r);for(const i of Xi.values())i.active&&i.visit(r,Object.assign({},i.def))}xml(e){const t=ce("<stree></stree>"),n=this.root.xml(t.ownerDocument,e);return t.appendChild(n),t}toString(e){return Ne(this.xml(e))}formatXml(e){return pe(this.toString(e))}displayTree(){this.root.displayTree()}replaceNode(e,t){const n=e.parent;n?n.replaceChild(e,t):this.root=t}toJson(){const e={};return e.stree=this.root.toJson(),e}}const oc=new ji("general","unit",(e,t)=>($r(e)&&(e.role=h.UNIT),!1));function ic(e,t){return sc(e,t).xml()}function sc(e,t){return new rc(e,t)}const ac=[],cc=!0,lc=new Map;function P(e){u.getInstance().generate(()=>["WALKING START: ",e.toString()]);const t=function(n){for(let e,t=0;e=ac[t];t++)if(e.test(n))return e.constr(n);return null}(e);let n;if(t)return n=t.getMathml(),u.getInstance().generate(()=>["WALKING END: ",e.toString()]),fc(n);if(1===e.mathml.length){if(u.getInstance().output("Walktree Case 0"),!e.childNodes.length)return u.getInstance().output("Walktree Case 0.1"),Da(n=e.mathml[0],e),u.getInstance().generate(()=>["WALKING END: ",e.toString()]),fc(n);const t=e.childNodes[0];if(1===e.childNodes.length&&t.type===E.EMPTY)return u.getInstance().output("Walktree Case 0.2"),Da(n=e.mathml[0],e),n.appendChild(P(t)),u.getInstance().generate(()=>["WALKING END: ",e.toString()]),fc(n);e.childNodes.forEach(e=>{e.mathml.length||(e.mathml=[Tc(e)])})}var r=e.contentNodes.map(Nc),o=(Ic(e,r),e.childNodes.map(P)),r=D.combineContentChildren(e.type,e.role,r,o);if(null===(n=e.mathmlTree))u.getInstance().output("Walktree Case 1"),n=uc(r,e);else{const e=dc(r);u.getInstance().output("Walktree Case 2"),n=e?(u.getInstance().output("Walktree Case 2.1"),gc(e)):(u.getInstance().output("Walktree Case 2.2"),Ac(n))}return function(n,t,r){if(t.length&&(1!==t.length||n!==t[0])){const c=r.role===h.IMPLICIT&&A.flags.combine_juxtaposition?function(e,t,n){const r=[];let o=g(e.childNodes),i=!1;for(;o.length;){const e=o.shift();if(e.hasAttribute(L.TYPE))r.push(e);else{const n=function(e,t){const n=[];let r=g(e.childNodes);for(;r.length;){const e=r.shift();e.nodeType===K.ELEMENT_NODE&&(e.hasAttribute(L.TYPE)||-1!==t.indexOf(e)?n.push(e):r=g(e.childNodes).concat(r))}return n}(e,t);0!==n.length&&(1!==n.length?(i?e.setAttribute("AuxiliaryImplicit",!0):i=!0,o=n.concat(o)):r.push(e))}}const s=[],a=n.childNodes.map(function(e){return e.mathmlTree});for(;a.length;){const e=a.pop();if(e){if(-1!==r.indexOf(e))break;-1!==t.indexOf(e)&&s.unshift(e)}}return r.concat(s)}(n,t,r):g(n.childNodes);if(!c.length)return t.forEach(function(e){n.appendChild(e)});let e=0;for(;t.length;){const r=t[0];if(c[e]===r||function(n,r){var e=rn.functionApplication;if(n&&r&&n.textContent&&r.textContent&&n.textContent===e&&r.textContent===e&&"true"===r.getAttribute(L.ADDED)){for(let e,t=0;e=n.attributes[t];t++)r.hasAttribute(e.nodeName)||r.setAttribute(e.nodeName,e.nodeValue);return le(n,r),1}return}(c[e],r))t.shift(),e++;else if(c[e]&&-1===t.indexOf(c[e]))e++;else if(function(e,t){if(!e)return;do{if((e=gc(e))===t)return 1}while(e);return}(r,n))t.shift();else{var o=c[e];if(o){{i=void 0;s=void 0;a=void 0;var i=n;var s=o;var a=r;let e=s,t=gc(e);for(;t&&t.firstChild===e&&!e.hasAttribute("AuxiliaryImplicit")&&t!==i;)t=gc(e=t);t&&(t.insertBefore(a,e),e.removeAttribute("AuxiliaryImplicit"))}t.shift()}else if(r.parentNode)n=gc(r),t.shift();else{const c=t[1];c&&c.parentNode?((n=gc(c)).insertBefore(r,c),t.shift()):n.insertBefore(r,null),t.shift()}}}}}(n=Sc(n),r,e),lc.has(e.id)||(lc.set(e.id,!0),Da(n,e)),u.getInstance().generate(()=>["WALKING END: ",e.toString()]),fc(n)}function uc(e,t){const n=function(e){var t=dc(e);if(!t)return{type:ba.INVALID,node:null};var n=dc(e.slice().reverse());if(t===n)return{type:ba.VALID,node:t};const r=pc(t),o=function(e,t){let n=0;for(;e[n]&&-1===t.indexOf(e[n]);)n++;return e.slice(0,n+1)}(r,e),i=pc(n,function(e){return-1!==o.indexOf(e)}),s=i[0],a=o.indexOf(s);return-1===a?{type:ba.INVALID,node:null}:{type:o.length!==r.length?ba.PRUNED:(t=o[a+1],e=i[1],t&&e&&!t.previousSibling&&!e.nextSibling?ba.VALID:ba.INVALID),node:s}}(e);let r=n.node;var o=n.type;if(o!==ba.VALID||!gr(r)||!r.parentNode&&t.parent)if(u.getInstance().output("Walktree Case 1.1"),r=xa(),o===ba.PRUNED)u.getInstance().output("Walktree Case 1.1.0"),r=function(t,e,n){let r=function e(t){const n=g(t.childNodes);if(!n)return t;const r=n.filter(function(e){return e.nodeType===K.ELEMENT_NODE&&!mr(e)});return 1===r.length&&gr(r[0])&&!r[0].hasAttribute(L.TYPE)?e(r[0]):t}(e);if(fr(r)){u.getInstance().output("Walktree Case 1.1.0.0"),hc(r,t),g(r.childNodes).forEach(function(e){t.appendChild(e)});const e=t;t=r,r=e}e=n.indexOf(e);return le(n[e]=r,t),t.appendChild(r),n.forEach(function(e){t.appendChild(e)}),t}(r,n.node,e);else if(e[0]){u.getInstance().output("Walktree Case 1.1.1");const t=dc(e);if(t){const n=function(e,t){const n=g(e.childNodes);let r=1/0,o=-1/0;return t.forEach(function(e){e=n.indexOf(e);-1!==e&&(r=Math.min(r,e),o=Math.max(o,e))}),n.slice(r,o+1)}(gc(t),e);le(t,r),n.forEach(function(e){r.appendChild(e)})}else hc(r,e[0]),r=e[0]}return t.mathmlTree||(t.mathmlTree=r),r}function hc(e,t){for(const n of _a)e.hasAttribute(n)&&(t.setAttribute(n,e.getAttribute(n)),e.removeAttribute(n))}function dc(e){let t=0,n=null;for(;!n&&t<e.length;)e[t].parentNode&&(n=e[t]),t++;return n}function pc(e,t){const n=t||(e=>!1),r=[e];for(;!n(e)&&!fr(e)&&e.parentNode;)e=gc(e),r.unshift(e);return r}function fc(e){for(;!fr(e)&&function(t){var e=gc(t);return e&&gr(e)&&g(e.childNodes).every(function(e){return e===t||mc(e)})}(e);)e=gc(e);return e}function mc(e){if(e.nodeType!==K.ELEMENT_NODE)return!0;if(!e||mr(e))return!0;var t=g(e.childNodes);return!(!gr(e)&&t.length||(t=e)&&dr.includes(R(t))||e.hasAttribute(L.TYPE)||(t=e)&&R(t)===p.MGLYPH&&(!(t=t.parentNode)||!lr.includes(R(t))))&&g(e.childNodes).every(mc)}function gc(e){return e.parentNode}function Ec(e,t){const n=new D(t);e.setAttribute(L.COLLAPSED,n.toString())}function Nc(e){if(e.mathml.length)return P(e);var t=cc?Tc(e):xa();return e.mathml=[t],t}function Sc(n){if(R(n)!==p.MFENCED)return n;const r=xa();for(let e,t=0;e=n.attributes[t];t++)-1===["open","close","separators"].indexOf(e.name)&&r.setAttribute(e.name,e.value);return g(n.childNodes).forEach(function(e){r.appendChild(e)}),le(n,r),r}function Tc(e){const t=ue("mo"),n=de(e.textContent);return t.appendChild(n),Da(t,e),t.setAttribute(L.ADDED,"true"),t}function Ic(e,t){const n=e.type+(e.textContent?","+e.textContent:"");t.forEach(function(e){Ac(e).setAttribute(L.OPERATOR,n)})}function Ac(e){const n=g(e.childNodes);if(!n)return e;const r=n.filter(function(e){return!mc(e)}),o=[];for(let e,t=0;e=r[t];t++)if(gr(e)&&e.getAttribute(L.TYPE)!==E.PUNCTUATION){const n=Ac(e);n&&n!==e&&o.push(n)}else o.push(e);return 1===o.length?o[0]:e}function bc(e){return pe(e.toString()).toString().replace(new RegExp(Ma,"g"),"")}function Rc(n,e){const r=!!e,o=e||[],i=n.parent,s=n.contentNodes.map(function(e){return e.id}),a=(s.unshift("c"),[n.id,s]);for(let e,t=0;e=n.childNodes[t];t++){const n=P(e),s=(o.push(n),Ac(n));i&&!r&&s.setAttribute(L.PARENT,i.id.toString()),a.push(e.id)}return a}(n=ba=ba||{}).VALID="valid",n.INVALID="invalid",n.PRUNED="pruned";class Oc{constructor(e){this.semantic=e}}class Cc extends Oc{static test(e){return!e.mathmlTree&&e.type===E.LINE&&e.role===h.BINOMIAL}constructor(e){super(e),this.mml=e.mathmlTree}getMathml(){if(!this.semantic.childNodes.length)return this.mml;const e=this.semantic.childNodes[0];if(this.mml=P(e),this.mml.hasAttribute(L.TYPE)){const e=xa();le(this.mml,e),e.appendChild(this.mml),this.mml=e}return Da(this.mml,this.semantic),this.mml}}class yc extends Oc{static test(e){if(!e.mathmlTree||!e.childNodes.length)return!1;var t=R(e.mathmlTree),e=e.childNodes[0].role;return t===p.MSUBSUP&&e===h.SUBSUP||t===p.MUNDEROVER&&e===h.UNDEROVER}constructor(e){super(e),this.mml=e.mathmlTree}getMathml(){const e=this.semantic.childNodes[0],t=e.childNodes[0],n=this.semantic.childNodes[1],r=e.childNodes[1],o=P(n),i=P(t),s=P(r);return Da(this.mml,this.semantic),this.mml.setAttribute(L.CHILDREN,wa([t,r,n])),[i,s,o].forEach(e=>Ac(e).setAttribute(L.PARENT,this.mml.getAttribute(L.ID))),this.mml.setAttribute(L.TYPE,e.role),Ec(this.mml,[this.semantic.id,[e.id,t.id,r.id],n.id]),this.mml}}class vc extends Oc{static multiscriptIndex(e){return e.type===E.PUNCTUATED&&e.contentNodes[0].role===h.DUMMY?Rc(e):(P(e),e.id)}static createNone_(e){const t=ue("none");return e&&Da(t,e),t.setAttribute(L.ADDED,"true"),t}constructor(e){super(e),this.mml=e.mathmlTree}completeMultiscript(e,t){const n=g(this.mml.childNodes).slice(1);let r=0;var o=e=>{for(const t of e){const e=n[r];if(e&&t===parseInt(e.getAttribute(L.ID)))e.setAttribute(L.PARENT,this.semantic.id.toString()),r++;else if(e&&t===parseInt(Ac(e).getAttribute(L.ID)))Ac(e).setAttribute(L.PARENT,this.semantic.id.toString()),r++;else{const n=this.semantic.querySelectorAll(e=>e.id===t);this.mml.insertBefore(vc.createNone_(n[0]),e||null)}}};o(e),n[r]&&R(n[r])!==p.MPRESCRIPTS?this.mml.insertBefore(n[r],ue("mprescripts")):r++,o(t)}}class Lc extends vc{static test(e){return!!e.mathmlTree&&(R(e.mathmlTree)===p.MMULTISCRIPTS&&(e.type===E.SUPERSCRIPT||e.type===E.SUBSCRIPT))}constructor(e){super(e)}getMathml(){let e,t,n;if(Da(this.mml,this.semantic),this.semantic.childNodes[0]&&this.semantic.childNodes[0].role===h.SUBSUP){const o=this.semantic.childNodes[0];e=o.childNodes[0],t=vc.multiscriptIndex(this.semantic.childNodes[1]),n=vc.multiscriptIndex(o.childNodes[1]);var r=[this.semantic.id,[o.id,e.id,n],t];Ec(this.mml,r),this.mml.setAttribute(L.TYPE,o.role),this.completeMultiscript(D.interleaveIds(n,t),[])}else{e=this.semantic.childNodes[0],t=vc.multiscriptIndex(this.semantic.childNodes[1]);const n=[this.semantic.id,e.id,t];Ec(this.mml,n)}const o=D.collapsedLeafs(n||[],t);return Ac(P(e)).setAttribute(L.PARENT,this.semantic.id.toString()),o.unshift(e.id),this.mml.setAttribute(L.CHILDREN,o.join(",")),this.mml}}class Mc extends vc{static test(e){return!!e.mathmlTree&&e.type===E.TENSOR}constructor(e){super(e)}getMathml(){P(this.semantic.childNodes[0]);var e=vc.multiscriptIndex(this.semantic.childNodes[1]),t=vc.multiscriptIndex(this.semantic.childNodes[2]),n=vc.multiscriptIndex(this.semantic.childNodes[3]),r=vc.multiscriptIndex(this.semantic.childNodes[4]),o=(Da(this.mml,this.semantic),[this.semantic.id,this.semantic.childNodes[0].id,e,t,n,r]);Ec(this.mml,o);const i=D.collapsedLeafs(e,t,n,r);return i.unshift(this.semantic.childNodes[0].id),this.mml.setAttribute(L.CHILDREN,i.join(",")),this.completeMultiscript(D.interleaveIds(n,r),D.interleaveIds(e,t)),this.mml}}class _c extends Oc{static test(e){return!(!e.mathmlTree||!e.fencePointer||e.mathmlTree.getAttribute("data-semantic-type"))}static makeEmptyNode_(e){const t=xa(),n=new Ar(e);return n.type=E.EMPTY,n.mathmlTree=t,n}static fencedMap_(e,t){t[e.id]=e.mathmlTree,e.embellished&&_c.fencedMap_(e.childNodes[0],t)}constructor(e){super(e),this.fenced=null,this.fencedMml=null,this.fencedMmlNodes=[],this.ofence=null,this.ofenceMml=null,this.ofenceMap={},this.cfence=null,this.cfenceMml=null,this.cfenceMap={},this.parentCleanup=[]}getMathml(){return this.getFenced_(),this.fencedMml=P(this.fenced),this.getFencesMml_(),this.fenced.type!==E.EMPTY||this.fencedMml.parentNode||(this.fencedMml.setAttribute(L.ADDED,"true"),this.cfenceMml.parentNode.insertBefore(this.fencedMml,this.cfenceMml)),this.getFencedMml_(),this.rewrite_()}fencedElement(e){return e.type===E.FENCED||e.type===E.MATRIX||e.type===E.VECTOR}getFenced_(){let e=this.semantic;for(;!this.fencedElement(e);)e=e.childNodes[0];this.fenced=e.childNodes[0],this.ofence=e.contentNodes[0],this.cfence=e.contentNodes[1],_c.fencedMap_(this.ofence,this.ofenceMap),_c.fencedMap_(this.cfence,this.cfenceMap)}getFencedMml_(){let e=this.ofenceMml.nextSibling;for(e=e===this.fencedMml?e:this.fencedMml;e&&e!==this.cfenceMml;)this.fencedMmlNodes.push(e),e=e.nextSibling}getFencesMml_(){let e=this.semantic;const t=Object.keys(this.ofenceMap),n=Object.keys(this.cfenceMap);for(;!(this.ofenceMml&&this.cfenceMml||e===this.fenced);)-1===t.indexOf(e.fencePointer)||this.ofenceMml||(this.ofenceMml=e.mathmlTree),-1===n.indexOf(e.fencePointer)||this.cfenceMml||(this.cfenceMml=e.mathmlTree),e=e.childNodes[0];this.ofenceMml||(this.ofenceMml=this.ofence.mathmlTree),this.cfenceMml||(this.cfenceMml=this.cfence.mathmlTree),this.ofenceMml&&(this.ofenceMml=fc(this.ofenceMml)),this.cfenceMml&&(this.cfenceMml=fc(this.cfenceMml))}rewrite_(){let n=this.semantic,r=null;var e=this.introduceNewLayer_();for(Da(e,this.fenced.parent);!this.fencedElement(n);){var t=n.mathmlTree,o=this.specialCase_(n,t);if(o)n=o;else{Da(t,n);const r=[];for(let e,t=1;e=n.childNodes[t];t++)r.push(P(e));n=n.childNodes[0]}var o=ue("dummy"),i=t.childNodes[0];le(t,o),le(e,t),le(t.childNodes[0],e),le(o,i),r=r||t}return P(this.ofence),P(this.cfence),this.cleanupParents_(),r||e}specialCase_(e,t){var n=R(t);let r,o=null;if(n===p.MSUBSUP?(o=e.childNodes[0],r=yc):n===p.MMULTISCRIPTS&&(e.type===E.SUPERSCRIPT||e.type===E.SUBSCRIPT?r=Lc:e.type===E.TENSOR&&(r=Mc),o=r&&e.childNodes[0]&&e.childNodes[0].role===h.SUBSUP?e.childNodes[0]:e),!o)return null;var n=o.childNodes[0],i=_c.makeEmptyNode_(n.id);return o.childNodes[0]=i,t=new r(e).getMathml(),o.childNodes[0]=n,this.parentCleanup.push(t),o.childNodes[0]}introduceNewLayer_(){const e=this.fullFence(this.ofenceMml),t=this.fullFence(this.cfenceMml);let n=xa();if(le(this.fencedMml,n),this.fencedMmlNodes.forEach(e=>n.appendChild(e)),n.insertBefore(e,this.fencedMml),n.appendChild(t),!n.parentNode){const e=xa();for(;0<n.childNodes.length;)e.appendChild(n.childNodes[0]);n.appendChild(e),n=e}return n}fullFence(e){var t=this.fencedMml.parentNode;let n=e;for(;n.parentNode&&n.parentNode!==t;)n=n.parentNode;return n}cleanupParents_(){this.parentCleanup.forEach(function(e){var t=e.childNodes[1].getAttribute(L.PARENT);e.childNodes[0].setAttribute(L.PARENT,t)})}}class wc extends Oc{static test(e){return!!e.mathmlTree&&e.hasAnnotation("Emph","top")}constructor(e){super(e),this.mrows=[],this.mml=e.mathmlTree}getMathml(){if(this.recurseToTable(this.semantic),this.mrows.length){const e=xa();this.mml.parentNode.insertBefore(e,this.mml);for(const t of this.mrows)e.appendChild(t);e.appendChild(this.mml)}return this.mml}recurseToTable(e){var t;if(e.hasAnnotation("Emph","top")||e.hasAnnotation("Emph","fence")||!e.hasAnnotation("Emph","left")&&!e.hasAnnotation("Emph","right")){if(!e.mathmlTree||R(e.mathmlTree)===p.MTABLE&&null!=(t=e.annotation.Emph)&&t.length&&"table"!==e.annotation.Emph[0]){const t=xa();Da(t,e),this.mrows.unshift(t)}else{if(R(e.mathmlTree)===p.MTABLE&&null!=(t=e.annotation.Emph)&&t.length&&"table"===e.annotation.Emph[0])return void this.finalizeTable(e);Da(e.mathmlTree,e)}if(e.childNodes.forEach(this.recurseToTable.bind(this)),e.textContent||"punctuated"===e.type){const t=e.contentNodes.map(e=>{const t=Nc(e);return t.hasAttribute("data-semantic-added")?this.mrows.unshift(t):this.recurseToTable(e),t});Ic(e,t)}else e.contentNodes.forEach(this.recurseToTable.bind(this))}else P(e)}finalizeTable(e){Da(e.mathmlTree,e),e.contentNodes.forEach(e=>{P(e)}),e.childNodes.forEach(e=>{P(e)})}}class Dc extends Oc{static test(e){if(!e.mathmlTree||!e.childNodes.length)return!1;var t=R(e.mathmlTree),e=e.type;return(e===E.LIMUPPER||e===E.LIMLOWER)&&(t===p.MSUBSUP||t===p.MUNDEROVER)||e===E.LIMBOTH&&(t===p.MSUB||t===p.MUNDER||t===p.MSUP||t===p.MOVER)}static walkTree_(e){e&&P(e)}constructor(e){super(e),this.mml=e.mathmlTree}getMathml(){const e=this.semantic.childNodes;return this.semantic.type!==E.LIMBOTH&&3<=this.mml.childNodes.length&&(this.mml=uc([this.mml],this.semantic)),Da(this.mml,this.semantic),e[0].mathmlTree||(e[0].mathmlTree=this.semantic.mathmlTree),e.forEach(Dc.walkTree_),this.mml}}class Pc extends Oc{static test(e){return!!e.mathmlTree&&e.type===E.LINE}constructor(e){super(e),this.mml=e.mathmlTree}getMathml(){return this.semantic.contentNodes.length&&P(this.semantic.contentNodes[0]),this.semantic.childNodes.length&&P(this.semantic.childNodes[0]),Da(this.mml,this.semantic),this.mml}}class xc extends Oc{static test(e){return!!e.mathmlTree&&(e.type===E.INFERENCE||e.type===E.PREMISES)}constructor(e){super(e),this.mml=e.mathmlTree}getMathml(){return this.semantic.childNodes.length&&(this.semantic.contentNodes.forEach(function(e){P(e),Da(e.mathmlTree,e)}),this.semantic.childNodes.forEach(function(e){P(e)}),Da(this.mml,this.semantic),this.mml.getAttribute("data-semantic-id")===this.mml.getAttribute("data-semantic-parent")&&this.mml.removeAttribute("data-semantic-parent")),this.mml}}class Uc extends Oc{static test(e){return e.type===E.MATRIX||e.type===E.VECTOR||e.type===E.CASES}constructor(e){super(e),this.inner=[],this.mml=e.mathmlTree}getMathml(){const e=Nc(this.semantic.contentNodes[0]),t=this.semantic.contentNodes[1]?Nc(this.semantic.contentNodes[1]):null;if(this.inner=this.semantic.childNodes.map(P),this.mml)if(R(this.mml)===p.MFENCED){var n=this.mml.childNodes;this.mml.insertBefore(e,n[0]||null),t&&this.mml.appendChild(t),this.mml=Sc(this.mml)}else{const r=[e,this.mml];t&&r.push(t),this.mml=uc(r,this.semantic)}else this.mml=uc([e].concat(this.inner,[t]),this.semantic);return Da(this.mml,this.semantic),this.mml}}class Fc extends Oc{static test(e){return e.type===E.PUNCTUATED&&(e.role===h.TEXT||e.contentNodes.every(e=>e.role===h.DUMMY))}constructor(e){super(e),this.mml=e.mathmlTree}getMathml(){var e=[],t=Rc(this.semantic,e);return this.mml=uc(e,this.semantic),Da(this.mml,this.semantic),this.mml.removeAttribute(L.CONTENT),Ec(this.mml,t),this.mml}}ac.push({test:Dc.test,constr:e=>new Dc(e)},{test:_c.test,constr:e=>new _c(e)},{test:yc.test,constr:e=>new yc(e)},{test:Mc.test,constr:e=>new Mc(e)},{test:Lc.test,constr:e=>new Lc(e)},{test:Pc.test,constr:e=>new Pc(e)},{test:Cc.test,constr:e=>new Cc(e)},{test:xc.test,constr:e=>new xc(e)},{test:wc.test,constr:e=>new wc(e)},{test:Uc.test,constr:e=>new Uc(e)},{test:Fc.test,constr:e=>new Fc(e)});let kc=0;class Bc{constructor(){this.counter=kc++,this.ATTR="sre-highlight-"+this.counter.toString(),this.color=null,this.mactionName="",this.currentHighlights=[]}highlight(e){this.currentHighlights.push(e.map(e=>{var t=this.highlightNode(e);return this.setHighlighted(e),t}))}highlightAll(e){var n=this.getMactionNodes(e);for(let e,t=0;e=n[t];t++)this.highlight([e])}unhighlight(){const e=this.currentHighlights.pop();e&&e.forEach(e=>{this.isHighlighted(e.node)&&(this.unhighlightNode(e),this.unsetHighlighted(e.node))})}unhighlightAll(){for(;0<this.currentHighlights.length;)this.unhighlight()}setColor(e){this.color=e}colorString(){return this.color.rgba()}addEvents(e,n){const r=this.getMactionNodes(e);for(let e,t=0;e=r[t];t++)for(const[r,o]of Object.entries(n))e.addEventListener(r,o)}getMactionNodes(e){return Array.from(e.getElementsByClassName(this.mactionName))}isMactionNode(e){const t=e.className||e.getAttribute("class");return!!t&&!!t.match(new RegExp(this.mactionName))}isHighlighted(e){return e.hasAttribute(this.ATTR)}setHighlighted(e){e.setAttribute(this.ATTR,"true")}unsetHighlighted(e){e.removeAttribute(this.ATTR)}colorizeAll(e){ae(e),b(`.//*[@${L.ID}]`,e).forEach(e=>this.colorize(e))}uncolorizeAll(e){b(`.//*[@${L.ID}]`,e).forEach(e=>this.uncolorize(e))}colorize(e){var t=Ma+"foreground";e.hasAttribute(t)&&(e.setAttribute(t+"-old",e.style.color),e.style.color=e.getAttribute(t))}uncolorize(e){var t=Ma+"foreground-old";e.hasAttribute(t)&&(e.style.color=e.getAttribute(t))}}class Gc extends Bc{constructor(){super(),this.mactionName="mjx-maction"}highlightNode(e){const t={node:e,background:e.style.backgroundColor,foreground:e.style.color};if(!this.isHighlighted(e)){const t=this.colorString();e.style.backgroundColor=t.background,e.style.color=t.foreground}return t}unhighlightNode(e){e.node.style.backgroundColor=e.background,e.node.style.color=e.foreground}}const Vc={red:{red:255,green:0,blue:0},green:{red:0,green:255,blue:0},blue:{red:0,green:0,blue:255},yellow:{red:255,green:255,blue:0},cyan:{red:0,green:255,blue:255},magenta:{red:255,green:0,blue:255},white:{red:255,green:255,blue:255},black:{red:0,green:0,blue:0}};function Hc(e,t){var e=e||{color:t};let n=Object.prototype.hasOwnProperty.call(e,"color")?Vc[e.color]:e;return(n=n||Vc[t]).alpha=Object.prototype.hasOwnProperty.call(e,"alpha")?e.alpha:1,t=n,e=e=>(e=Math.max(e,0),e=Math.min(255,e),Math.round(e)),t.red=e(t.red),t.green=e(t.green),t.blue=e(t.blue),t.alpha=Math.max(t.alpha,0),t.alpha=Math.min(1,t.alpha),t}class jc{static toHex(e){e=e.toString(16);return 1===e.length?"0"+e:e}constructor(e,t){this.foreground=Hc(t,jc.DEFAULT_FOREGROUND_),this.background=Hc(e,jc.DEFAULT_BACKGROUND_)}rgba(){function e(e){return"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"}return{background:e(this.background),foreground:e(this.foreground)}}rgb(){function e(e){return"rgb("+e.red+","+e.green+","+e.blue+")"}return{background:e(this.background),alphaback:this.background.alpha.toString(),foreground:e(this.foreground),alphafore:this.foreground.alpha.toString()}}hex(){function e(e){return"#"+jc.toHex(e.red)+jc.toHex(e.green)+jc.toHex(e.blue)}return{background:e(this.background),alphaback:this.background.alpha.toString(),foreground:e(this.foreground),alphafore:this.foreground.alpha.toString()}}}jc.DEFAULT_BACKGROUND_="blue",jc.DEFAULT_FOREGROUND_="black";class qc{constructor(){this.hue=10,this.sat=100,this.light=50,this.incr=50}generate(){return e=function(e,t,n){t=1<t?t/100:t,n=1<n?n/100:n;var t=(1-Math.abs(2*n-1))*t,r=t*(1-Math.abs(e/60%2-1)),n=n-t/2;let o=0,i=0,s=0;return 0<=e&&e<60?[o,i,s]=[t,r,0]:60<=e&&e<120?[o,i,s]=[r,t,0]:120<=e&&e<180?[o,i,s]=[0,t,r]:180<=e&&e<240?[o,i,s]=[0,r,t]:240<=e&&e<300?[o,i,s]=[r,0,t]:300<=e&&e<360&&([o,i,s]=[t,0,r]),{red:o+n,green:i+n,blue:s+n}}(this.hue,this.sat,this.light),"rgb("+(e={red:Math.round(255*e.red),green:Math.round(255*e.green),blue:Math.round(255*e.blue)}).red+","+e.green+","+e.blue+")";var e}increment(){this.hue=(this.hue+this.incr)%360}}class Xc extends Bc{constructor(){super(),this.mactionName="mjx-svg-maction"}highlightNode(e){let t;if(this.isHighlighted(e))return t={node:e.previousSibling||e,background:e.style.backgroundColor,foreground:e.style.color};if("svg"===e.tagName){const t={node:e,background:e.style.backgroundColor,foreground:e.style.color};return e.style.backgroundColor=this.colorString().background,e.style.color=this.colorString().foreground,t}const n=he("http://www.w3.org/2000/svg","rect");let r;if("use"===e.nodeName){const t=he("http://www.w3.org/2000/svg","g");e.parentNode.insertBefore(t,e),t.appendChild(e),r=t.getBBox(),t.parentNode.replaceChild(e,t)}else r=e.getBBox();n.setAttribute("x",(r.x-40).toString()),n.setAttribute("y",(r.y-40).toString()),n.setAttribute("width",(r.width+80).toString()),n.setAttribute("height",(r.height+80).toString());var o=e.getAttribute("transform");return o&&n.setAttribute("transform",o),n.setAttribute("fill",this.colorString().background),n.setAttribute(this.ATTR,"true"),e.parentNode.insertBefore(n,e),t={node:n,foreground:e.getAttribute("fill")},e.setAttribute("fill",this.colorString().foreground),t}setHighlighted(e){"svg"===e.tagName&&super.setHighlighted(e)}unhighlightNode(e){if("background"in e)return e.node.style.backgroundColor=e.background,void(e.node.style.color=e.foreground);e.foreground?e.node.nextSibling.setAttribute("fill",e.foreground):e.node.nextSibling.removeAttribute("fill"),e.node.parentNode.removeChild(e.node)}isMactionNode(e){let t=e.className||e.getAttribute("class");return!!t&&(!!(t=void 0!==t.baseVal?t.baseVal:t)&&!!t.match(new RegExp(this.mactionName)))}}const Yc={SVG:Xc,"SVG-V3":class extends Xc{constructor(){super(),this.mactionName="maction"}highlightNode(e){let t;if(this.isHighlighted(e))return t={node:e,background:this.colorString().background,foreground:this.colorString().foreground};if("svg"===e.tagName||"MJX-CONTAINER"===e.tagName)return t={node:e,background:e.style.backgroundColor,foreground:e.style.color},e.style.backgroundColor=this.colorString().background,e.style.color=this.colorString().foreground,t;const n=(null!==document&&void 0!==document?document:G).createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("sre-highlighter-added","true");var r=e.getBBox(),r=(n.setAttribute("x",(r.x-40).toString()),n.setAttribute("y",(r.y-40).toString()),n.setAttribute("width",(r.width+80).toString()),n.setAttribute("height",(r.height+80).toString()),e.getAttribute("transform"));if(r&&n.setAttribute("transform",r),n.setAttribute("fill",this.colorString().background),e.setAttribute(this.ATTR,"true"),e.parentNode.insertBefore(n,e),t={node:e,foreground:e.getAttribute("fill")},"rect"===e.nodeName){const t=new jc({alpha:0,color:"white"});e.setAttribute("fill",t.rgba().background)}else e.setAttribute("fill",this.colorString().foreground);return t}unhighlightNode(e){const t=e.node.previousSibling;if(t&&t.hasAttribute("sre-highlighter-added"))return e.foreground?e.node.setAttribute("fill",e.foreground):e.node.removeAttribute("fill"),void e.node.parentNode.removeChild(t);e.node.style.backgroundColor=e.background,e.node.style.color=e.foreground}isMactionNode(e){return e.getAttribute("data-mml-node")===this.mactionName}getMactionNodes(e){return Array.from(b(`.//*[@data-mml-node="${this.mactionName}"]`,e))}},NativeMML:class extends Bc{constructor(){super(),this.mactionName="maction"}highlightNode(e){var t=e.getAttribute("style"),t=(t+=";background-color: "+this.colorString().background)+(";color: "+this.colorString().foreground);return e.setAttribute("style",t),{node:e}}unhighlightNode(e){let t=e.node.getAttribute("style");t=(t=t.replace(";background-color: "+this.colorString().background,"")).replace(";color: "+this.colorString().foreground,""),e.node.setAttribute("style",t)}colorString(){return this.color.rgba()}getMactionNodes(e){return Array.from(e.getElementsByTagName(this.mactionName))}isMactionNode(e){return e.tagName===this.mactionName}},"HTML-CSS":class extends Bc{constructor(){super(),this.mactionName="maction"}highlightNode(e){const t={node:e,foreground:e.style.color,position:e.style.position},n=this.color.rgb();e.style.color=n.foreground,e.style.position="relative";var r=e.bbox;if(r&&r.w){const o=ue("span"),i=parseFloat(e.style.paddingLeft||"0");o.style.backgroundColor=n.background,o.style.opacity=n.alphaback.toString(),o.style.display="inline-block",o.style.height=r.h+r.d+.1+"em",o.style.verticalAlign=-r.d+"em",o.style.marginTop=o.style.marginBottom="-0.05em",o.style.width=r.w+0+"em",o.style.marginLeft=+i+"em",o.style.marginRight=-r.w-i+"em",e.parentNode.insertBefore(o,e),t.box=o}return t}unhighlightNode(e){const t=e.node;t.style.color=e.foreground,t.style.position=e.position,e.box&&e.box.parentNode.removeChild(e.box)}},"MML-CSS":class extends Gc{constructor(){super(),this.mactionName="maction"}getMactionNodes(e){return Array.from(e.getElementsByTagName(this.mactionName))}isMactionNode(e){return e.tagName===this.mactionName}},CommonHTML:Gc,CHTML:class extends Gc{constructor(){super()}isMactionNode(e){return(null==(e=e.tagName)?void 0:e.toUpperCase())===this.mactionName.toUpperCase()}getMactionNodes(e){return Array.from(e.getElementsByTagName(this.mactionName))}}};function $c(e){return e?e.split(/,/):[]}function Wc(e,t){return e.getAttribute(t)}function Kc(e){if(e.hasAttribute(L.TYPE)&&!e.hasAttribute(L.PARENT))return e;var n=fe(e,L.TYPE);for(let e,t=0;e=n[t];t++)if(!e.hasAttribute(L.PARENT))return e;return e}function zc(e,t){return e.getAttribute(L.ID)===t?e:me(e,L.ID,t)[0]}class Qc{static textContent(e,t,n){!n&&t.textContent?e.textContent=t.textContent:1<(n=$c(Wc(t,L.OPERATOR))).length&&(e.textContent=n[1])}static isPunctuated(e){return!D.simpleCollapseStructure(e)&&e[1]&&D.contentCollapseStructure(e[1])}constructor(e){this.mathml=e,this.factory=new br,this.nodeDict={},this.mmlRoot=Kc(e),this.streeRoot=this.assembleTree(this.mmlRoot),this.stree=rc.fromNode(this.streeRoot,this.mathml),this.xml=this.stree.xml()}getTree(){return this.stree}assembleTree(e){const t=this.makeNode(e),n=$c(Wc(e,L.CHILDREN)),r=$c(Wc(e,L.CONTENT));if(0===r.length&&0===n.length)return Qc.textContent(t,e),t;if(0<r.length){const e=zc(this.mathml,r[0]);e&&Qc.textContent(t,e,!0)}t.contentNodes=r.map(e=>this.setParent(e,t)),t.childNodes=n.map(e=>this.setParent(e,t));e=Wc(e,L.COLLAPSED);return e?this.postProcess(t,e):t}makeNode(e){const t=Wc(e,L.TYPE),n=Wc(e,L.ROLE),r=Wc(e,L.FONT),o=Wc(e,L.ANNOTATION)||"",i=Wc(e,L.ATTRIBUTES)||"",s=Wc(e,L.ID),a=Wc(e,L.EMBELLISHED),c=Wc(e,L.FENCEPOINTER),l=this.createNode(parseInt(s,10));return l.type=t,l.role=n,l.font=r||d.UNKNOWN,l.parseAnnotation(o),l.parseAttributes(i),c&&(l.fencePointer=c),a&&(l.embellished=a),l}makePunctuation(e){const t=this.createNode(e);return t.updateContent(rn.invisibleComma),t.role=h.DUMMY,t}makePunctuated(e,t,n){const r=this.createNode(t[0]),o=(r.type=E.PUNCTUATED,r.embellished=e.embellished,r.fencePointer=e.fencePointer,r.role=n,t.splice(1,1)[0].slice(1));r.contentNodes=o.map(this.makePunctuation.bind(this)),this.collapsedChildren_(t)}makeEmpty(e,t,n){const r=this.createNode(t);r.type=E.EMPTY,r.embellished=e.embellished,r.fencePointer=e.fencePointer,r.role=n}makeIndex(e,t,n){if(Qc.isPunctuated(t))return this.makePunctuated(e,t,n),void t[0];D.simpleCollapseStructure(t)&&!this.nodeDict[t.toString()]&&this.makeEmpty(e,t,n)}postProcess(e,t){const n=D.fromString(t).array;if(e.type===h.SUBSUP){const t=this.createNode(n[1][0]);return t.type=E.SUBSCRIPT,t.role=h.SUBSUP,e.type=E.SUPERSCRIPT,t.embellished=e.embellished,t.fencePointer=e.fencePointer,this.makeIndex(e,n[1][2],h.RIGHTSUB),this.makeIndex(e,n[2],h.RIGHTSUPER),this.collapsedChildren_(n),e}if(e.type===E.SUBSCRIPT)return this.makeIndex(e,n[2],h.RIGHTSUB),this.collapsedChildren_(n),e;if(e.type===E.SUPERSCRIPT)return this.makeIndex(e,n[2],h.RIGHTSUPER),this.collapsedChildren_(n),e;if(e.type===E.TENSOR)return this.makeIndex(e,n[2],h.LEFTSUB),this.makeIndex(e,n[3],h.LEFTSUPER),this.makeIndex(e,n[4],h.RIGHTSUB),this.makeIndex(e,n[5],h.RIGHTSUPER),this.collapsedChildren_(n),e;if(e.type===E.PUNCTUATED){if(Qc.isPunctuated(n)){const t=n.splice(1,1)[0].slice(1);e.contentNodes=t.map(this.makePunctuation.bind(this))}return e}if(e.type!==h.UNDEROVER)return e;{const t=this.createNode(n[1][0]);return e.childNodes[1].role===h.OVERACCENT?(t.type=E.OVERSCORE,e.type=E.UNDERSCORE):(t.type=E.UNDERSCORE,e.type=E.OVERSCORE),t.role=h.UNDEROVER,t.embellished=e.embellished,t.fencePointer=e.fencePointer,this.collapsedChildren_(n),e}}createNode(e){var t=this.factory.makeNode(e);return this.nodeDict[e.toString()]=t}collapsedChildren_(e){const i=n=>{const r=this.nodeDict[n[0]];r.childNodes=[];for(let e=1,t=n.length;e<t;e++){var o=n[e];r.childNodes.push(D.simpleCollapseStructure(o)?this.nodeDict[o]:i(o))}return r};i(e)}setParent(e,t){const n=zc(this.mathml,e),r=this.assembleTree(n);return r.parent=t,r}}const Jc=new V({AbsoluteValue:["Auto","AbsEnd","Cardinality","Determinant"],Bar:["Auto","Conjugate"],Caps:["Auto","SayCaps"],CombinationPermutation:["Auto","ChoosePermute"],Currency:["Auto","Position","Prefix"],Ellipses:["Auto","AndSoOn"],Enclosed:["Auto","EndEnclose"],Exponent:["Auto","AfterPower","Ordinal","OrdinalPower","Exponent"],Fraction:["Auto","EndFrac","FracOver","General","GeneralEndFrac","Ordinal","Over","OverEndFrac","Per"],Functions:["Auto","None","Reciprocal"],Inference:["Auto","Long"],ImpliedTimes:["Auto","MoreImpliedTimes","None"],Log:["Auto","LnAsNaturalLog"],Matrix:["Auto","Combinatoric","EndMatrix","EndVector","SilentColNum","SpeakColNum","Vector"],MultiLineLabel:["Auto","Case","Constraint","Equation","Line","None","Row","Step"],MultiLineOverview:["Auto","None"],MultiLinePausesBetweenColumns:["Auto","Long","Short"],MultsymbolDot:["Auto","Dot"],MultsymbolX:["Auto","By","Cross"],Paren:["Auto","CoordPoint","Interval","Silent","Speak","SpeakNestingLevel"],Prime:["Auto","Angle","Length"],Roots:["Auto","PosNegSqRoot","PosNegSqRootEnd","RootEnd"],SetMemberSymbol:["Auto","Belongs","Element","Member","In"],Sets:["Auto","SilentBracket","woAll"],TriangleSymbol:["Auto","Delta"],Trig:["Auto","ArcTrig","TrigInverse","Reciprocal"],VerticalLine:["Auto","Divides","Given","SuchThat"]}),Zc="Auto";function el(e){const n=e.split(":"),r={},o=Jc.getProperties(),i=Object.keys(o);for(let e,t=0;e=n[t];t++){const n=e.split("_");var s;-1!==i.indexOf(n[0])&&((s=n[1])&&s!==Zc&&-1!==o[n[0]].indexOf(s)&&(r[n[0]]=n[1]))}return r}function tl(t){const n=Object.keys(t),r=[];for(let e=0;e<n.length;e++)r.push(n[e]+"_"+t[n[e]]);return r.length?r.join(":"):l.DEFAULT_VALUE}class nl extends l{static comparator(){return new rl(m.getInstance().dynamicCstr,V.createProp([l.DEFAULT_VALUES[c.LOCALE]],[l.DEFAULT_VALUES[c.MODALITY]],[l.DEFAULT_VALUES[c.DOMAIN]],[l.DEFAULT_VALUES[c.STYLE]]))}static getLocalePreferences(e){e=e||function(e={}){for(const r of An.values())for(var[,t]of r.rules.entries())for(var{cstr:n}of t)e=function e(t,n){return n=n||{},t.length&&(n[t[0]]=e(t.slice(1),n[t[0]])),n}(n.getValues(),e);return e}(aa.getInstance().enumerate());return nl.getLocalePreferences_(e)}static relevantPreferences(e){var t=il[e.type];if(!t)return"ImpliedTimes";var r=t[e.role]||t[""];return r?"string"==typeof r?r:function(e){for(var[t,n]of Object.entries(r))if(function(e,t){var[e,n]=e.split(":");if(!e)return;const r=sl[e];return r&&r(t,n)}(t,e))return n;return""}(e)||"ImpliedTimes":"ImpliedTimes"}static getLocalePreferences_(e){const t={};for(const n of Object.keys(e))if(e[n].speech&&e[n].speech.clearspeak){const r=Object.keys(e[n].speech.clearspeak);if(!(r.length<3)){const o=t[n]={};for(const e in Jc.getProperties()){const t=Jc.getProperties()[e],i=[e+"_Auto"];if(t)for(const s of t)-1!==r.indexOf(e+"_"+s)&&i.push(e+"_"+s);o[e]=i}}}return t}constructor(e,t){super(e),this.preference=t}equal(e){if(!super.equal(e))return!1;var n=Object.keys(this.preference),r=e.preference;if(n.length!==Object.keys(r).length)return!1;for(let e,t=0;e=n[t];t++)if(this.preference[e]!==r[e])return!1;return!0}}class rl extends j{constructor(e,t){super(e,t),this.preference=e instanceof nl?e.preference:{}}match(n){if(!(n instanceof nl))return super.match(n);if("default"===n.getComponents()[c.STYLE])return!0;var r=Object.keys(n.preference);for(let e,t=0;e=r[t];t++)if(this.preference[e]!==n.preference[e])return!1;return!0}compare(e,t){var n=super.compare(e,t);if(0!==n)return n;var n=e instanceof nl,r=t instanceof nl;if(!n&&r)return 1;if(n&&!r)return-1;if(!n&&!r)return 0;n=Object.keys(e.preference).length,r=Object.keys(t.preference).length;return r<n?-1:n<r?1:0}}const ol=[["AbsoluteValue",E.FENCED,h.NEUTRAL],["AbsoluteValue",E.FENCED,h.METRIC],["Bar",E.OVERSCORE,""],["Caps",E.IDENTIFIER,h.LATINLETTER,"category:Lu"],["CombinationPermutation",E.APPL,h.UNKNOWN],["Currency",E.IDENTIFIER,h.UNIT,"unit:currency"],["Currency",E.INFIXOP,h.UNIT,"unit:currency"],["Enclosed",E.ENCLOSE,""],["Ellipses",E.PUNCTUATION,h.ELLIPSIS],["Exponent",E.SUPERSCRIPT,""],["Fraction",E.FRACTION,""],["Functions",E.APPL,h.SIMPLEFUNC],["ImpliedTimes",E.OPERATOR,h.IMPLICIT],["Log",E.APPL,h.PREFIXFUNC,"appl:Logarithm"],["Log",E.FUNCTION,h.PREFIXFUNC,"category:Logarithm"],["Matrix",E.MATRIX,""],["Matrix",E.VECTOR,""],["MultiLineLabel",E.MULTILINE,h.LABEL],["MultiLinePausesBetweenColumns",E.MULTILINE,h.TABLE],["MultiLineOverview",E.MULTILINE,""],["MultiLineLabel",E.TABLE,h.LABEL],["MultiLinePausesBetweenColumns",E.TABLE,""],["MultiLineOverview",E.TABLE,""],["MultiLineLabel",E.CASES,h.LABEL],["MultiLinePausesBetweenColumns",E.CASES,""],["MultiLineOverview",E.CASES,""],["MultsymbolDot",E.OPERATOR,h.MULTIPLICATION,"content:22C5"],["MultsymbolX",E.OPERATOR,h.MULTIPLICATION,"content:00D7"],["Paren",E.FENCED,h.LEFTRIGHT],["Prime",E.PUNCTUATION,h.PRIME],["Roots",E.ROOT,""],["Roots",E.SQRT,""],["SetMemberSymbol",E.OPERATOR,h.ELEMENT],["Sets",E.FENCED,h.SETEXT],["TriangleSymbol",E.IDENTIFIER,h.GREEKLETTER,"content:0394"],["Trig",E.APPL,h.PREFIXFUNC,"appl:Trigonometric"],["Trig",E.FUNCTION,h.PREFIXFUNC,"category:Trigonometric"],["VerticalLine",E.PUNCTUATED,h.VBAR],["VerticalLine",E.PUNCTUATION,h.VBAR],["Inference",E.INFERENCE,""],["Inference",E.PREMISES,""],["Inference",E.RULELABEL,""],["Inference",E.CONCLUSION,""]],il=function(){const r={};for(let n,e=0;n=ol[e];e++){var o=n[0],i=n[3];let t=r[n[1]];if(t||(t={},r[n[1]]=t),i){let e=t[n[2]];e||(e={},t[n[2]]=e),e[i]=o}else t[n[2]]=o}return r}();const sl={category:(e,t)=>Mn(e.textContent)===t,content:(e,t)=>e.textContent===String.fromCodePoint(parseInt(t,16)),appl:(e,t)=>{e=e.childNodes[0];return!!e&&Mn(e.textContent)===t},unit:(e,t)=>Mn(e.textContent+":unit")===t};function al(e,t=!1){return aa.getInstance().evaluateNode(e,t)}function cl(e,t=!1){return oa(al(e,t))}function ll(e){return e=e,oa(al(rc.fromNode(e).xml()))}function ul(e,t,n){t=ll(t);e.setAttribute(n,t)}function hl(e){return oa(dl(function(e){const t=rc.fromRoot(e),n=b('.//*[@id="'+e.id+'"]',t.xml());let r=n[0];return r=1<n.length?function(e,n){var t=n[0];if(!e.parent)return t;const r=[];for(;e;)r.push(e.id),e=e.parent;for(let e,t=0;e=n[t];t++)if(function(e,t){for(;t.length&&t.shift().toString()===e.getAttribute("id")&&e.parentNode&&e.parentNode.parentNode;)e=e.parentNode.parentNode;return!t.length}(e,r.slice()))return e;return t}(e,n)||r:r}(e)))}function dl(e){return e?aa.getInstance().runInSetting({modality:"prefix",domain:"default",style:"default",strict:!0,speech:!0},function(){return aa.getInstance().evaluateNode(e)}):[]}function pl(n,e,r){const o=ge(e,"maction");for(let t,e=0;t=o[e];e++){const o=me(n,"id",t.getAttribute("id"))[0];if(o){const s=t.childNodes[1],a=s.getAttribute(L.ID);let e=zc(n,a);var i;e&&"dummy"!==e.getAttribute(L.TYPE)||(e=o.childNodes[0]).getAttribute("sre-highlighter-added")||((i=s.getAttribute(L.PARENT))&&e.setAttribute(L.PARENT,i),e.setAttribute(L.TYPE,"dummy"),e.setAttribute(L.ID,a),e.setAttribute("role","treeitem"),e.setAttribute("aria-level",s.getAttribute("aria-level")),me(r,"id",a)[0].setAttribute("alternative",a))}}}function fl(e,n){const r=ge(e,"maction"),o={};for(let e,t=0;e=r[t];t++){const r=parseInt(e.getAttribute("selection")),s=Array.from(e.childNodes),a=s.filter(e=>e.hasAttribute(Ra.ID))[0],c=s[r-1];var i;a&&a!==c&&(me(n,"id",i=a.getAttribute(L.ID))[0].setAttribute("alternative",i),o[e.getAttribute("id")]=function(e){const t={};for(var[,n]of Object.entries(Ra))t[n]=e.getAttribute(n);return t}(a))}return o}function ml(e,t={}){t=t.locale?{locale:t.locale}:{};return e?aa.getInstance().runInSetting(Object.assign(t,{modality:"summary",strict:!1,speech:!0}),function(){return aa.getInstance().evaluateNode(e)}):[]}function gl(e){const t=[];return e.getAttribute("role")===h.MGLYPH&&t.push(new I({text:"image",personality:{}})),e.hasAttribute("href")&&t.push(new I({text:"link",personality:{}})),aa.getInstance().speechStructure.addNode(e,t,"postfix"),t}function El(e){al(e,!0);const t=aa.getInstance().speechStructure;return(e=t).completeModality("speech",al),e.completeModality("prefix",dl),e.completeModality("postfix",gl),e.completeModality("summary",ml),t.json(["none","ssml"])}function Nl(e,t=X){return"speech"!==e.modality||nl.getLocalePreferences()[e.locale]&&(e.domain="mathspeak"===e.domain?"clearspeak":"mathspeak",e.style=null!=(t=t[e.domain])?t:e.style),e}function Sl(e,t){const{modality:n,domain:r,style:o,locale:i}=t;if("speech"!==n)return o;if("mathspeak"===r){const e=["default","brief","sbrief"],t=e.indexOf(o);return-1===t?o:t>=e.length-1?e[0]:e[t+1]}if("clearspeak"===r){const t=nl.getLocalePreferences()[i];if(!t)return"default";const n=nl.relevantPreferences(e),r=(e=n,"default"!==(a=o)&&el(a)[e]||Zc),c=t[n].map(function(e){return e.split("_")[1]}),l=c.indexOf(r);if(-1===l)return o;else{a=o;e=n;var s=l>=c.length-1?c[0]:c[l+1];if("default"===a)return e+"_"+s;const u=el(a);return u[e]=s,tl(u);return}}var a;return o}function Tl(e){var t;const{domain:n,style:r,domain2style:o}=e,i={};if(!o)return Object.assign(i,X),i[n]=r,i;for(const e of o.split(",")){const[n,r]=e.split(/:(.*)/);i[n]=r||(null!=(t=X[n])?t:"default")}return i}function Il(e){const t=[];for(var[n,r]of Object.entries(e))t.push(n+":"+r);return t.join(",")}m.getInstance().comparators.clearspeak=nl.comparator,m.getInstance().parsers.clearspeak=new class extends H{constructor(){super([c.LOCALE,c.MODALITY,c.DOMAIN,c.STYLE])}parse(e){const t=super.parse(e);let n=t.getValue(c.STYLE);var e=t.getValue(c.LOCALE),r=t.getValue(c.MODALITY);let o={};return n!==l.DEFAULT_VALUE&&(o=this.fromPreference(n),n=this.toPreference(o)),new nl({locale:e,modality:r,domain:"clearspeak",style:n},o)}fromPreference(e){return el(e)}toPreference(e){return tl(e)}},(_=Ra=Ra||{}).ID="data-semantic-id",_.PARENT="data-semantic-parent",_.LEVEL="aria-level",_.POS="aria-posinset",_.ROLE="role";class Al{constructor(){this.modality=Ma+"speech",this.rebuilt_=null,this.options_={}}getRebuilt(){return this.rebuilt_}setRebuilt(e){this.rebuilt_=e}computeRebuilt(e,t=!1){return this.rebuilt_&&!t||(this.rebuilt_=new Qc(e)),this.rebuilt_}setOptions(e){this.options_=e||{},this.modality=Pa(this.options_.modality||"speech")}setOption(e,t){const n=this.getOptions();n[e]=t,this.setOptions(n)}getOptions(){return this.options_}generateSpeech(e,t){return this.rebuilt_||(this.rebuilt_=new Qc(t)),Oa(this.options_),cl(this.getRebuilt().xml)}nextRules(){this.setOptions(Nl(this.getOptions()))}nextStyle(e){this.setOption("style",Sl(this.getRebuilt().nodeDict[e],this.getOptions()))}getLevel(e){return N.MESSAGES.navigate.LEVEL+" "+e}getActionable(e){return e?e<0?N.MESSAGES.navigate.EXPANDABLE:N.MESSAGES.navigate.COLLAPSIBLE:""}}class bl extends Al{getSpeech(e,t){t=this.generateSpeech(e,t);return e.setAttribute(this.modality,t),t}}class Rl extends Al{constructor(){super(...arguments),this.modality=Ma+"foreground",this.contrast=new qc}static visitStree_(t,n,r){if(t.childNodes.length){if(t.contentNodes.length&&("punctuated"===t.type&&t.contentNodes.forEach(e=>r[e.id]=!0),"implicit"!==t.role&&n.push(t.contentNodes.map(e=>e.id))),t.childNodes.length){if("implicit"===t.role){const o=[];let e=[];for(const n of t.childNodes){const t=[];Rl.visitStree_(n,t,r),t.length<=2&&o.push(t.shift()),e=e.concat(t)}return n.push(o),void e.forEach(e=>n.push(e))}t.childNodes.forEach(e=>Rl.visitStree_(e,n,r))}}else r[t.id]||n.push(t.id)}getSpeech(e,t){return Wc(e,this.modality)}generateSpeech(e,t){return this.getRebuilt()||this.setRebuilt(new Qc(ce(t))),this.colorLeaves_(e),Wc(e,this.modality)}colorLeaves_(t){const n=[];Rl.visitStree_(this.getRebuilt().streeRoot,n,{});for(const e of n){const n=this.contrast.generate();(Array.isArray(e)?e.map(e=>this.colorLeave_(t,e,n)).reduce((e,t)=>e||t,!1):this.colorLeave_(t,e.toString(),n))&&this.contrast.increment()}}colorLeave_(e,t,n){const r=zc(e,t);return!!r&&(r.setAttribute(this.modality,n),!0)}}class Ol extends Al{getSpeech(e,t){return Wc(e,this.modality)}}class Cl extends Al{getSpeech(e,t){return""}}class yl extends Al{getSpeech(e,t,n=null){this.getRebuilt()&&pl(e,t,this.getRebuilt().xml);const r=this.generateSpeech(e,t),o=this.getRebuilt().nodeDict;for(const[r,c]of Object.entries(o)){const o=zc(t,r),l=zc(e,r)||n&&zc(n,r);o&&l&&(this.modality&&this.modality!==L.SPEECH?ul(l,c,this.modality):(i=l,s=c,a=(a=me(a=this.getRebuilt().xml,"id",s.id.toString())[0])?oa(al(a)):ll(s),i.setAttribute(L.SPEECH,a)),this.modality===L.SPEECH&&(s=l,(i=hl(i=c))&&s.setAttribute(L.PREFIX,i)))}var i,s,a;return r}}class vl extends yl{getSpeech(e,t){return super.getSpeech(e,t),Wc(e,this.modality)}}class Ll extends Al{getSpeech(e,t){Oa(this.getOptions());const n=e.getAttribute(L.ID);return ul(e,this.getRebuilt().streeRoot.querySelectorAll(e=>e.id.toString()===n)[0],this.modality),e.getAttribute(L.SUMMARY)}}function Ml(e){return(_l[e]||_l.Direct)()}const _l={Adhoc:()=>new bl,Color:()=>new Rl,Direct:()=>new Ol,Dummy:()=>new Cl,Node:()=>new vl,Summary:()=>new Ll,Tree:()=>new yl};class wl{static factory(e,t,n,r){const o=e=>zc(r,e),i=n.nodeDict,s=o(e),a=t.map(o),c=t.map(function(e){return i[e]}),l=new wl(c,i[e]);return l.domNodes=a,l.domPrimary_=s,l.allNodes=wl.generateAllVisibleNodes_(t,a,i,r),l}static generateAllVisibleNodes_(n,r,o,i){let s=[];for(let e=0,t=n.length;e<t;e++)if(r[e]){const o=wl.getAllVisibleNodes([n[e]],i);o.length?s=s.concat(o):s.push(r[e])}else{const l=o[n[e]];var a,c;l&&(a=l.childNodes.map(e=>e.id.toString()),c=wl.getAllVisibleNodes(a,i),s=s.concat(wl.generateAllVisibleNodes_(a,c,o,i)))}return s}static getAllVisibleNodes(e,t){let n=[];for(const i of e)n=n.concat((r=t,o=i,r.getAttribute(L.ID)===o?[r]:me(r,L.ID,o)));var r,o;return n}constructor(e,t){this.nodes=e,this.primary=t,this.domNodes=[],this.domPrimary_=null,this.allNodes=[]}getSemanticPrimary(){return this.primary}getSemanticNodes(){return this.nodes}getNodes(){return this.allNodes}getDomNodes(){return this.domNodes}getDomPrimary(){return this.domPrimary_}toString(){return"Primary:"+this.domPrimary_+" Nodes:"+this.domNodes}clone(){const e=new wl(this.nodes,this.primary);return e.domNodes=this.domNodes,e.domPrimary_=this.domPrimary_,e.allNodes=this.allNodes,e}}(t=w=w||{}).UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t.REPEAT="repeat",t.DEPTH="depth",t.ENTER="enter",t.EXPAND="expand",t.HOME="home",t.SUMMARY="summary",t.DETAIL="detail",t.ROW="row",t.CELL="cell";class Dl{static resetState(e){delete Dl.STATE[e]}static setState(e,t){Dl.STATE[e]=t}static getState(e){return Dl.STATE[e]}}Dl.STATE={};class Pl{constructor(e,t,n,r){this.node=e,this.generator=t,this.highlighter=n,this.modifier=!1,this.keyMapping=new Map([[i.UP,this.up.bind(this)],[i.DOWN,this.down.bind(this)],[i.RIGHT,this.right.bind(this)],[i.LEFT,this.left.bind(this)],[i.TAB,this.repeat.bind(this)],[i.DASH,this.expand.bind(this)],[i.SPACE,this.depth.bind(this)],[i.HOME,this.home.bind(this)],[i.X,this.summary.bind(this)],[i.Z,this.detail.bind(this)],[i.V,this.virtualize.bind(this)],[i.P,this.previous.bind(this)],[i.U,this.undo.bind(this)],[i.LESS,this.previousRules.bind(this)],[i.GREATER,this.nextRules.bind(this)]]),this.cursors=[],this.xml_=null,this.rebuilt_=null,this.focus_=null,this.active_=!1,this.node.id?this.id=this.node.id:this.node.hasAttribute(Pl.SRE_ID_ATTR)?this.id=this.node.getAttribute(Pl.SRE_ID_ATTR):(this.node.setAttribute(Pl.SRE_ID_ATTR,Pl.ID_COUNTER.toString()),this.id=Pl.ID_COUNTER++),this.rootNode=Kc(e),this.rootId=this.rootNode.getAttribute(L.ID),this.xmlString_=r,this.moved=w.ENTER}getXml(){return this.xml_||(this.xml_=ce(this.xmlString_)),this.xml_}getRebuilt(){return this.rebuilt_||this.rebuildStree(),this.rebuilt_}isActive(){return this.active_}activate(){this.isActive()||this.toggleActive_()}deactivate(){this.isActive()&&(Dl.setState(this.id,this.primaryId()),this.toggleActive_())}getFocus(e=!1){return null===this.rootId&&this.getRebuilt(),this.focus_||(this.focus_=this.singletonFocus(this.rootId)),e&&this.updateFocus(),this.focus_}setFocus(e){this.focus_=e}getDepth(){return this.levels.depth()-1}isSpeech(){return this.generator.modality===L.SPEECH}focusDomNodes(){return this.getFocus().getDomNodes()}focusSemanticNodes(){return this.getFocus().getSemanticNodes()}speech(){var n=this.focusDomNodes();if(!n.length)return"";const r=this.specialMove();if(null!==r)return r;switch(this.moved){case w.DEPTH:return this.depth_();case w.SUMMARY:return this.summary_();case w.DETAIL:return this.detail_();default:{const r=[],s=this.focusSemanticNodes();for(let e=0,t=n.length;e<t;e++){var o=n[e],i=s[e];r.push(o?this.generator.getSpeech(o,this.getXml(),this.node):ll(i))}return this.mergePrefix_(r)}}}move(e){const t=this.keyMapping.get(e);if(!t)return null;e=t();return!(!e||e===this.getFocus()||(this.setFocus(e),this.moved===w.HOME&&(this.levels=this.initLevels()),0))}up(){return this.moved=w.UP,this.getFocus()}down(){return this.moved=w.DOWN,this.getFocus()}left(){return this.moved=w.LEFT,this.getFocus()}right(){return this.moved=w.RIGHT,this.getFocus()}repeat(){return this.moved=w.REPEAT,this.getFocus().clone()}depth(){return this.moved=this.isSpeech()?w.DEPTH:w.REPEAT,this.getFocus().clone()}home(){return this.moved=w.HOME,this.singletonFocus(this.rootId)}getBySemanticId(e){return zc(this.node,e)}primaryId(){return this.getFocus().getSemanticPrimary().id.toString()}expand(){const e=this.getFocus().getDomPrimary(),t=this.actionable_(e);return t?(this.moved=w.EXPAND,t.dispatchEvent(new Event("click")),this.getFocus().clone()):this.getFocus()}expandable(e){return!!this.actionable_(e)&&0===e.childNodes.length}collapsible(e){return!!this.actionable_(e)&&0<e.childNodes.length}restoreState(){if(this.highlighter){const t=Dl.getState(this.id);if(t){let e=this.getRebuilt().nodeDict[t];const n=[];for(;e;)n.push(e.id),e=e.parent;for(n.pop();0<n.length;){this.down();const t=n.pop(),e=this.findFocusOnLevel(t);if(!e)break;this.setFocus(e)}this.moved=w.ENTER}}}updateFocus(){this.setFocus(wl.factory(this.getFocus().getSemanticPrimary().id.toString(),this.getFocus().getSemanticNodes().map(e=>e.id.toString()),this.getRebuilt(),this.node))}rebuildStree(){this.rebuilt_=new Qc(this.getXml()),this.rootId=this.rebuilt_.stree.root.id.toString(),this.generator.setRebuilt(this.rebuilt_),this.skeleton=D.fromTree(this.rebuilt_.stree),this.skeleton.populate(),this.focus_=this.singletonFocus(this.rootId),this.levels=this.initLevels(),pl(this.node,this.getXml(),this.rebuilt_.xml)}previousLevel(){var e=this.getFocus().getDomPrimary();return e?Wc(e,L.PARENT):this.getFocus().getSemanticPrimary().parent.id.toString()}nextLevel(){var e=this.getFocus().getDomPrimary();let t,n;if(e){t=$c(Wc(e,L.CHILDREN)),n=$c(Wc(e,L.CONTENT));const r=Wc(e,L.TYPE),o=Wc(e,L.ROLE);return this.combineContentChildren(r,o,n,t)}const r=e=>e.id.toString(),o=this.getRebuilt().nodeDict[this.primaryId()];return t=o.childNodes.map(r),n=o.contentNodes.map(r),0===t.length?[]:this.combineContentChildren(o.type,o.role,n,t)}singletonFocus(e){this.getRebuilt();var t=this.retrieveVisuals(e);return this.focusFromId(e,t)}retrieveVisuals(e){if(!this.skeleton)return[e];const t=parseInt(e,10),n=this.skeleton.subtreeNodes(t);if(!n.length)return[e];n.unshift(t);const r={},o=[];ae(this.getXml());for(const e of n)r[e]||(o.push(e.toString()),r[e]=!0,this.subtreeIds(e,r));return o}subtreeIds(e,t){e=b(`//*[@data-semantic-id="${e}"]`,this.getXml());b("*//@data-semantic-id",e[0]).forEach(e=>t[parseInt(e.textContent,10)]=!0)}focusFromId(e,t){return wl.factory(e,t,this.getRebuilt(),this.node)}summary(){return this.moved=this.isSpeech()?w.SUMMARY:w.REPEAT,this.getFocus().clone()}detail(){return this.moved=this.isSpeech()?w.DETAIL:w.REPEAT,this.getFocus().clone()}specialMove(){return null}virtualize(e){return this.cursors.push({focus:this.getFocus(),levels:this.levels,undo:e||!this.cursors.length}),this.levels=this.levels.clone(),this.getFocus().clone()}previous(){var e=this.cursors.pop();return e?(this.levels=e.levels,e.focus):this.getFocus()}undo(){let e;for(;(e=this.cursors.pop())&&!e.undo;);return e?(this.levels=e.levels,e.focus):this.getFocus()}update(e){Oa(e).then(()=>Ml("Tree").getSpeech(this.node,this.getXml()))}nextRules(){this.generator.nextRules();var e=this.generator.getOptions();return"speech"!==e.modality?this.getFocus():(this.update(e),this.moved=w.REPEAT,this.getFocus().clone())}previousRules(){this.generator.nextStyle(null==(e=this.getFocus().getSemanticPrimary())?void 0:e.id.toString());var e=this.generator.getOptions();return"speech"!==e.modality?this.getFocus():(this.update(e),this.moved=w.REPEAT,this.getFocus().clone())}refocus(){let e,t=this.getFocus();for(;!t.getNodes().length;){e=this.levels.peek();var n=this.up();if(!n)break;this.setFocus(n),t=this.getFocus(!0)}this.levels.push(e),this.setFocus(t)}toggleActive_(){this.active_=!this.active_}mergePrefix_(e,t=[]){var n=this.isSpeech()?this.prefix_():"",n=(n&&e.unshift(n),this.isSpeech()?this.postfix_():"");return n&&e.push(n),ia(function(e){const t=e.map(e=>"string"==typeof e?T.stringEmpty(e):e),n=ra.get(m.getInstance().options.markup);return n?n.merge(t):e.join()}(t.concat(e)))}prefix_(){var e=this.getFocus().getDomNodes(),t=this.getFocus().getSemanticNodes();return e[0]?Wc(e[0],L.PREFIX):hl(t[0])}postfix_(){var e=this.getFocus().getDomNodes();return e[0]?Wc(e[0],L.POSTFIX):""}depth_(){var e=O.getInstance().getParameter("depth"),t=(O.getInstance().setParameter("depth",!0),this.getFocus().getDomPrimary()),t=this.expandable(t)?N.MESSAGES.navigate.EXPANDABLE:this.collapsible(t)?N.MESSAGES.navigate.COLLAPSIBLE:"",n=N.MESSAGES.navigate.LEVEL+" "+this.getDepth(),r=hl(this.getFocus().getSemanticNodes()[0]),n=[new I({text:n,personality:{}}),new I({text:r,personality:{}}),new I({text:t,personality:{}})];return O.getInstance().setParameter("depth",e),ia(oa(n))}actionable_(e){e=null==e?void 0:e.parentNode;return e&&this.highlighter.isMactionNode(e)?e:null}summary_(){var e=this.getFocus().getSemanticPrimary().id.toString(),e=oa(ml(this.getRebuilt().xml.getAttribute("id")===e?this.getRebuilt().xml:me(this.getRebuilt().xml,"id",e)[0],{}));return this.mergePrefix_([e])}detail_(){const e=this.getFocus().getSemanticPrimary().id.toString(),t=this.getRebuilt().xml.getAttribute("id")===e?this.getRebuilt().xml:me(this.getRebuilt().xml,"id",e)[0],n=t.getAttribute("alternative");t.removeAttribute("alternative");var r=cl(t),r=this.mergePrefix_([r]);return t.setAttribute("alternative",n),r}}Pl.ID_COUNTER=0,Pl.SRE_ID_ATTR="sre-explorer-id";class xl extends Pl{up(){return null}down(){return null}left(){return null}right(){return null}repeat(){return null}depth(){return null}home(){return null}getDepth(){return 0}initLevels(){return null}combineContentChildren(e,t,n,r){return[]}findFocusOnLevel(e){return null}}class Ul{constructor(){this.level_=[]}push(e){this.level_.push(e)}pop(){return this.level_.pop()}peek(){return this.level_[this.level_.length-1]||null}indexOf(e){const t=this.peek();return t?t.indexOf(e):null}find(n){var r=this.peek();if(!r)return null;for(let e=0,t=r.length;e<t;e++)if(n(r[e]))return r[e];return null}get(e){var t=this.peek();return!t||e<0||e>=t.length?null:t[e]}depth(){return this.level_.length}clone(){const e=new Ul;return e.level_=this.level_.slice(0),e}toString(){let n="";for(let e,t=0;e=this.level_[t];t++)n+="\n"+e.map(function(e){return e.toString()});return n}}class Fl extends Pl{constructor(e,t,n,r){super(e,t,n,r),this.node=e,this.generator=t,this.highlighter=n,this.levels=null,this.restoreState()}initLevels(){const e=new Ul;return e.push([this.getFocus()]),e}up(){super.up();const t=this.previousLevel();return t?(this.levels.pop(),this.levels.find(function(e){return e.getSemanticNodes().some(function(e){return e.id.toString()===t})})):null}down(){super.down();var e=this.nextLevel();return 0===e.length?null:(this.levels.push(e),e[0])}combineContentChildren(e,t,n,r){switch(e){case E.RELSEQ:case E.INFIXOP:case E.MULTIREL:return this.makePairList(r,n);case E.PREFIXOP:return[this.focusFromId(r[0],n.concat(r))];case E.POSTFIXOP:return[this.focusFromId(r[0],r.concat(n))];case E.MATRIX:case E.VECTOR:case E.FENCED:return[this.focusFromId(r[0],[n[0],r[0],n[1]])];case E.CASES:return[this.focusFromId(r[0],[n[0],r[0]])];case E.PUNCTUATED:return t===h.TEXT?r.map(this.singletonFocus.bind(this)):r.length===n.length?n.map(this.singletonFocus.bind(this)):this.combinePunctuations(r,n,[],[]);case E.APPL:return[this.focusFromId(r[0],[r[0],n[0]]),this.singletonFocus(r[1])];case E.ROOT:return[this.singletonFocus(r[0]),this.singletonFocus(r[1])];default:return r.map(this.singletonFocus.bind(this))}}combinePunctuations(e,t,n,r){if(0===e.length)return r;var o=e.shift(),i=t.shift();return o===i?(n.push(i),this.combinePunctuations(e,t,n,r)):(t.unshift(i),n.push(o),e.length===t.length?(r.push(this.focusFromId(o,n.concat(t))),r):(r.push(this.focusFromId(o,n)),this.combinePunctuations(e,t,[],r)))}makePairList(n,r){if(0===n.length)return[];if(1===n.length)return[this.singletonFocus(n[0])];const o=[this.singletonFocus(n.shift())];for(let e=0,t=n.length;e<t;e++)o.push(this.focusFromId(n[e],[r[e],n[e]]));return o}left(){super.left();var e=this.levels.indexOf(this.getFocus());return null!==e&&this.levels.get(e-1)||null}right(){super.right();var e=this.levels.indexOf(this.getFocus());return null!==e&&this.levels.get(e+1)||null}findFocusOnLevel(t){return this.levels.find(e=>e.getSemanticPrimary().id===t)}}class kl extends Pl{constructor(e,t,n,r){super(e,t,n,r),this.node=e,this.generator=t,this.highlighter=n,this.levels=null,this.restoreState()}initLevels(){const e=new Ul;return e.push([this.primaryId()]),e}up(){super.up();var e=this.previousLevel();return e?(this.levels.pop(),this.singletonFocus(e)):null}down(){super.down();var e=this.nextLevel();if(0===e.length)return null;var t=this.singletonFocus(e[0]);return t&&this.levels.push(e),t}combineContentChildren(e,t,n,r){switch(e){case E.RELSEQ:case E.INFIXOP:case E.MULTIREL:return Zn(r,n);case E.PREFIXOP:return n.concat(r);case E.POSTFIXOP:return r.concat(n);case E.MATRIX:case E.VECTOR:case E.FENCED:return r.unshift(n[0]),r.push(n[1]),r;case E.CASES:return r.unshift(n[0]),r;case E.PUNCTUATED:return t===h.TEXT?Zn(r,n):r;case E.APPL:return[r[0],n[0],r[1]];case E.ROOT:return[r[0],r[1]];default:return r}}left(){super.left();var e=this.levels.indexOf(this.primaryId());if(null===e)return null;e=this.levels.get(e-1);return e?this.singletonFocus(e):null}right(){super.right();var e=this.levels.indexOf(this.primaryId());if(null===e)return null;e=this.levels.get(e+1);return e?this.singletonFocus(e):null}findFocusOnLevel(e){return this.singletonFocus(e.toString())}focusDomNodes(){return[this.getFocus().getDomPrimary()]}focusSemanticNodes(){return[this.getFocus().getSemanticPrimary()]}}class Bl extends kl{constructor(e,t,n,r){super(e,t,n,r),this.node=e,this.generator=t,this.highlighter=n,this.firstJump=null,this.key_=null,this.row_=0,this.currentTable_=null,this.keyMapping.set(i.ZERO,this.jumpCell.bind(this)),this.keyMapping.set(i.ONE,this.jumpCell.bind(this)),this.keyMapping.set(i.TWO,this.jumpCell.bind(this)),this.keyMapping.set(i.THREE,this.jumpCell.bind(this)),this.keyMapping.set(i.FOUR,this.jumpCell.bind(this)),this.keyMapping.set(i.FIVE,this.jumpCell.bind(this)),this.keyMapping.set(i.SIX,this.jumpCell.bind(this)),this.keyMapping.set(i.SEVEN,this.jumpCell.bind(this)),this.keyMapping.set(i.EIGHT,this.jumpCell.bind(this)),this.keyMapping.set(i.NINE,this.jumpCell.bind(this))}move(e){this.key_=e;e=super.move(e);return this.modifier=!1,e}up(){return this.moved=w.UP,this.eligibleCell_()?this.verticalMove_(!1):super.up()}down(){return this.moved=w.DOWN,this.eligibleCell_()?this.verticalMove_(!0):super.down()}jumpCell(){if(!this.isInTable_()||null===this.key_)return this.getFocus();if(this.moved===w.ROW){this.moved=w.CELL;const e=this.key_-i.ZERO;return this.isLegalJump_(this.row_,e)?this.jumpCell_(this.row_,e):this.getFocus()}const e=this.key_-i.ZERO;return e>this.currentTable_.childNodes.length?this.getFocus():(this.row_=e,this.moved=w.ROW,this.getFocus().clone())}undo(){var e=super.undo();return e===this.firstJump&&(this.firstJump=null),e}eligibleCell_(){var e=this.getFocus().getSemanticPrimary();return this.modifier&&e.type===E.CELL&&-1!==Bl.ELIGIBLE_CELL_ROLES.indexOf(e.role)}verticalMove_(e){var t=this.previousLevel();if(!t)return null;var n=this.getFocus(),r=this.levels.indexOf(this.primaryId()),o=this.levels.pop(),t=this.levels.indexOf(t),e=this.levels.get(e?t+1:t-1);if(!e)return this.levels.push(o),null;this.setFocus(this.singletonFocus(e));t=this.nextLevel();return t[r]?(this.levels.push(t),this.singletonFocus(t[r])):(this.setFocus(n),this.levels.push(o),null)}jumpCell_(e,t){this.firstJump?this.virtualize(!1):(this.firstJump=this.getFocus(),this.virtualize(!0));var n=this.currentTable_.id.toString();let r;for(;-1===(r=this.levels.pop()).indexOf(n););this.levels.push(r),this.setFocus(this.singletonFocus(n)),this.levels.push(this.nextLevel());const o=this.currentTable_.childNodes[e-1];return this.setFocus(this.singletonFocus(o.id.toString())),this.levels.push(this.nextLevel()),this.singletonFocus(o.childNodes[t-1].id.toString())}isLegalJump_(e,t){const n=me(this.getRebuilt().xml,"id",this.currentTable_.id.toString())[0];if(!n||n.hasAttribute("alternative"))return!1;const r=this.currentTable_.childNodes[e-1];if(!r)return!1;const o=me(n,"id",r.id.toString())[0];return!(!o||o.hasAttribute("alternative")||!r||!r.childNodes[t-1])}isInTable_(){let e=this.getFocus().getSemanticPrimary();for(;e;){if(-1!==Bl.ELIGIBLE_TABLE_TYPES.indexOf(e.type))return this.currentTable_=e,!0;e=e.parent}return!1}}Bl.ELIGIBLE_CELL_ROLES=[h.DETERMINANT,h.ROWVECTOR,h.BINOMIAL,h.SQUAREMATRIX,h.MULTILINE,h.MATRIX,h.VECTOR,h.CASES,h.TABLE],Bl.ELIGIBLE_TABLE_TYPES=[E.MULTILINE,E.MATRIX,E.VECTOR,E.CASES,E.TABLE];const Gl={dummy:(e,t,n,r)=>new xl(e,t,n,r),semantic:(e,t,n,r)=>new Fl(e,t,n,r),syntax:(e,t,n,r)=>new kl(e,t,n,r),table:(e,t,n,r)=>new Bl(e,t,n,r)};class x{static stringify_(e){return e&&e.toString()}constructor(e,t){this.name=e,this.process=t.processor,this.postprocess=t.postprocessor||((e,t)=>e),this.processor=this.postprocess?function(e){return this.postprocess(this.process(e),e)}:this.process,this.print=t.print||x.stringify_,this.pprint=t.pprint||this.print}}x.LocalState={walker:null,speechGenerator:null,highlighter:null};class Vl extends x{static getKey_(e){return"string"==typeof e?i[e.toUpperCase()]:e}constructor(e,t){super(e,t),this.key=t.key||Vl.getKey_}}const Hl=new Map;function jl(e){Hl.set(e.name,e)}function ql(e){var t=Hl.get(e);if(t)return t;throw new ee("Unknown processor "+e)}function Xl(e,t){const n=ql(e);try{return n.processor(t)}catch(e){throw new ee("Processing error for expression "+t)}}function Yl(e,t){const n=ql(e);try{const e=n.processor(t);return m.getInstance().options.pprint?n.pprint(e):n.print(e)}catch(e){throw console.log(e),new ee("Processing error for expression "+t)}}jl(new x("semantic",{processor:function(e){return ic(ce(e),m.getInstance().options)},postprocessor:function(e,t){var n=m.getInstance().options.speech;if(n===k.NONE)return e;var r=Ee(e);let o=cl(r,!0);if(n===k.SHALLOW)return e.setAttribute("speech",ia(o)),e;var i=b(".//*[@id]",e),s=b(".//*[@id]",r);for(let e,t,n=0;e=i[n],t=s[n];n++)o=cl(t),e.setAttribute("speech",ia(o));return e},pprint:function(e){return pe(e.toString())}})),jl(new x("speech",{processor:function(e){return ia(oa(al(ic(ce(e),m.getInstance().options),!0)))},pprint:function(e){e=e.toString();return ra.get(m.getInstance().options.markup)instanceof Ds?pe(e):e}})),jl(new x("json",{processor:function(e){return sc(ce(e),m.getInstance().options).toJson()},postprocessor:function(e,t){var n=m.getInstance().options.speech;if(n===k.NONE)return e;const r=ic(ce(t),m.getInstance().options),o=cl(r);if(n===k.SHALLOW)return e.stree.speech=ia(o),e;const i=e=>{var t=cl(b(`.//*[@id=${e.id}]`,r)[0]);e.speech=ia(t),e.children&&e.children.forEach(i)};return i(e.stree),e},print:function(e){return JSON.stringify(e)},pprint:function(e){return JSON.stringify(e,null,2)}})),jl(new x("description",{processor:function(e){return al(ic(ce(e),m.getInstance().options),!0)},print:function(e){return JSON.stringify(e)},pprint:function(e){return JSON.stringify(e,null,2)}})),jl(new x("enriched",{processor:function(e){var t,n,r,o,i=e,e=m.getInstance().options,s=ce(i);try{return n=e,t=Ee(t=s),o=sc(r=t,n),t=n,u.getInstance().generate(()=>["Original MathML",bc(r)]),lc.clear(),P(o.root),t.structure&&r.setAttribute(L.STRUCTURE,D.fromStructure(r,o,t).toString()),u.getInstance().generate(()=>["Semantic Tree\n",bc(o),"Semantically enriched MathML\n",bc(r)]),r}catch(i){return console.error(i),s}},postprocessor:function(e,t){var n=Kc(e);let r;switch(m.getInstance().options.speech){case k.NONE:break;case k.SHALLOW:(r=Ml("Adhoc")).getSpeech(n,e);break;case k.DEEP:(r=Ml("Tree")).getSpeech(e,e)}return e},pprint:function(e){return pe(e.toString())}})),jl(new x("rebuild",{processor:function(e){return new Qc(ce(e)).stree.xml()},pprint:function(e){return pe(e.toString())}})),jl(new x("walker",{processor:function(e){const t=Ml("Node");(x.LocalState.speechGenerator=t).setOptions({modality:m.getInstance().options.modality,locale:m.getInstance().options.locale,domain:m.getInstance().options.domain,style:m.getInstance().options.style}),x.LocalState.highlighter=function(e){const t=new jc({color:"black"},{color:"white"}),n="NativeMML"===e.renderer&&"Safari"===e.browser?"MML-CSS":"SVG"===e.renderer&&"v3"===e.browser?"SVG-V3":e.renderer,r=new(Yc[n]||Yc.NativeMML);return r.setColor(t),r}({renderer:"NativeMML"});var n,r,o,e=Xl("enriched",e),i=function(e){const t=ql("enriched");return m.getInstance().options.pprint?t.pprint(e):t.print(e)}(e);return x.LocalState.walker=(n=m.getInstance().options.walker,e=e,r=t,o=x.LocalState.highlighter,i=i,(Gl[n.toLowerCase()]||Gl.dummy)(e,r,o,i)),x.LocalState.walker},print:function(e){return x.LocalState.walker.speech()}})),jl(new Vl("move",{processor:function(e){if(x.LocalState.walker)if(!1===x.LocalState.walker.move(e)){const t=ra.get(m.getInstance().options.markup);return t?t.error(e):"";return}else return x.LocalState.walker.speech();return null}})),jl(new x("number",{processor:function(e){e=parseInt(e,10);return isNaN(e)?"":N.NUMBERS.numberToWords(e)}})),jl(new x("ordinal",{processor:function(e){e=parseInt(e,10);return isNaN(e)?"":N.NUMBERS.wordOrdinal(e)}})),jl(new x("numericOrdinal",{processor:function(e){e=parseInt(e,10);return isNaN(e)?"":N.NUMBERS.numericOrdinal(e)}})),jl(new x("vulgar",{processor:function(e){var[e,t]=e.split("/").map(e=>parseInt(e,10));return isNaN(e)||isNaN(t)?"":Xl("speech",`<mfrac><mn>${e}</mn><mn>${t}</mn></mfrac>`)}})),jl(new x("latex",{processor:function(e){return"braille"===m.getInstance().options.modality&&"euro"===m.getInstance().options.locale||console.info("LaTeX input currently only works for Euro Braille output. Please use the latex-to-speech package from npm for general LaTeX input to SRE."),Xl("speech",`<math data-latex="${e}"></math>`)}})),jl(new x("rebuildStree",{processor:function(e){return new Qc(ce(e))}})),jl(new x("speechStructure",{processor:function(e){var e=ce(e),t=new Qc(e).stree.xml();return fl(e,t),El(t)},print:function(e){return JSON.stringify(e)},pprint:function(e){return JSON.stringify(e,null,2)}}));var $l=function(e,s,a,c){return new(a=a||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())})};const Wl=z.u.VERSION;function Kl(e){return $l(this,void 0,void 0,function*(){return Oa(e)})}const zl=Na;function Ql(e,t){return Xl(e,t)}const Jl={};function Zl(e,t,n){switch(m.getInstance().mode){case F.ASYNC:return function(t,n,r){return $l(this,void 0,void 0,function*(){var e=yield Y.f.fs.promises.readFile(n,{encoding:"utf8"}),e=Yl(t,e);if(r)try{Y.f.fs.promises.writeFile(r,e)}catch(e){throw new ee("Can not write to file: "+r)}return e})}(e,t,n);case F.SYNC:var r=n,o=Yl(e,function(e){let t;try{t=Y.f.fs.readFileSync(e,{encoding:"utf8"})}catch(t){throw new ee("Can not open file: "+e)}return t}(t));if(r)try{Y.f.fs.writeFileSync(r,o)}catch(e){throw new ee("Can not write to file: "+r)}return o;default:throw new ee(`Can process files in ${m.getInstance().mode} mode`)}}function eu(n,r,o){return $l(this,void 0,void 0,function*(){yield Kl(o),m.getInstance().options.automark=!0;const e={};e.options=o,e.mactions=fl(n,r),e.speech=El(r);var t=null==(t=r.childNodes[0])?void 0:t.getAttribute("id");return e.label=e.speech[t]["speech-none"],e.ssml=e.speech[t]["speech-ssml"],e.translations=Object.assign({},N.MESSAGES.navigate),"none"!==o.braille&&(yield Kl({modality:"braille",locale:o.braille,domain:"default",style:"default"}),e.braille=(al(r,!0),aa.getInstance().speechStructure.json(["none"])),e.braillelabel=e.braille[t]["braille-none"]),e})}Jl.toSpeech=function(e,t){return Zl("speech",e,t)},Jl.toSemantic=function(e,t){return Zl("semantic",e,t)},Jl.toJson=function(e,t){return Zl("json",e,t)},Jl.toDescription=function(e,t){return Zl("description",e,t)},Jl.toEnriched=function(e,t){return Zl("enriched",e,t)};const tu=W,nu=(Y.f.documentSupported||Y.f.webworker?Kl({mode:F.HTTP}).then(()=>Kl({})):Kl({mode:F.SYNC}).then(()=>Kl({mode:F.ASYNC})),z.u)},714:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});class r{static ensureLocale(e,t){return r.LOCALES.get(e)?e:(console.error(`Locale ${e} does not exist! Using ${r.LOCALES.get(t)} instead.`),t)}}r.VERSION="5.0.0-beta.1",r.LOCALES=new Map([["af","Africaans"],["ca","Catalan"],["da","Danish"],["de","German"],["en","English"],["es","Spanish"],["euro","Euro"],["fr","French"],["hi","Hindi"],["it","Italian"],["ko","Korean"],["nb","BokmÃ¥l"],["nn","Nynorsk"],["sv","Swedish"],["nemeth","Nemeth"]]),r.mathjaxVersion="4.0.0",r.url="https://cdn.jsdelivr.net/npm/speech-rule-engine@"+r.VERSION+"/lib/mathmaps"},731:(e,t)=>{"use strict";function n(e){try{var t=new(e="function"!=typeof e?RegExp:e)("ğŒ†","u").exec("ğŒ†");return!!t&&2===t[0].length}catch(e){}return!1}var r=n();function o(e){if("["!==e.source[0])throw new Error(e+" can not be used with chars");return e.source.slice(1,e.source.lastIndexOf("]"))}function i(e,t){if("["!==e.source[0])throw new Error("/"+e.source+"/ can not be used with chars_without");if(!t||"string"!=typeof t)throw new Error(JSON.stringify(t)+" is not a valid search");if(-1===e.source.indexOf(t))throw new Error('"'+t+'" is not is /'+e.source+"/");if("-"===t&&1!==e.source.indexOf(t))throw new Error('"'+t+'" is not at the first postion of /'+e.source+"/");return new RegExp(e.source.replace(t,""),r?"u":"")}function s(e){var n=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(e){var t="string"==typeof e;if(t&&void 0===n&&"|"===e)throw new Error("use regg instead of reg to wrap expressions with `|`!");return t?e:e.source}).join(""),r?"mu":"m")}function a(e){if(0===arguments.length)throw new Error("no parameters provided");return s.apply(a,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var c=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/,l=(r&&(c=s("[",o(c),"\\u{10000}-\\u{10FFFF}","]")),/[\x20\x09\x0D\x0A]/),u=o(l),h=s(l,"+"),l=s(l,"*"),d=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=(r&&(d=s("[",o(d),"\\u{10000}-\\u{10FFFF}","]")),s("[",o(d),o(/[-.0-9\xB7]/),o(/[\u0300-\u036F\u203F-\u2040]/),"]")),f=s(d,p,"*"),m=s(p,"+"),g=s("&",f,";"),E=a(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),g=a(g,"|",E),E=s("%",f,";"),N=a(s('"',a(/[^%&"]/,"|",E,"|",g),"*",'"'),"|",s("'",a(/[^%&']/,"|",E,"|",g),"*","'")),S=a('"',a(/[^<&"]/,"|",g),"*",'"',"|","'",a(/[^<&']/,"|",g),"*","'"),d=s(i(d,":"),i(p,":"),"*"),p=s(d,a(":",d),"?"),d=s("^",p,"$"),T=s("(",p,")"),I=a(/"[^"]*"|'[^']*'/),A=s(/^<\?/,"(",f,")",a(h,"(",c,"*?)"),"?",/\?>/),b=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,b=a('"',b,'*"',"|","'",i(b,"'"),"*'"),R=s("\x3c!--",a(i(c,"-"),"|",s("-",i(c,"-"))),"*","--\x3e"),O=a(s(/\(/,l,"#PCDATA",a(l,/\|/,l,p),"*",l,/\)\*/),"|",s(/\(/,l,"#PCDATA",l,/\)/)),O=a("EMPTY","|","ANY","|",O,"|",s(/\([^>]+\)/,/[?*+]?/)),O=s("<!ELEMENT",h,a(p,"|",E),h,a(O,"|",E),l,">"),C=s("NOTATION",h,/\(/,l,f,a(l,/\|/,l,f),"*",l,/\)/),m=s(/\(/,l,m,a(l,/\|/,l,m),"*",l,/\)/),C=a(C,"|",m),m=a(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",C),C=a(/#REQUIRED|#IMPLIED/,"|",a(a("#FIXED",h),"?",S)),S=s("<!ATTLIST",h,f,a(h,f,h,m,h,C),"*",l,">"),m="about:legacy-compat",C=a('"'+m+'"',"|","'"+m+"'"),y="SYSTEM",v="PUBLIC",L=a(a(y,h,I),"|",a(v,h,b,h,I)),M=s("^",a(a(y,h,"(?<SystemLiteralOnly>",I,")"),"|",a(v,h,"(?<PubidLiteral>",b,")",h,"(?<SystemLiteral>",I,")"))),_=a(h,"NDATA",h,f),_=s("<!ENTITY",h,f,h,a(N,"|",a(L,_,"?")),l,">"),w=a(N,"|",L),_=a(_,"|",s("<!ENTITY",h,"%",h,f,h,w,l,">")),w=s(v,h,b),w=s("<!NOTATION",h,f,h,a(L,"|",w),l,">"),D=s(l,"=",l),P=/1[.]\d+/,P=s(h,"version",D,a("'",P,"'","|",'"',P,'"')),x=/[A-Za-z][-A-Za-z0-9._]*/,P=s(/^<\?xml/,P,a(h,"encoding",D,a('"',x,'"',"|","'",x,"'")),"?",a(h,"standalone",D,a("'",a("yes","|","no"),"'","|",'"',a("yes","|","no"),'"')),"?",l,/\?>/),x=s(c,"*?",/\]\]>/),D=s(/<!\[CDATA\[/,x);t.chars=o,t.chars_without=i,t.detectUnicodeSupport=n,t.reg=s,t.regg=a,t.ABOUT_LEGACY_COMPAT=m,t.ABOUT_LEGACY_COMPAT_SystemLiteral=C,t.AttlistDecl=S,t.CDATA_START="<![CDATA[",t.CDATA_END="]]>",t.CDSect=D,t.Char=c,t.Comment=R,t.COMMENT_START="\x3c!--",t.COMMENT_END="--\x3e",t.DOCTYPE_DECL_START="<!DOCTYPE",t.elementdecl=O,t.EntityDecl=_,t.EntityValue=N,t.ExternalID=L,t.ExternalID_match=M,t.Name=f,t.NotationDecl=w,t.Reference=g,t.PEReference=E,t.PI=A,t.PUBLIC=v,t.PubidLiteral=b,t.QName=p,t.QName_exact=d,t.QName_group=T,t.S=h,t.SChar_s=u,t.S_OPT=l,t.SYSTEM=y,t.SystemLiteral=I,t.UNICODE_REPLACEMENT_CHARACTER="ï¿½",t.UNICODE_SUPPORT=r,t.XMLDecl=P},767:(e,t,n)=>{"use strict";function r(e,t){e.prototype=Object.create(Error.prototype,{constructor:{value:e},name:{value:e.name,enumerable:!0,writable:t}})}var o=n(870).freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),i=Object.keys(o);function s(e){return"number"==typeof e&&1<=e&&e<=25}function a(e,t){s(e)?(this.name=i[e],this.message=t||""):(this.message=e,this.name="string"==typeof t&&t.substring(t.length-o.Error.length)===o.Error?t:o.Error),Error.captureStackTrace&&Error.captureStackTrace(this,a)}r(a,!0),Object.defineProperties(a.prototype,{code:{enumerable:!0,get:function(){var e=i.indexOf(this.name);return s(e)?e:0}}});for(var n={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},c=Object.entries(n),l=0;l<c.length;l++)a[c[l][0]]=c[l][1];function u(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,u)}r(u),t.DOMException=a,t.DOMExceptionName=o,t.ExceptionCode=n,t.ParseError=u},786:(U,e,t)=>{"use strict";var i=t(870),s=i.find,F=i.hasDefaultHTMLNamespace,d=i.hasOwn,k=i.isHTMLMimeType,B=i.isHTMLRawTextElement,G=i.isHTMLVoidElement,a=i.MIME_TYPE,T=i.NAMESPACE,p=Symbol(),n=t(767),l=n.DOMException,V=n.DOMExceptionName,I=t(731);function r(e){if(e!==p)throw new TypeError("Illegal constructor")}function H(e){return""!==e}function j(e,t){return d(e,t)||(e[t]=!0),e}function q(e){if(!e)return[];e=e?e.split(/[\t\n\f\r ]+/).filter(H):[];return Object.keys(e.reduce(j,{}))}function X(e){if(!I.QName_exact.test(e))throw new l(l.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+e+'"')}function Y(e,t){X(t),e=e||null;var n,r=null,o=t;if(0<=t.indexOf(":")&&(r=(n=t.split(":"))[0],o=n[1]),null!==r&&null===e)throw new l(l.NAMESPACE_ERR,"prefix is non-null and namespace is null");if("xml"===r&&e!==i.NAMESPACE.XML)throw new l(l.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if(("xmlns"===r||"xmlns"===t)&&e!==i.NAMESPACE.XMLNS)throw new l(l.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(e===i.NAMESPACE.XMLNS&&"xmlns"!==r&&"xmlns"!==t)throw new l(l.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[e,r,o]}function o(e,t){for(var n in e)d(e,n)&&(t[n]=e[n])}function c(e,t){var n=e.prototype;function r(){}n instanceof t||(r.prototype=t.prototype,o(n,r=new r),e.prototype=n=r),n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var n={},f=(n.ELEMENT_NODE=1,n.ATTRIBUTE_NODE=2,n.TEXT_NODE=3,n.CDATA_SECTION_NODE=4,n.ENTITY_REFERENCE_NODE=5,n.ENTITY_NODE=6,n.PROCESSING_INSTRUCTION_NODE=7,n.COMMENT_NODE=8,n.DOCUMENT_NODE=9,n.DOCUMENT_TYPE_NODE=10,n.DOCUMENT_FRAGMENT_NODE=11,n.NOTATION_NODE=12,i.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32}));function $(e){return e.guid||(e.guid=Math.random()),e.guid}function m(){}function u(e,t){this._node=e,this._refresh=t,h(this)}function h(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var n=e._refresh(e._node);if(de(e,"length",n.length),!e.$$length||n.length<e.$$length)for(var r=n.length;r in e;r++)d(e,r)&&delete e[r];o(n,e),e._inc=t}}function g(){}function W(e,t){for(var n=0;n<e.length;){if(e[n]===t)return n;n++}}function K(e,t,n){var r=W(t,n);if(0<=r){for(var o,i=t.length-1;r<=i;)t[r]=t[++r];t.length=i,e&&((o=e.ownerDocument)&&J(o,e,n),n.ownerElement=null)}}function z(){}function E(e){r(e)}function Q(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function N(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(N(e,t))return 1}while(e=e.nextSibling)}function S(e,t){r(e);e=t||{};(this.ownerDocument=this).contentType=e.contentType||a.XML_APPLICATION,this.type=k(this.contentType)?"html":"xml"}function J(e,t,n){e&&e._inc++,n.namespaceURI===T.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function Z(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n&&!n.nextSibling)r[r.length++]=n;else{for(var o=t.firstChild,i=0;o;)o=(r[i++]=o).nextSibling;r.length=i,delete r[r.length]}}}function ee(e,t){if(e!==t.parentNode)throw new l(l.NOT_FOUND_ERR,"child's parent is not parent");var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,Z(e.ownerDocument,e),t.parentNode=null,t.previousSibling=null,t.nextSibling=null,t}function A(e){return e&&e.nodeType===E.DOCUMENT_TYPE_NODE}function b(e){return e&&e.nodeType===E.ELEMENT_NODE}function te(e){return e&&e.nodeType===E.TEXT_NODE}function ne(e,t){var n,e=e.childNodes||[];if(!s(e,b)&&!A(t))return n=s(e,A),!(t&&n&&e.indexOf(n)>e.indexOf(t))}function re(e,t){var n,e=e.childNodes||[];if(!s(e,function(e){return b(e)&&e!==t}))return n=s(e,A),!(t&&n&&e.indexOf(n)>e.indexOf(t))}function oe(e,t,n){var r=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===E.DOCUMENT_FRAGMENT_NODE){var i=o.filter(b);if(1<i.length||s(o,te))throw new l(l.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===i.length&&!ne(e,n))throw new l(l.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(b(t)&&!ne(e,n))throw new l(l.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(A(t)){if(s(r,A))throw new l(l.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");o=s(r,b);if(n&&r.indexOf(o)<r.indexOf(n))throw new l(l.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!n&&o)throw new l(l.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function ie(e,t,n){var r=e.childNodes||[],o=t.childNodes||[];if(t.nodeType===E.DOCUMENT_FRAGMENT_NODE){var i=o.filter(b);if(1<i.length||s(o,te))throw new l(l.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===i.length&&!re(e,n))throw new l(l.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(b(t)&&!re(e,n))throw new l(l.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(A(t)){if(s(r,function(e){return A(e)&&e!==n}))throw new l(l.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");o=s(r,b);if(n&&r.indexOf(o)<r.indexOf(n))throw new l(l.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function R(e,t,n,r){var o=e,i=t,s=n;if(!o||o.nodeType!==E.DOCUMENT_NODE&&o.nodeType!==E.DOCUMENT_FRAGMENT_NODE&&o.nodeType!==E.ELEMENT_NODE)throw new l(l.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+o.nodeType);if(s&&s.parentNode!==o)throw new l(l.NOT_FOUND_ERR,"child not in parent");if(!i||i.nodeType!==E.CDATA_SECTION_NODE&&i.nodeType!==E.COMMENT_NODE&&i.nodeType!==E.DOCUMENT_FRAGMENT_NODE&&i.nodeType!==E.DOCUMENT_TYPE_NODE&&i.nodeType!==E.ELEMENT_NODE&&i.nodeType!==E.PROCESSING_INSTRUCTION_NODE&&i.nodeType!==E.TEXT_NODE||A(i)&&o.nodeType!==E.DOCUMENT_NODE)throw new l(l.HIERARCHY_REQUEST_ERR,"Unexpected node type "+i.nodeType+" for parent node type "+o.nodeType);e.nodeType===E.DOCUMENT_NODE&&(r||oe)(e,t,n);s=t.parentNode;if(s&&s.removeChild(t),11===t.nodeType){var a=t.firstChild;if(null==a)return t;var c=t.lastChild}else a=c=t;i=n?n.previousSibling:e.lastChild;for(a.previousSibling=i,c.nextSibling=n,i?i.nextSibling=a:e.firstChild=a,null==n?e.lastChild=c:n.previousSibling=c;a.parentNode=e,a!==c&&(a=a.nextSibling););return Z(e.ownerDocument||e,e,t),11==t.nodeType&&(t.firstChild=t.lastChild=null),t}function O(e){r(e),this._nsMap=Object.create(null)}function C(e){r(e),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}function y(e){r(e)}function v(e){r(e)}function L(e){r(e)}function M(e){r(e)}function _(e){r(e)}function se(e){r(e)}function ae(e){r(e)}function w(e){r(e)}function D(e){r(e)}function P(e){r(e)}function ce(){}function le(e){var t,n=[],r=9===this.nodeType&&this.documentElement||this,o=r.prefix,i=r.namespaceURI;return x(this,n,e,t=i&&null==o&&null==(o=r.lookupPrefix(i))?[{namespace:i,prefix:null}]:t),n.join("")}function ue(e,t,n){var r=e.prefix||"",o=e.namespaceURI;if(o&&("xml"!==r||o!==T.XML)&&o!==T.XMLNS){for(var i=n.length;i--;){var s=n[i];if(s.prefix===r)return s.namespace!==o}return 1}}function he(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,Q),'"')}function x(e,t,n,r){r=r||[];var o="html"===(9===e.nodeType?e:e.ownerDocument).type;if(n){if(!(e=n(e)))return;if("string"==typeof e)return t.push(e)}switch(e.nodeType){case 1:var i=e.attributes,s=i.length,a=e.firstChild,c=e.tagName,l=c;if(!o&&!e.prefix&&e.namespaceURI){for(var u,h,d=0;d<i.length;d++)if("xmlns"===i.item(d).name){u=i.item(d).value;break}if(!u)for(var p=r.length-1;0<=p;p--)if(""===(h=r[p]).prefix&&h.namespace===e.namespaceURI){u=h.namespace;break}if(u!==e.namespaceURI)for(p=r.length-1;0<=p;p--)if((h=r[p]).namespace===e.namespaceURI){h.prefix&&(l=h.prefix+":"+c);break}}t.push("<",l);for(var f,m,g,E=0;E<s;E++)"xmlns"==(f=i.item(E)).prefix?r.push({prefix:f.localName,namespace:f.value}):"xmlns"==f.nodeName&&r.push({prefix:"",namespace:f.value});for(E=0;E<s;E++)ue(f=i.item(E),0,r)&&(he(t,(m=f.prefix||"")?"xmlns:"+m:"xmlns",g=f.namespaceURI),r.push({prefix:m,namespace:g})),x(f,t,n,r);c===l&&ue(e,0,r)&&(he(t,(m=e.prefix||"")?"xmlns:"+m:"xmlns",g=e.namespaceURI),r.push({prefix:m,namespace:g}));var N=!a;if(N=N&&(o||e.namespaceURI===T.HTML)?G(c):N)t.push("/>");else{if(t.push(">"),o&&B(c))for(;a;)a.data?t.push(a.data):x(a,t,n,r.slice()),a=a.nextSibling;else for(;a;)x(a,t,n,r.slice()),a=a.nextSibling;t.push("</",l,">")}return;case 9:case 11:for(a=e.firstChild;a;)x(a,t,n,r.slice()),a=a.nextSibling;return;case 2:return he(t,e.name,e.value);case 3:return t.push(e.data.replace(/[<&>]/g,Q));case 4:return t.push(I.CDATA_START,e.data,I.CDATA_END);case 8:return t.push(I.COMMENT_START,e.data,I.COMMENT_END);case 10:var N=e.publicId,S=e.systemId;return t.push(I.DOCTYPE_DECL_START," ",e.name),N?(t.push(" ",I.PUBLIC," ",N),S&&"."!==S&&t.push(" ",S)):S&&"."!==S&&t.push(" ",I.SYSTEM," ",S),e.internalSubset&&t.push(" [",e.internalSubset,"]"),t.push(">");case 7:return t.push("<?",e.target," ",e.data,"?>");case 5:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function de(e,t,n){e[t]=n}(m.prototype={length:0,item:function(e){return 0<=e&&e<this.length?this[e]:null},toString:function(e){for(var t=[],n=0;n<this.length;n++)x(this[n],t,e);return t.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}})[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},u.prototype.item=function(e){return h(this),this[e]||null},c(u,m),(g.prototype={length:0,item:m.prototype.item,getNamedItem:function(e){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());for(var t=0;t<this.length;){var n=this[t];if(n.nodeName===e)return n;t++}return null},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!==this._ownerElement)throw new l(l.INUSE_ATTRIBUTE_ERR);var n,r,o,t=this.getNamedItemNS(e.namespaceURI,e.localName);return t===e?e:(n=this._ownerElement,r=this,e=e,(o=t)?r[W(r,o)]=e:(r[r.length]=e,r.length++),n&&(r=(e.ownerElement=n).ownerDocument)&&(o&&J(r,n,o),o=n,n=e,r&&r._inc++,n.namespaceURI===T.XMLNS&&(o._nsMap[n.prefix?n.localName:""]=n.value)),t)},setNamedItemNS:function(e){return this.setNamedItem(e)},removeNamedItem:function(e){var t=this.getNamedItem(e);if(t)return K(this._ownerElement,this,t),t;throw new l(l.NOT_FOUND_ERR,e)},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);if(n)return K(this._ownerElement,this,n),n;throw new l(l.NOT_FOUND_ERR,e?e+" : "+t:t)},getNamedItemNS:function(e,t){e=e||null;for(var n=0;n<this.length;){var r=this[n];if(r.localName===t&&r.namespaceURI===e)return r;n++}return null}})[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},z.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var r=a.XML_APPLICATION,r=(e===T.HTML?r=a.XML_XHTML_APPLICATION:e===T.SVG&&(r=a.XML_SVG_IMAGE),new S(p,{contentType:r}));return r.implementation=this,r.childNodes=new m,r.doctype=n||null,n&&r.appendChild(n),t&&(n=r.createElementNS(e,t),r.appendChild(n)),r},createDocumentType:function(e,t,n,r){X(e);var o=new _(p);return o.name=e,o.nodeName=e,o.publicId=t||"",o.systemId=n||"",o.internalSubset=r||"",o.childNodes=new m,o},createHTMLDocument:function(e){var t,n,r,o=new S(p,{contentType:a.HTML});return o.implementation=this,o.childNodes=new m,!1!==e&&(o.doctype=this.createDocumentType("html"),(o.doctype.ownerDocument=o).appendChild(o.doctype),t=o.createElement("html"),o.appendChild(t),n=o.createElement("head"),t.appendChild(n),"string"==typeof e&&((r=o.createElement("title")).appendChild(o.createTextNode(e)),n.appendChild(r)),t.appendChild(o.createElement("body"))),o}},E.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var e=this.getRootNode();return e&&e.nodeType===e.DOCUMENT_NODE},contains:function(e){if(!e)return!1;var t=e;do{if(this===t)return!0}while(t=e.parentNode);return!1},getRootNode:function(e){var t=this;do{if(!t.parentNode)return t}while(t=t.parentNode)},isEqualNode:function(e){if(!e)return!1;if(this.nodeType!==e.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==e.name)return!1;if(this.publicId!==e.publicId)return!1;if(this.systemId!==e.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==e.namespaceURI)return!1;if(this.prefix!==e.prefix)return!1;if(this.localName!==e.localName)return!1;if(this.attributes.length!==e.attributes.length)return!1;for(var t=0;t<this.attributes.length;t++){var n=this.attributes.item(t);if(!n.isEqualNode(e.getAttributeNodeNS(n.namespaceURI,n.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==e.namespaceURI)return!1;if(this.localName!==e.localName)return!1;if(this.value!==e.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==e.target||this.data!==e.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==e.data)return!1}if(this.childNodes.length!==e.childNodes.length)return!1;for(t=0;t<this.childNodes.length;t++)if(!this.childNodes[t].isEqualNode(e.childNodes[t]))return!1;return!0},isSameNode:function(e){return this===e},insertBefore:function(e,t){return R(this,e,t)},replaceChild:function(e,t){R(this,e,t,ie),t&&this.removeChild(t)},removeChild:function(e){return ee(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var o,i,s=new n.constructor(p);for(o in n)d(n,o)&&"object"!=typeof(i=n[o])&&i!=s[o]&&(s[o]=i);switch(n.childNodes&&(s.childNodes=new m),s.ownerDocument=t,s.nodeType){case 1:var a=n.attributes,c=s.attributes=new g,l=a.length;c._ownerElement=s;for(var u=0;u<l;u++)s.setAttributeNode(e(t,a.item(u),!0));break;case 2:r=!0}if(r)for(var h=n.firstChild;h;)s.appendChild(e(t,h,r)),h=h.nextSibling;return s}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&3==t.nodeType&&3==e.nodeType?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(d(n,r)&&n[r]===e)return r;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&d(n,e))return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)},compareDocumentPosition:function(e){if(this===e)return 0;var t=e,n=this,r=null,o=null;if(t instanceof C&&(t=(r=t).ownerElement),n instanceof C&&(n=(o=n).ownerElement,r&&t&&n===t))for(var i,s=0;i=n.attributes[s];s++){if(i===r)return f.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+f.DOCUMENT_POSITION_PRECEDING;if(i===o)return f.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+f.DOCUMENT_POSITION_FOLLOWING}if(!t||!n||n.ownerDocument!==t.ownerDocument)return f.DOCUMENT_POSITION_DISCONNECTED+f.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+($(n.ownerDocument)>$(t.ownerDocument)?f.DOCUMENT_POSITION_FOLLOWING:f.DOCUMENT_POSITION_PRECEDING);if(o&&t===n)return f.DOCUMENT_POSITION_CONTAINS+f.DOCUMENT_POSITION_PRECEDING;if(r&&t===n)return f.DOCUMENT_POSITION_CONTAINED_BY+f.DOCUMENT_POSITION_FOLLOWING;for(var a=[],c=t.parentNode;c;){if(!o&&c===n)return f.DOCUMENT_POSITION_CONTAINED_BY+f.DOCUMENT_POSITION_FOLLOWING;a.push(c),c=c.parentNode}a.reverse();for(var l=[],u=n.parentNode;u;){if(!r&&u===t)return f.DOCUMENT_POSITION_CONTAINS+f.DOCUMENT_POSITION_PRECEDING;l.push(u),u=u.parentNode}l.reverse();var h,d=function e(t,n){if(n.length<t.length)return e(n,t);var r,o=null;for(r in t){if(t[r]!==n[r])return o;o=t[r]}return o}(a,l);for(h in d.childNodes){var p=d.childNodes[h];if(p===n)return f.DOCUMENT_POSITION_FOLLOWING;if(p===t)return f.DOCUMENT_POSITION_PRECEDING;if(0<=l.indexOf(p))return f.DOCUMENT_POSITION_FOLLOWING;if(0<=a.indexOf(p))return f.DOCUMENT_POSITION_PRECEDING}return 0}},o(n,E),o(n,E.prototype),o(f,E),o(f,E.prototype),S.prototype={implementation:null,nodeName:"#document",nodeType:9,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(11!==e.nodeType)return R(this,e,t),null===(e.ownerDocument=this).documentElement&&1===e.nodeType&&(this.documentElement=e),e;for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e},removeChild:function(e){e=ee(this,e);return e===this.documentElement&&(this.documentElement=null),e},replaceChild:function(e,t){R(this,e,t,ie),e.ownerDocument=this,t&&this.removeChild(t),b(e)&&(this.documentElement=e)},importNode:function(e,t){return function e(t,n,r){var o;switch(n.nodeType){case 1:(o=n.cloneNode(!1)).ownerDocument=t;case 11:break;case 2:r=!0}if((o=o||n.cloneNode(!1)).ownerDocument=t,o.parentNode=null,r)for(var i=n.firstChild;i;)o.appendChild(e(t,i,r)),i=i.nextSibling;return o}(this,e,t)},getElementById:function(t){var n=null;return N(this.documentElement,function(e){if(1==e.nodeType&&e.getAttribute("id")==t)return n=e,!0}),n},createElement:function(e){var t=new O(p);return"html"===(t.ownerDocument=this).type&&(e=e.toLowerCase()),F(this.contentType)&&(t.namespaceURI=T.HTML),t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new m,(t.attributes=new g)._ownerElement=t},createDocumentFragment:function(){var e=new D(p);return e.ownerDocument=this,e.childNodes=new m,e},createTextNode:function(e){var t=new v(p);return t.ownerDocument=this,t.childNodes=new m,t.appendData(e),t},createComment:function(e){var t=new L(p);return t.ownerDocument=this,t.childNodes=new m,t.appendData(e),t},createCDATASection:function(e){var t=new M(p);return t.ownerDocument=this,t.childNodes=new m,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new P(p);return n.ownerDocument=this,n.childNodes=new m,n.nodeName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){if(I.QName_exact.test(e))return"html"===this.type&&(e=e.toLowerCase()),this._createAttribute(e);throw new l(l.INVALID_CHARACTER_ERR,'invalid character in name "'+e+'"')},_createAttribute:function(e){var t=new C(p);return t.ownerDocument=this,t.childNodes=new m,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){if(!I.Name.test(e))throw new l(l.INVALID_CHARACTER_ERR,'not a valid xml name "'+e+'"');if("html"===this.type)throw new l("document is an html document",V.NotSupportedError);var t=new w(p);return t.ownerDocument=this,t.childNodes=new m,t.nodeName=e,t},createElementNS:function(e,t){var e=Y(e,t),n=new O(p),r=n.attributes=new g;return n.childNodes=new m,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e[0],n.prefix=e[1],n.localName=e[2],r._ownerElement=n},createAttributeNS:function(e,t){var e=Y(e,t),n=new C(p);return n.ownerDocument=this,n.childNodes=new m,n.nodeName=t,n.name=t,n.specified=!0,n.namespaceURI=e[0],n.prefix=e[1],n.localName=e[2],n}},c(S,E),S.prototype.getElementsByClassName=(O.prototype={nodeType:1,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return"html"===this.ownerDocument.type&&this.namespaceURI===T.HTML},hasAttributes:function(){return!(!this.attributes||!this.attributes.length)},hasAttribute:function(e){return!!this.getAttributeNode(e)},getAttribute:function(e){e=this.getAttributeNode(e);return e?e.value:null},getAttributeNode:function(e){return this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase()),this.attributes.getNamedItem(e)},setAttribute:function(e,t){this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());var n=this.getAttributeNode(e);n?n.value=n.nodeValue=""+t:((n=this.ownerDocument._createAttribute(e)).value=n.nodeValue=""+t,this.setAttributeNode(n))},removeAttribute:function(e){e=this.getAttributeNode(e);e&&this.removeAttributeNode(e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){e=this.getAttributeNodeNS(e,t);e&&this.removeAttributeNode(e)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){e=this.getAttributeNodeNS(e,t);return e?e.value:null},setAttributeNS:function(e,t,n){var r=Y(e,t)[2],r=this.getAttributeNodeNS(e,r);r?r.value=r.nodeValue=""+n:((r=this.ownerDocument.createAttributeNS(e,t)).value=r.nodeValue=""+n,this.setAttributeNode(r))},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByClassName:function(s){var a=q(s);return new u(this,function(o){var i=[];return 0<a.length&&N(o,function(e){var t,n,r;e!==o&&1===e.nodeType&&(t=e.getAttribute("class"))&&((n=s===t)||(t=q(t),n=a.every((r=t,function(e){return r&&-1!==r.indexOf(e)}))),n&&i.push(e))}),i})},getElementsByTagName:function(r){var o="html"===(9===this.nodeType?this:this.ownerDocument).type,i=r.toLowerCase();return new u(this,function(t){var n=[];return N(t,function(e){e===t||1!==e.nodeType||"*"!==r&&e.getQualifiedName()!==(o&&e.namespaceURI===T.HTML?i:r)||n.push(e)}),n})},getElementsByTagNameNS:function(r,o){return new u(this,function(t){var n=[];return N(t,function(e){e===t||1!==e.nodeType||"*"!==r&&e.namespaceURI!==r||"*"!==o&&e.localName!=o||n.push(e)}),n})}}).getElementsByClassName,S.prototype.getElementsByTagName=O.prototype.getElementsByTagName,S.prototype.getElementsByTagNameNS=O.prototype.getElementsByTagNameNS,c(O,E),C.prototype.nodeType=2,c(C,E),y.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},c(y,E),v.prototype={nodeName:"#text",nodeType:3,splitText:function(e){var t=(n=this.data).substring(e),n=n.substring(0,e),e=(this.data=this.nodeValue=n,this.length=n.length,this.ownerDocument.createTextNode(t));return this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling),e}},c(v,y),L.prototype={nodeName:"#comment",nodeType:8},c(L,y),M.prototype={nodeName:"#cdata-section",nodeType:4},c(M,v),_.prototype.nodeType=10,c(_,E),se.prototype.nodeType=12,c(se,E),ae.prototype.nodeType=6,c(ae,E),w.prototype.nodeType=5,c(w,E),D.prototype.nodeName="#document-fragment",D.prototype.nodeType=11,c(D,E),P.prototype.nodeType=7,c(P,y),ce.prototype.serializeToString=function(e,t){return le.call(e,t)},E.prototype.toString=le;try{Object.defineProperty&&(Object.defineProperty(u.prototype,"length",{get:function(){return h(this),this.$$length}}),Object.defineProperty(E.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case 1:case 11:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),de=function(e,t,n){e["$$"+t]=n})}catch(e){}e._updateLiveList=h,e.Attr=C,e.CDATASection=M,e.CharacterData=y,e.Comment=L,e.Document=S,e.DocumentFragment=D,e.DocumentType=_,e.DOMImplementation=z,e.Element=O,e.Entity=ae,e.EntityReference=w,e.LiveNodeList=u,e.NamedNodeMap=g,e.Node=E,e.NodeList=m,e.Notation=se,e.Text=v,e.ProcessingInstruction=P,e.XMLSerializer=ce},802:(e,t,n)=>{"use strict";var P=n(870),x=n(731),n=n(767),U=P.isHTMLEscapableRawTextElement,F=P.isHTMLMimeType,k=P.isHTMLRawTextElement,B=P.hasOwn,p=P.NAMESPACE,G=n.ParseError,V=n.DOMException;function r(){}r.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),f(t,t=Object.create(null)),function(n,e,r,o,i){var s=F(o.mimeType);function a(e){var t=";"===e[e.length-1]?e:e+";";if(!s&&t!==e)return i.error("EntityRef: expecting ;"),e;var n=x.Reference.exec(t);if(!n||n[0].length!==t.length)return i.error("entity not matching Reference production: "+e),e;var n=t.slice(1,-1);return B(r,n)?r[n]:"#"===n.charAt(0)?65535<(t=parseInt(n.substring(1).replace("x","0x")))?(n=55296+((t-=65536)>>10),String.fromCharCode(n,56320+(1023&t))):String.fromCharCode(t):(i.error("entity not found:"+e),e)}function t(e){var t;m<e&&(t=n.substring(m,e).replace(H,a),h&&d(m),o.characters(t,0,e-m),m=e)}0<=n.indexOf(x.UNICODE_REPLACEMENT_CHARACTER)&&i.warning("Unicode replacement character detected, source encoding issues?");var c=0,l=0,u=/\r\n?|\n|$/g,h=o.locator;function d(e,t){for(;l<=e&&(t=u.exec(n));)c=l,l=t.index+t[0].length,h.lineNumber++;h.columnNumber=e-c+1}for(var p=[{currentNSMap:e}],f=[],m=0;;){try{var g,E=n.indexOf("<",m);if(E<0){if(!s&&0<f.length)return i.fatalError("unclosed xml tag(s): "+f.join(", "));if(!n.substring(m).match(/^\s*$/)){var N=o.doc,S=N.createTextNode(n.substring(m));if(N.documentElement)return i.error("Extra content at the end of the document");N.appendChild(S),o.currentElement=S}return}switch(m<E&&(g=n.substring(m,E),s||0!==f.length||(g=g.replace(new RegExp(x.S_OPT.source,"g"),""))&&i.error("Unexpected content outside root element: '"+g+"'"),t(E)),n.charAt(E+1)){case"/":var T=n.indexOf(">",E+2),I=n.substring(E+2,0<T?T:void 0);if(!I)return i.fatalError("end tag name missing");var A=0<T&&x.reg("^",x.QName_group,x.S_OPT,"$").exec(I);if(!A)return i.fatalError('end tag name contains invalid characters: "'+I+'"');if(!o.currentElement&&!o.doc.documentElement)return;var b=f[f.length-1]||o.currentElement.tagName||o.doc.documentElement.tagName||"";if(b!==A[1]){var R=A[1].toLowerCase();if(!s||b.toLowerCase()!==R)return i.fatalError('Opening and ending tag mismatch: "'+b+'" != "'+I+'"')}var O=p.pop(),C=(f.pop(),O.localNSMap);if(o.endElement(O.uri,O.localName,b),C)for(var y in C)B(C,y)&&o.endPrefixMapping(y);T++;break;case"?":h&&d(E),T=function(e,t,n,r){var o=e.substring(t).match(x.PI);if(!o)return r.fatalError("Invalid processing instruction starting at position "+t);if("xml"===o[1].toLowerCase()){if(0<t)return r.fatalError("processing instruction at position "+t+" is an xml declaration which is only at the start of the document");if(!x.XMLDecl.test(e.substring(t)))return r.fatalError("xml declaration is not well-formed")}return n.processingInstruction(o[1],o[2]),t+o[0].length}(n,E,o,i);break;case"!":h&&d(E),T=X(n,E,o,i,s);break;default:h&&d(E);var v=new Y,L=p[p.length-1].currentNSMap,M=(T=function(e,t,r,o,i,s){function n(e,t,n){B(r.attributeNames,e)?i.fatalError("Attribute "+e+" redefined"):!s&&0<=t.indexOf("<")?i.fatalError("Unescaped '<' not allowed in attributes values"):r.addValue(e,t.replace(/[\t\n\r]/g," ").replace(H,o),n)}for(var a,c=++t,l=0;;){var u=e.charAt(c);switch(u){case"=":if(1===l)a=e.slice(t,c),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(i.warning('attribute value must after "="'),a=e.slice(t,c)),t=c+1,!(0<(c=e.indexOf(u,t))))throw new Error("attribute value no end '"+u+"' match");n(a,h=e.slice(t,c),t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');n(a,h=e.slice(t,c),t),i.warning('attribute "'+a+'" missed start quot('+u+")!!"),t=c+1,l=5}break;case"/":switch(l){case 0:r.setTagName(e.slice(t,c));case 5:case 6:case 7:l=7,r.closed=!0;case 4:case 1:break;case 2:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),0==l&&r.setTagName(e.slice(t,c)),c;case">":switch(l){case 0:r.setTagName(e.slice(t,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=e.slice(t,c)).slice(-1)&&(r.closed=!0,h=h.slice(0,-1));case 2:2===l&&(h=a),4==l?(i.warning('attribute "'+h+'" missed quot(")!'),n(a,h,t)):(s||i.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),n(h,h,t));break;case 3:if(!s)return i.fatalError("AttValue: ' or \" expected")}return c;case"Â€":u=" ";default:if(u<=" ")switch(l){case 0:r.setTagName(e.slice(t,c)),l=6;break;case 1:a=e.slice(t,c),l=2;break;case 4:var h=e.slice(t,c);i.warning('attribute "'+h+'" missed quot(")!!'),n(a,h,t);case 5:l=6}else switch(l){case 2:s||i.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n(a,a,t),t=c,l=1;break;case 5:i.warning('attribute space is required"'+a+'"!!');case 6:l=1,t=c;break;case 3:l=4,t=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}(n,E,v,a,i,s),v.length);if(v.closed||(s&&P.isHTMLVoidElement(v.tagName)?v.closed=!0:f.push(v.tagName)),h&&M){for(var _=j(h,{}),w=0;w<M;w++){var D=v[w];d(D.offset),D.locator=j(h,{})}o.locator=_,q(v,o,L)&&p.push(v),o.locator=h}else q(v,o,L)&&p.push(v);s&&!v.closed?T=function(e,t,n,r,o){var i=U(n);if(i||k(n))return n=e.indexOf("</"+n+">",t),e=e.substring(t+1,n),i&&(e=e.replace(H,r)),o.characters(e,0,e.length),n;return t+1}(n,T,v.tagName,a,o):T++}}catch(n){if(n instanceof G)throw n;if(n instanceof V)throw new G(n.name+": "+n.message,o.locator,n);i.error("element parse error: "+n),T=-1}m<T?m=T:t(Math.max(E,m)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}};var H=/&#?\w+;?/g;function j(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function q(e,t,n){for(var r,o=e.tagName,i=null,s=e.length;s--;){var a,c=e[s],l=c.qName,u=c.value,l=0<(r=l.indexOf(":"))?(a=c.prefix=l.slice(0,r),h=l.slice(r+1),"xmlns"===a&&h):(a=null,"xmlns"===(h=l)&&"");c.localName=h,!1!==l&&(null==i&&(i=Object.create(null),f(n,n=Object.create(null))),n[l]=i[l]=u,c.uri=p.XMLNS,t.startPrefixMapping(l,u))}for(s=e.length;s--;)(c=e[s]).prefix&&("xml"===c.prefix&&(c.uri=p.XML),"xmlns"!==c.prefix&&(c.uri=n[c.prefix]));var h=0<(r=o.indexOf(":"))?(a=e.prefix=o.slice(0,r),e.localName=o.slice(r+1)):(a=null,e.localName=o),d=e.uri=n[a||""];if(t.startElement(d,h,o,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,1;if(t.endElement(d,h,o),i)for(a in i)B(i,a)&&t.endPrefixMapping(a)}function f(e,t){for(var n in e)B(e,n)&&(t[n]=e[n])}function c(n,e){var r=e;function o(e){return n.charAt(r+(e=e||0))}function i(e){r+=e||1}function t(){return n.substring(r)}return{char:o,getIndex:function(){return r},getMatch:function(e){e=x.reg("^",e).exec(t());return e?(i(e[0].length),e[0]):null},getSource:function(){return n},skip:i,skipBlanks:function(){for(var e=0;r<n.length;){var t=o();if(" "!==t&&"\n"!==t&&"\t"!==t&&"\r"!==t)return e;e++,i()}return-1},substringFromIndex:t,substringStartsWith:function(e){return n.substring(r,r+e.length)===e},substringStartsWithCaseInsensitive:function(e){return n.substring(r,r+e.length).toUpperCase()===e.toUpperCase()}}}function X(e,t,n,r,o){var i=c(e,t);switch(o?i.char(2).toUpperCase():i.char(2)){case"-":var s=i.getMatch(x.Comment);return s?(n.comment(s,x.COMMENT_START.length,s.length-x.COMMENT_START.length-x.COMMENT_END.length),i.getIndex()):r.fatalError("comment is not well-formed at position "+i.getIndex());case"[":s=i.getMatch(x.CDSect);return s?o||n.currentElement?(n.startCDATA(),n.characters(s,x.CDATA_START.length,s.length-x.CDATA_START.length-x.CDATA_END.length),n.endCDATA(),i.getIndex()):r.fatalError("CDATA outside of element"):r.fatalError("Invalid CDATA starting at position "+t);case"D":if(n.doc&&n.doc.documentElement)return r.fatalError("Doctype not allowed inside or after documentElement at position "+i.getIndex());if(o?!i.substringStartsWithCaseInsensitive(x.DOCTYPE_DECL_START):!i.substringStartsWith(x.DOCTYPE_DECL_START))return r.fatalError("Expected "+x.DOCTYPE_DECL_START+" at position "+i.getIndex());if(i.skip(x.DOCTYPE_DECL_START.length),i.skipBlanks()<1)return r.fatalError("Expected whitespace after "+x.DOCTYPE_DECL_START+" at position "+i.getIndex());s={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(s.name=i.getMatch(x.Name),!s.name)return r.fatalError("doctype name missing or contains unexpected characters at position "+i.getIndex());if(o&&"html"!==s.name.toLowerCase()&&r.warning("Unexpected DOCTYPE in HTML document at position "+i.getIndex()),i.skipBlanks(),i.substringStartsWith(x.PUBLIC)||i.substringStartsWith(x.SYSTEM)){var a=x.ExternalID_match.exec(i.substringFromIndex());if(!a)return r.fatalError("doctype external id is not well-formed at position "+i.getIndex());void 0!==a.groups.SystemLiteralOnly?s.systemId=a.groups.SystemLiteralOnly:(s.systemId=a.groups.SystemLiteral,s.publicId=a.groups.PubidLiteral),i.skip(a[0].length)}else if(o&&i.substringStartsWithCaseInsensitive(x.SYSTEM)){if(i.skip(x.SYSTEM.length),i.skipBlanks()<1)return r.fatalError("Expected whitespace after "+x.SYSTEM+" at position "+i.getIndex());if(s.systemId=i.getMatch(x.ABOUT_LEGACY_COMPAT_SystemLiteral),!s.systemId)return r.fatalError("Expected "+x.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+x.SYSTEM+" at position "+i.getIndex())}return o&&s.systemId&&!x.ABOUT_LEGACY_COMPAT_SystemLiteral.test(s.systemId)&&r.warning("Unexpected doctype.systemId in HTML document at position "+i.getIndex()),o||(i.skipBlanks(),s.internalSubset=function(e,t){var n,r,o=e.getSource();if("["===e.char()){e.skip(1);for(var i,s=e.getIndex();e.getIndex()<o.length;){if(e.skipBlanks(),"]"===e.char())return i=o.substring(s,e.getIndex()),e.skip(1),i;var a=null;if("<"===e.char()&&"!"===e.char(1))switch(e.char(2)){case"E":"L"===e.char(3)?a=e.getMatch(x.elementdecl):"N"===e.char(3)&&(a=e.getMatch(x.EntityDecl));break;case"A":a=e.getMatch(x.AttlistDecl);break;case"N":a=e.getMatch(x.NotationDecl);break;case"-":a=e.getMatch(x.Comment)}else if("<"===e.char()&&"?"===e.char(1))i=e,n=t,r=void 0,a=(r=x.PI.exec(i.substringFromIndex()))?"xml"===r[1].toLowerCase()?n.fatalError("xml declaration is only allowed at the start of the document, but found at position "+i.getIndex()):(i.skip(r[0].length),r[0]):n.fatalError("processing instruction is not well-formed at position "+i.getIndex());else{if("%"!==e.char())return t.fatalError("Error detected in Markup declaration");a=e.getMatch(x.PEReference)}if(!a)return t.fatalError("Error in internal subset at position "+e.getIndex())}return t.fatalError("doctype internal subset is not well-formed, missing ]")}}(i,r)),i.skipBlanks(),">"!==i.char()?r.fatalError("doctype not terminated with > at position "+i.getIndex()):(i.skip(1),n.startDTD(s.name,s.publicId,s.systemId,s.internalSubset),n.endDTD(),i.getIndex());default:return r.fatalError('Not well-formed XML starting with "<!" at position '+t)}}function Y(){this.attributeNames=Object.create(null)}Y.prototype={setTagName:function(e){if(!x.QName_exact.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!x.QName_exact.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=r,t.parseUtils=c,t.parseDoctypeCommentOrCData=X},870:(e,t)=>{"use strict";function n(e,t){return(t=void 0===t?Object:t)&&"function"==typeof t.getOwnPropertyDescriptors&&(e=t.create(null,t.getOwnPropertyDescriptors(e))),t&&"function"==typeof t.freeze?t.freeze(e):e}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var r=n({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0}),o=n({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),s=n({script:!1,style:!1,textarea:!0,title:!0});function a(e){return e===c.HTML}var c=n({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),l=Object.keys(c).map(function(e){return c[e]}),u=n({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in t)i(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var r=0;r<e.length;r++)if(i(e,r)){var o=e[r];if(t.call(void 0,o,r,e))return o}},t.freeze=n,t.HTML_BOOLEAN_ATTRIBUTES=r,t.HTML_RAW_TEXT_ELEMENTS=s,t.HTML_VOID_ELEMENTS=o,t.hasDefaultHTMLNamespace=function(e){return a(e)||e===c.XML_XHTML_APPLICATION},t.hasOwn=i,t.isHTMLBooleanAttribute=function(e){return i(r,e.toLowerCase())},t.isHTMLRawTextElement=function(e){e=e.toLowerCase();return i(s,e)&&!s[e]},t.isHTMLEscapableRawTextElement=function(e){e=e.toLowerCase();return i(s,e)&&s[e]},t.isHTMLMimeType=a,t.isHTMLVoidElement=function(e){return i(o,e.toLowerCase())},t.isValidMimeType=function(e){return-1<l.indexOf(e)},t.MIME_TYPE=c,t.NAMESPACE=u},999:(dt,e,t)=>{!function(){"use strict";var s=this;function l(e){return"string"==typeof e}function U(e,t,n){return e.call.apply(e.bind,arguments)}function F(t,n,e){if(t)return 2<arguments.length?(r=Array.prototype.slice.call(arguments,2),function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}):function(){return t.apply(n,arguments)};var r;throw Error()}function k(e,t,n){return(k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?U:F).apply(null,arguments)}function e(e){var i=N;function t(){}t.prototype=i.prototype,e.G=i.prototype,e.prototype=new t,(e.prototype.constructor=e).F=function(e,t,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return i.prototype[t].apply(e,r)}}var B=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function r(e,t){return-1!=e.indexOf(t)}function G(e,t){return e<t?-1:t<e?1:0}var t,V=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:n<0?Math.max(0,e.length+n):n,l(e))return l(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},c=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=l(e)?e.split(""):e,i=0;i<r;i++)i in o&&t.call(n,o[i],i,e)},H=Array.prototype.filter?function(e,t,n){return Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var r,o=e.length,i=[],s=0,a=l(e)?e.split(""):e,c=0;c<o;c++)c in a&&(r=a[c],t.call(n,r,c,e)&&(i[s++]=r));return i},o=Array.prototype.reduce?function(e,t,n,r){return r&&(t=k(t,r)),Array.prototype.reduce.call(e,t,n)}:function(n,r,e,o){var i=e;return c(n,function(e,t){i=r.call(o,i,e,t,n)}),i},j=Array.prototype.some?function(e,t,n){return Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=l(e)?e.split(""):e,i=0;i<r;i++)if(i in o&&t.call(n,o[i],i,e))return!0;return!1};e:{var n=s.navigator;if(n){n=n.userAgent;if(n){t=n;break e}}t=""}var q,X=r(t,"Opera")||r(t,"OPR"),a=r(t,"Trident")||r(t,"MSIE"),Y=r(t,"Edge"),$=r(t,"Gecko")&&!(r(t.toLowerCase(),"webkit")&&!r(t,"Edge"))&&!(r(t,"Trident")||r(t,"MSIE"))&&!r(t,"Edge"),W=r(t.toLowerCase(),"webkit")&&!r(t,"Edge");function K(){var e=s.document;return e?e.documentMode:void 0}e:{var z="",i=(i=t,$?/rv\:([^\);]+)(\)|;)/.exec(i):Y?/Edge\/([\d\.]+)/.exec(i):a?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):W?/WebKit\/(\S+)/.exec(i):X?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(i&&(z=i?i[1]:""),a){i=K();if(null!=i&&i>parseFloat(z)){q=String(i);break e}}q=z}var Q={};function J(e){if(!Q[e]){for(var t=0,n=B(String(q)).split("."),r=B(String(e)).split("."),o=Math.max(n.length,r.length),i=0;0==t&&i<o;i++){var s=n[i]||"",a=r[i]||"",c=/(\d*)(\D*)/g,l=/(\d*)(\D*)/g;do{var u=c.exec(s)||["","",""],h=l.exec(a)||["","",""]}while((0!=u[0].length||0!=h[0].length)&&0==(t=G(0==u[1].length?0:parseInt(u[1],10),0==h[1].length?0:parseInt(h[1],10))||G(0==u[2].length,0==h[2].length)||G(u[2],h[2])))}Q[e]=0<=t}}var Z=s.document,ee=Z&&a?K()||("CSS1Compat"==Z.compatMode?parseInt(q,10):5):void 0,u=a&&!(9<=Number(ee)),te=a&&!(8<=Number(ee));function h(e,t,n,r){this.a=e,this.nodeName=n,this.nodeValue=r,this.nodeType=2,this.parentNode=this.ownerElement=t}function ne(e,t){var n=te&&"href"==t.nodeName?e.getAttribute(t.nodeName,2):t.nodeValue;return new h(t,e,t.nodeName,n)}function d(e){var t=null;if("string"!=typeof(t=1==(n=e.nodeType)?null==(t=null==(t=e.textContent)||null==t?e.innerText:t)||null==t?"":t:t))if(u&&"title"==e.nodeName.toLowerCase()&&1==n)t=e.text;else if(9==n||1==n){e=9==n?e.documentElement:e.firstChild;for(var n=0,r=[],t="";e;){for(;1!=e.nodeType&&(t+=e.nodeValue),u&&"title"==e.nodeName.toLowerCase()&&(t+=e.text),e=(r[n++]=e).firstChild;);for(;n&&!(e=r[--n].nextSibling););}}else t=e.nodeValue;return""+t}function p(e,t,n){if(null===t)return!0;try{if(!e.getAttribute)return!1}catch(e){return!1}return te&&"class"==t&&(t="className"),null==n?!!e.getAttribute(t):e.getAttribute(t,2)==n}function re(e,t,n,r,o){return(u?function(e,t,n,r,o){if(e instanceof M||8==e.b||n&&null===e.b){var i=t.all;if(!i)return o;if("*"!=(e=se(e))&&!(i=t.getElementsByTagName(e)))return o;if(n){for(var s=[],a=0;t=i[a++];)p(t,n,r)&&s.push(t);i=s}for(a=0;t=i[a++];)"*"==e&&"!"==t.tagName||m(o,t);return o}return ie(e,t,n,r,o),o}:function(t,e,n,r,o){return e.getElementsByName&&r&&"name"==n&&!a?(e=e.getElementsByName(r),c(e,function(e){t.a(e)&&m(o,e)})):e.getElementsByClassName&&r&&"class"==n?(e=e.getElementsByClassName(r),c(e,function(e){e.className==r&&t.a(e)&&m(o,e)})):t instanceof y?ie(t,e,n,r,o):e.getElementsByTagName&&(e=e.getElementsByTagName(t.f()),c(e,function(e){p(e,n,r)&&m(o,e)})),o}).call(null,e,t,l(n)?n:null,l(r)?r:null,o||new f)}function oe(e,t,n,r,o){for(t=t.firstChild;t;t=t.nextSibling)p(t,n,r)&&e.a(t)&&m(o,t);return o}function ie(e,t,n,r,o){for(t=t.firstChild;t;t=t.nextSibling)p(t,n,r)&&e.a(t)&&m(o,t),ie(e,t,n,r,o)}function se(e){if(e instanceof y){if(8==e.b)return"!";if(null===e.b)return"*"}return e.f()}function ae(e,t){if(e&&t){if(e.contains&&1==t.nodeType)return e==t||e.contains(t);if(void 0!==e.compareDocumentPosition)return e==t||16&e.compareDocumentPosition(t);for(;t&&e!=t;)t=t.parentNode;return t==e}}function ce(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(a&&!(9<=Number(ee))){if(9==e.nodeType)return-1;if(9==t.nodeType)return 1}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var n=1==e.nodeType,r=1==t.nodeType;if(n&&r)return e.sourceIndex-t.sourceIndex;var o=e.parentNode,i=t.parentNode;return o==i?ue(e,t):!n&&ae(o,t)?-1*le(e,t):!r&&ae(i,e)?le(t,e):(n?e:o).sourceIndex-(r?t:i).sourceIndex}return(n=(r=9==e.nodeType?e:e.ownerDocument||e.document).createRange()).selectNode(e),n.collapse(!0),(r=r.createRange()).selectNode(t),r.collapse(!0),n.compareBoundaryPoints(s.Range.START_TO_END,r)}function le(e,t){var n=e.parentNode;if(n==t)return-1;for(var r=t;r.parentNode!=n;)r=r.parentNode;return ue(r,e)}function ue(e,t){for(var n=t;n=n.previousSibling;)if(n==e)return-1;return 1}function f(){this.b=this.a=null,this.l=0}function he(e){this.node=e,this.a=this.b=null}function de(e,t){if(!e.a)return t;if(!t.a)return e;for(var n=e.a,r=t.a,o=null,i=null,s=0;n&&r;){var i=n.node,a=r.node;i==a||i instanceof h&&a instanceof h&&i.a==a.a?(n=(i=n).a,r=r.a):0<ce(n.node,r.node)?r=(i=r).a:n=(i=n).a,(i.b=o)?o.a=i:e.a=i,o=i,s++}for(i=n||r;i;)i.b=o,s++,i=(o=o.a=i).a;return e.b=o,e.l=s,e}function pe(e,t){t=new he(t);t.a=e.a,e.b?e.a.b=t:e.a=e.b=t,e.a=t,e.l++}function m(e,t){t=new he(t);t.b=e.b,e.a?e.b.a=t:e.a=e.b=t,e.b=t,e.l++}function fe(e){return(e=e.a)?e.node:null}function me(e){return(e=fe(e))?d(e):""}function g(e,t){return new ge(e,!!t)}function ge(e,t){this.f=e,this.b=(this.c=t)?e.b:e.a,this.a=null}function E(e){var t=e.b;if(null==t)return null;var n=e.a=t;return e.b=e.c?t.b:t.a,n.node}function N(e){this.i=e,this.b=this.g=!1,this.f=null}function S(e){return"\n  "+e.toString().split("\n").join("\n  ")}function Ee(e,t){e.g=t}function Ne(e,t){e.b=t}function T(e,t){e=e.a(t);return e instanceof f?+me(e):+e}function I(e,t){e=e.a(t);return e instanceof f?me(e):""+e}function A(e,t){e=e.a(t);return e instanceof f?!!e.l:!!e}function Se(e,t,n){N.call(this,e.i),this.c=e,this.h=t,this.o=n,this.g=t.g||n.g,this.b=t.b||n.b,this.c==Ae&&(n.b||n.g||4==n.i||0==n.i||!t.f?t.b||t.g||4==t.i||0==t.i||!n.f||(this.f={name:n.f.name,s:t}):this.f={name:t.f.name,s:n})}function b(e,t,n,r,o){var i;if(t=t.a(r),n=n.a(r),t instanceof f&&n instanceof f){for(r=E(t=g(t));r;r=E(t))for(i=E(o=g(n));i;i=E(o))if(e(d(r),d(i)))return!0;return!1}if(t instanceof f||n instanceof f){for(var s=typeof(r=t instanceof f?(o=t,n):(o=n,t)),a=E(i=g(o));a;a=E(i)){switch(s){case"number":a=+d(a);break;case"boolean":a=!!d(a);break;case"string":a=d(a);break;default:throw Error("Illegal primitive type for comparison.")}if(o==t&&e(a,r)||o==n&&e(r,a))return!0}return!1}return o?"boolean"==typeof t||"boolean"==typeof n?e(!!t,!!n):"number"==typeof t||"number"==typeof n?e(+t,+n):e(t,n):e(+t,+n)}function Te(e,t,n,r){this.a=e,this.w=t,this.i=n,this.m=r}!$&&!a||a&&9<=Number(ee)||$&&J("1.9.1"),a&&J("9"),e(Se),Se.prototype.a=function(e){return this.c.m(this.h,this.o,e)},Se.prototype.toString=function(){return"Binary Expression: "+this.c+S(this.h)+S(this.o)},Te.prototype.toString=function(){return this.a};var Ie={};function R(e,t,n,r){if(Ie.hasOwnProperty(e))throw Error("Binary operator already created: "+e);return e=new Te(e,t,n,r),Ie[e.toString()]=e}R("div",6,1,function(e,t,n){return T(e,n)/T(t,n)}),R("mod",6,1,function(e,t,n){return T(e,n)%T(t,n)}),R("*",6,1,function(e,t,n){return T(e,n)*T(t,n)}),R("+",5,1,function(e,t,n){return T(e,n)+T(t,n)}),R("-",5,1,function(e,t,n){return T(e,n)-T(t,n)}),R("<",4,2,function(e,t,n){return b(function(e,t){return e<t},e,t,n)}),R(">",4,2,function(e,t,n){return b(function(e,t){return t<e},e,t,n)}),R("<=",4,2,function(e,t,n){return b(function(e,t){return e<=t},e,t,n)}),R(">=",4,2,function(e,t,n){return b(function(e,t){return t<=e},e,t,n)});var Ae=R("=",3,2,function(e,t,n){return b(function(e,t){return e==t},e,t,n,!0)});function O(e,t,n){this.a=e,this.b=t||1,this.f=n||1}function be(e,t){if(t.a.length&&4!=e.i)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");N.call(this,e.i),this.c=e,this.h=t,this.g=e.g,this.b=e.b}function Re(n,e){if(e.length<n.A)throw Error("Function "+n.j+" expects at least"+n.A+" arguments, "+e.length+" given");if(null!==n.v&&e.length>n.v)throw Error("Function "+n.j+" expects at most "+n.v+" arguments, "+e.length+" given");n.B&&c(e,function(e,t){if(4!=e.i)throw Error("Argument "+t+" to function "+n.j+" is not of type Nodeset: "+e)}),N.call(this,n.i),this.h=n,this.c=e,Ee(this,n.g||j(e,function(e){return e.g})),Ne(this,n.D&&!e.length||n.C&&!!e.length||j(e,function(e){return e.b}))}function Oe(e,t,n,r,o,i,s,a,c){this.j=e,this.i=t,this.g=n,this.D=r,this.C=o,this.m=i,this.A=s,this.v=void 0!==a?a:s,this.B=!!c}R("!=",3,2,function(e,t,n){return b(function(e,t){return e!=t},e,t,n,!0)}),R("and",2,2,function(e,t,n){return A(e,n)&&A(t,n)}),R("or",1,2,function(e,t,n){return A(e,n)||A(t,n)}),e(be),be.prototype.a=function(e){return e=this.c.a(e),Be(this.h,e)},be.prototype.toString=function(){return"Filter:"+S(this.c)+S(this.h)},e(Re),Re.prototype.a=function(e){return this.h.m.apply(null,function(){return Array.prototype.concat.apply(Array.prototype,arguments)}(e,this.c))},Re.prototype.toString=function(){var e,t="Function: "+this.h;return this.c.length&&(e=o(this.c,function(e,t){return e+S(t)},"Arguments:"),t+=S(e)),t};var Ce={};function C(e,t,n,r,o,i,s,a){if(Ce.hasOwnProperty(e))throw Error("Function already created: "+e+".");Ce[e]=new Oe(e,t,n,r,!1,o,i,s,a)}function y(e,t){switch(this.h=e,this.c=void 0!==t?t:null,this.b=null,e){case"comment":this.b=8;break;case"text":this.b=3;break;case"processing-instruction":this.b=7;break;case"node":break;default:throw Error("Unexpected argument")}}function ye(e){return"comment"==e||"text"==e||"processing-instruction"==e||"node"==e}function ve(e){this.b=e,this.a=0}C("boolean",2,!(Oe.prototype.toString=function(){return this.j}),!1,function(e,t){return A(t,e)},1),C("ceiling",1,!1,!1,function(e,t){return Math.ceil(T(t,e))},1),C("concat",3,!1,!1,function(n,e){return o(function(e){return arguments.length<=2?Array.prototype.slice.call(e,1):Array.prototype.slice.call(e,1,void 0)}(arguments,1),function(e,t){return e+I(t,n)},"")},2,null),C("contains",2,!1,!1,function(e,t,n){return r(I(t,e),I(n,e))},2),C("count",1,!1,!1,function(e,t){return t.a(e).l},1,1,!0),C("false",2,!1,!1,function(){return!1},0),C("floor",1,!1,!1,function(e,t){return Math.floor(T(t,e))},1),C("id",4,!1,!1,function(e,t){var a=9==(n=e.a).nodeType?n:n.ownerDocument,n=I(t,e).split(/\s+/),r=[],o=(c(n,function(e){!(e=function(t){if(u){var e=a.all[t];if(e){if(e.nodeType&&t==e.id)return e;if(e.length){var n=e;var r=function(e){return t==e.id};e:{for(var o=n.length,i=l(n)?n.split(""):n,s=0;s<o;s++)if(s in i&&r.call(void 0,i[s],s,n)){o=s;break e}o=-1}return o<0?null:l(n)?n.charAt(o):n[o];return}}return null}return a.getElementById(t)}(e))||0<=V(r,e)||r.push(e)}),r.sort(ce),new f);return c(r,function(e){m(o,e)}),o},1),C("lang",2,!1,!1,function(){return!1},1),C("last",1,!0,!1,function(e){if(1!=arguments.length)throw Error("Function last expects ()");return e.f},0),C("local-name",3,!1,!0,function(e,t){t=t?fe(t.a(e)):e.a;return t?t.localName||t.nodeName.toLowerCase():""},0,1,!0),C("name",3,!1,!0,function(e,t){t=t?fe(t.a(e)):e.a;return t?t.nodeName.toLowerCase():""},0,1,!0),C("namespace-uri",3,!0,!1,function(){return""},0,1,!0),C("normalize-space",3,!1,!0,function(e,t){return(t?I(t,e):d(e.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1),C("not",2,!1,!1,function(e,t){return!A(t,e)},1),C("number",1,!1,!0,function(e,t){return t?T(t,e):+d(e.a)},0,1),C("position",1,!0,!1,function(e){return e.b},0),C("round",1,!1,!1,function(e,t){return Math.round(T(t,e))},1),C("starts-with",2,!1,!1,function(e,t,n){return t=I(t,e),e=I(n,e),0==t.lastIndexOf(e,0)},2),C("string",3,!1,!0,function(e,t){return t?I(t,e):d(e.a)},0,1),C("string-length",1,!1,!0,function(e,t){return(t?I(t,e):d(e.a)).length},0,1),C("substring",3,!1,!1,function(e,t,n,r){if(n=T(n,e),isNaN(n)||1/0==n||-1/0==n)return"";if(r=r?T(r,e):1/0,isNaN(r)||-1/0===r)return"";n=Math.round(n)-1;var o=Math.max(n,0);return e=I(t,e),1/0==r?e.substring(o):e.substring(o,n+Math.round(r))},2,3),C("substring-after",3,!1,!1,function(e,t,n){return t=I(t,e),e=I(n,e),-1==(n=t.indexOf(e))?"":t.substring(n+e.length)},2),C("substring-before",3,!1,!1,function(e,t,n){return t=I(t,e),e=I(n,e),-1==(e=t.indexOf(e))?"":t.substring(0,e)},2),C("sum",1,!1,!1,function(e,t){for(var n=g(t.a(e)),r=0,o=E(n);o;o=E(n))r+=+d(o);return r},1,1,!0),C("translate",3,!1,!1,function(e,t,n,r){t=I(t,e),n=I(n,e);var o=I(r,e);for(e={},r=0;r<n.length;r++){var i=n.charAt(r);i in e||(e[i]=o.charAt(r))}for(n="",r=0;r<t.length;r++)n+=(i=t.charAt(r))in e?e[i]:i;return n},3),C("true",2,!1,!1,function(){return!0},0),y.prototype.a=function(e){return null===this.b||this.b==e.nodeType},y.prototype.f=function(){return this.h},y.prototype.toString=function(){var e="Kind Test: "+this.h;return null!==this.c&&(e+=S(this.c)),e};var Le=/\$?(?:(?![0-9-\.])(?:\*|[\w-\.]+):)?(?![0-9-\.])(?:\*|[\w-\.]+)|\/\/|\.\.|::|\d+(?:\.\d*)?|\.\d+|"[^"]*"|'[^']*'|[!<>]=|\s+|./g,Me=/^\s/;function v(e,t){return e.b[e.a+(t||0)]}function L(e){return e.b[e.a++]}function _e(e){return e.b.length<=e.a}function we(e){N.call(this,3),this.c=e.substring(1,e.length-1)}function M(e,t){this.j=e.toLowerCase(),e="*"==this.j?"*":"http://www.w3.org/1999/xhtml",this.c=t?t.toLowerCase():e}function De(e,t){N.call(this,e.i),this.h=e,this.c=t,this.g=e.g,this.b=e.b,1!=this.c.length||(t=this.c[0]).u||t.c!=He||"*"!=(t=t.o).f()&&(this.f={name:t.f(),s:null})}function Pe(){N.call(this,4)}function xe(){N.call(this,4)}function Ue(e){return"/"==e||"//"==e}function Fe(e){N.call(this,4),this.c=e,Ee(this,j(this.c,function(e){return e.g})),Ne(this,j(this.c,function(e){return e.b}))}function ke(e,t){this.a=e,this.b=!!t}function Be(e,t,n){for(n=n||0;n<e.a.length;n++)for(var r,o=e.a[n],i=g(t),s=t.l,a=0;r=E(i);a++){var c=e.b?s-a:a+1;if("number"==typeof(r=o.a(new O(r,c,s))))c=c==r;else if("string"==typeof r||"boolean"==typeof r)c=!!r;else{if(!(r instanceof f))throw Error("Predicate.evaluate returned an unexpected type.");c=0<r.l}if(!c){if(r=(c=i).f,!(u=c.a))throw Error("Next must be called at least once before remove.");var l=u.b,u=u.a;l?l.a=u:r.a=u,u?u.b=l:r.b=l,r.l--,c.a=null}}return t}function _(e,t,n,r){N.call(this,4),this.c=e,this.o=t,this.h=n||new ke([]),this.u=!!r,t=0<(t=this.h).a.length?t.a[0].f:null,e.b&&t&&(e=t.name,e=u?e.toLowerCase():e,this.f={name:e,s:t.s});e:{for(e=this.h,t=0;t<e.a.length;t++)if((n=e.a[t]).g||1==n.i||0==n.i){e=!0;break e}e=!1}this.g=e}function Ge(e,t,n,r){this.j=e,this.f=t,this.a=n,this.b=r}e(we),we.prototype.a=function(){return this.c},we.prototype.toString=function(){return"Literal: "+this.c},M.prototype.a=function(e){var t=e.nodeType;return!(1!=t&&2!=t||(t=void 0!==e.localName?e.localName:e.nodeName,"*"!=this.j&&this.j!=t.toLowerCase()||"*"!=this.c&&this.c!=(e.namespaceURI?e.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")))},M.prototype.f=function(){return this.j},M.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==this.c?"":this.c+":")+this.j},e(De),e(Pe),Pe.prototype.a=function(e){var t=new f;return 9==(e=e.a).nodeType?m(t,e):m(t,e.ownerDocument),t},Pe.prototype.toString=function(){return"Root Helper Expression"},e(xe),xe.prototype.a=function(e){var t=new f;return m(t,e.a),t},xe.prototype.toString=function(){return"Context Helper Expression"},De.prototype.a=function(e){var t=this.h.a(e);if(!(t instanceof f))throw Error("Filter expression must evaluate to nodeset.");for(var n=0,r=(e=this.c).length;n<r&&t.l;n++){var o,i=e[n],s=g(t,i.c.a);if(i.g||i.c!=Xe)if(i.g||i.c!=$e)for(o=E(s),t=i.a(new O(o));null!=(o=E(s));)t=de(t,o=i.a(new O(o)));else o=E(s),t=i.a(new O(o));else{for(o=E(s);(t=E(s))&&(!o.contains||o.contains(t))&&8&t.compareDocumentPosition(o);o=t);t=i.a(new O(o))}}return t},De.prototype.toString=function(){var e,t="Path Expression:"+S(this.h);return this.c.length&&(e=o(this.c,function(e,t){return e+S(t)},"Steps:"),t+=S(e)),t},e(Fe),Fe.prototype.a=function(t){var n=new f;return c(this.c,function(e){if(!((e=e.a(t))instanceof f))throw Error("Path expression must evaluate to NodeSet.");n=de(n,e)}),n},Fe.prototype.toString=function(){return o(this.c,function(e,t){return e+S(t)},"Union Expression:")},ke.prototype.toString=function(){return o(this.a,function(e,t){return e+S(t)},"Predicates:")},e(_),_.prototype.a=function(e){var t=e.a,n=null,r=null,o=null,i=0;if((n=this.f)&&(r=n.name,o=n.s?I(n.s,e):null,i=1),this.u)if(this.g||this.c!=je)if(t=E(e=g(new _(qe,new y("node")).a(e))))for(n=this.m(t,r,o,i);null!=(t=E(e));)n=de(n,this.m(t,r,o,i));else n=new f;else n=re(this.o,t,r,o),n=Be(this.h,n,i);else n=this.m(e.a,r,o,i);return n},_.prototype.m=function(e,t,n,r){return e=this.c.f(this.o,e,t,n),Be(this.h,e,r)},_.prototype.toString=function(){var e,t="Step:"+S("Operator: "+(this.u?"//":"/"));return this.c.j&&(t+=S("Axis: "+this.c)),t+=S(this.o),this.h.a.length&&(e=o(this.h.a,function(e,t){return e+S(t)},"Predicates:"),t+=S(e)),t},Ge.prototype.toString=function(){return this.j};var Ve={};function w(e,t,n,r){if(Ve.hasOwnProperty(e))throw Error("Axis already created: "+e);return t=new Ge(e,t,n,!!r),Ve[e]=t}w("ancestor",function(e,t){for(var n=new f,r=t;r=r.parentNode;)e.a(r)&&pe(n,r);return n},!0),w("ancestor-or-self",function(e,t){for(var n=new f,r=t;e.a(r)&&pe(n,r),r=r.parentNode;);return n},!0);var He=w("attribute",function(e,t){var n=new f;if("style"==(i=e.f())&&u&&t.style)return m(n,new h(t.style,t,"style",t.style.cssText)),n;var r=t.attributes;if(r)if(e instanceof y&&null===e.b||"*"==i)for(var o,i=0;o=r[i];i++)u?o.nodeValue&&m(n,ne(t,o)):m(n,o);else(o=r.getNamedItem(i))&&(u?o.nodeValue&&m(n,ne(t,o)):m(n,o));return n},!1),je=w("child",function(e,t,n,r,o){return(u?function(e,t,n,r,o){var i,s;return(e instanceof M||8==e.b||n&&null===e.b)&&(i=t.childNodes)?("*"!=(s=se(e))&&!(i=H(i,function(e){return e.tagName&&e.tagName.toLowerCase()==s}))||(n&&(i=H(i,function(e){return p(e,n,r)})),c(i,function(e){"*"==s&&("!"==e.tagName||"*"==s&&1!=e.nodeType)||m(o,e)})),o):oe(e,t,n,r,o)}:oe).call(null,e,t,l(n)?n:null,l(r)?r:null,o||new f)},!1,!0),qe=(w("descendant",re,!1,!0),w("descendant-or-self",function(e,t,n,r){var o=new f;return p(t,n,r)&&e.a(t)&&m(o,t),re(e,t,n,r,o)},!1,!0)),Xe=w("following",function(e,t,n,r){var o=new f;do{for(var i=t;i=i.nextSibling;)p(i,n,r)&&e.a(i)&&m(o,i),o=re(e,i,n,r,o)}while(t=t.parentNode);return o},!1,!0),Ye=(w("following-sibling",function(e,t){for(var n=new f,r=t;r=r.nextSibling;)e.a(r)&&m(n,r);return n},!1),w("namespace",function(){return new f},!1),w("parent",function(e,t){var n=new f;if(9==t.nodeType)return n;if(2==t.nodeType)return m(n,t.ownerElement),n;t=t.parentNode;return e.a(t)&&m(n,t),n},!1)),$e=w("preceding",function(e,t,n,r){for(var o=new f,i=[];i.unshift(t),t=t.parentNode;);for(var s=1,a=i.length;s<a;s++){var c=[];for(t=i[s];t=t.previousSibling;)c.unshift(t);for(var l=0,u=c.length;l<u;l++)p(t=c[l],n,r)&&e.a(t)&&m(o,t),o=re(e,t,n,r,o)}return o},!0,!0),We=(w("preceding-sibling",function(e,t){for(var n=new f,r=t;r=r.previousSibling;)e.a(r)&&pe(n,r);return n},!0),w("self",function(e,t){var n=new f;return e.a(t)&&m(n,t),n},!1));function Ke(e){N.call(this,1),this.c=e,this.g=e.g,this.b=e.b}function ze(e){N.call(this,1),this.c=e}function Qe(e,t){this.a=e,this.b=t}function Je(e){for(var t=[];;){D(e,"Missing right hand side of binary expression.");var n=function e(t){if("-"==v(t.a))return L(t.a),new Ke(e(t));var n=nt(t);if("|"!=v(t.a))t=n;else{for(n=[n];"|"==L(t.a);)D(t,"Missing next union location path."),n.push(nt(t));t.a.a--,t=new Fe(n)}return t}(e),r=L(e.a);if(!r)break;var o=(r=Ie[r]||null)&&r.w;if(!o){e.a.a--;break}for(;t.length&&o<=t[t.length-1].w;)n=new Se(t.pop(),t.pop(),n);t.push(n,r)}for(;t.length;)n=new Se(t.pop(),t.pop(),n);return n}function D(e,t){if(_e(e.a))throw Error(t)}function Ze(e,t){e=L(e.a);if(e!=t)throw Error("Bad token, expected: "+t+" got: "+e)}function et(e){if(")"!=(e=L(e.a)))throw Error("Bad token: "+e)}function tt(e){if((e=L(e.a)).length<2)throw Error("Unclosed literal string");return new we(e)}function nt(e){var t,n,r=[];if(Ue(v(e.a))){if(t=L(e.a),n=v(e.a),"/"==t&&(_e(e.a)||"."!=n&&".."!=n&&"@"!=n&&"*"!=n&&!/(?![0-9])[\w]/.test(n)))return new Pe;n=new Pe,D(e,"Missing next location step."),t=rt(e,t),r.push(t)}else{e:{switch(n=(t=v(e.a)).charAt(0)){case"$":throw Error("Variable reference not allowed in HTML XPath");case"(":L(e.a),t=Je(e),D(e,'unclosed "("'),Ze(e,")");break;case'"':case"'":t=tt(e);break;default:if(isNaN(+t)){if(ye(t)||!/(?![0-9])[\w]/.test(n)||"("!=v(e.a,1)){t=null;break e}for(t=L(e.a),t=Ce[t]||null,L(e.a),n=[];")"!=v(e.a)&&(D(e,"Missing function argument list."),n.push(Je(e)),","==v(e.a));)L(e.a);D(e,"Unclosed function argument list."),et(e),t=new Re(t,n)}else t=new ze(+L(e.a))}"["==v(e.a)&&(t=new be(t,n=new ke(ot(e))))}if(t){if(!Ue(v(e.a)))return t;n=t}else t=rt(e,"/"),n=new xe,r.push(t)}for(;Ue(v(e.a));)t=L(e.a),D(e,"Missing next location step."),t=rt(e,t),r.push(t);return new De(n,r)}function rt(e,t){var n,r,o,i,s;if("/"!=t&&"//"!=t)throw Error('Step op should be "/" or "//"');if("."==v(e.a))return r=new _(We,new y("node")),L(e.a),r;if(".."==v(e.a))return r=new _(Ye,new y("node")),L(e.a),r;if("@"==v(e.a))i=He,L(e.a),D(e,"Missing attribute name");else if("::"==v(e.a,1)){if(!/(?![0-9])[\w]/.test(v(e.a).charAt(0)))throw Error("Bad token: "+L(e.a));if(n=L(e.a),!(i=Ve[n]||null))throw Error("No axis with name: "+n);L(e.a),D(e,"Missing node name")}else i=je;if(n=v(e.a),!/(?![0-9])[\w\*]/.test(n.charAt(0)))throw Error("Bad token: "+L(e.a));if("("==v(e.a,1)){if(!ye(n))throw Error("Invalid node type: "+n);if(!ye(n=L(e.a)))throw Error("Invalid type name: "+n);Ze(e,"("),D(e,"Bad nodetype");var a=null;'"'!=(o=v(e.a).charAt(0))&&"'"!=o||(a=tt(e)),D(e,"Bad nodetype"),et(e),n=new y(n,a)}else if(-1==(o=(n=L(e.a)).indexOf(":")))n=new M(n);else{if("*"==(a=n.substring(0,o)))s="*";else if(!(s=e.b(a)))throw Error("Namespace prefix not declared: "+a);n=new M(n=n.substr(o+1),s)}return o=new ke(ot(e),i.a),r||new _(i,n,o,"//"==t)}function ot(e){for(var t=[];"["==v(e.a);){L(e.a),D(e,"Missing predicate expression.");var n=Je(e);t.push(n),D(e,"Unclosed predicate expression."),Ze(e,"]")}return t}function it(){return null}function st(e,t){if(e.prefix==t)return e.namespaceURI||"http://www.w3.org/1999/xhtml";var n=e.getAttributeNode("xmlns:"+t);return n&&n.specified?n.value||null:e.parentNode&&9!=e.parentNode.nodeType?st(e.parentNode,t):null}function at(e,t){if(!e.length)throw Error("Empty XPath expression.");e=function(e){e=e.match(Le);for(var t=0;t<e.length;t++)Me.test(e[t])&&e.splice(t,1);return new ve(e)}(e);if(_e(e))throw Error("Invalid XPath expression.");t?"function"!=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}(t)&&(t=k(t.lookupNamespaceURI,t)):t=function(){return null};var n=Je(new Qe(e,t));if(!_e(e))throw Error("Bad token: "+L(e));this.evaluate=function(e,t){return new P(n.a(new O(e)),t)}}function P(e,t){if(0==t)if(e instanceof f)t=4;else if("string"==typeof e)t=2;else if("number"==typeof e)t=1;else{if("boolean"!=typeof e)throw Error("Unexpected evaluation result.");t=3}if(2!=t&&1!=t&&3!=t&&!(e instanceof f))throw Error("value could not be converted to the specified type");switch(this.resultType=t){case 2:this.stringValue=e instanceof f?me(e):""+e;break;case 1:this.numberValue=e instanceof f?+me(e):+e;break;case 3:this.booleanValue=e instanceof f?0<e.l:!!e;break;case 4:case 5:case 6:case 7:for(var n=g(e),r=[],o=E(n);o;o=E(n))r.push(o instanceof h?o.a:o);this.snapshotLength=e.l,this.invalidIteratorState=!1;break;case 8:case 9:n=fe(e),this.singleNodeValue=n instanceof h?n.a:n;break;default:throw Error("Unknown XPathResult type.")}var i=0;this.iterateNext=function(){if(4!=t&&5!=t)throw Error("iterateNext called with wrong result type");return i>=r.length?null:r[i++]},this.snapshotItem=function(e){if(6!=t&&7!=t)throw Error("snapshotItem called with wrong result type");return e>=r.length||e<0?null:r[e]}}function ct(e){this.lookupNamespaceURI=function e(t){switch(t.nodeType){case 1:return function(t){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}(st,t);case 9:return e(t.documentElement);case 11:case 10:case 6:case 12:return it;default:return t.parentNode?e(t.parentNode):it}}(e)}function lt(e,t){var e=e||s,n=e.Document&&e.Document.prototype||e.document;n.evaluate&&!t||(e.XPathResult=P,n.evaluate=function(e,t,n,r){return new at(e,n).evaluate(t,r)},n.createExpression=function(e,t){return new at(e,t)},n.createNSResolver=function(e){return new ct(e)})}e(Ke),Ke.prototype.a=function(e){return-T(this.c,e)},Ke.prototype.toString=function(){return"Unary Expression: -"+S(this.c)},e(ze),ze.prototype.a=function(){return this.c},ze.prototype.toString=function(){return"Number: "+this.c},P.ANY_TYPE=0,P.NUMBER_TYPE=1,P.STRING_TYPE=2,P.BOOLEAN_TYPE=3,P.UNORDERED_NODE_ITERATOR_TYPE=4,P.ORDERED_NODE_ITERATOR_TYPE=5,P.UNORDERED_NODE_SNAPSHOT_TYPE=6,P.ORDERED_NODE_SNAPSHOT_TYPE=7,P.ANY_UNORDERED_NODE_TYPE=8,P.FIRST_ORDERED_NODE_TYPE=9;var ut,ht=["wgxpath","install"],x=s;ht[0]in x||!x.execScript||x.execScript("var "+ht[0]);for(;ht.length&&(ut=ht.shift());)ht.length?x=x[ut]||(x[ut]={}):x[ut]=lt;dt.exports.install=lt,dt.exports.XPathResultType={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}}.call(t.g)}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null),r=(__webpack_require__.r(n),{});leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&e&&t;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach(e=>r[e]=()=>t[e]);return r.default=()=>t,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";function s(e,s,a,c){return new(a=a||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((c=c.apply(e,s||[])).next())})}s(void 0,void 0,void 0,function*(){if("undefined"==typeof self){(self=global.self=global).DedicatedWorkerGlobalScope=global.constructor;const{parentPort:s,workerData:r}=yield import("node:worker_threads");global.addEventListener=(e,t)=>{s.on(e,t)},global.postMessage=e=>{s.postMessage({data:e})},global.maps=r.maps,global.require||(yield import("./require.mjs")),global.getMap=e=>Promise.resolve(JSON.stringify(global.require(e)))}else(global=self.global=self).getMap=e=>fetch(e).then(e=>e.json()).catch(e=>console.log(e));global.SREfeature={custom:e=>global.getMap(global.maps+`/${e}.json`)},yield(global.isLab?import("./sre-lab.js"):Promise.resolve().then(__webpack_require__.bind(__webpack_require__,581))).then(e=>global.SRE=e),self.addEventListener("message",function(e){e.data.debug&&console.log("Client  >>>  Worker:",e.data);const{cmd:t,data:n}=e.data;Object.hasOwn(r,t)?(o("Log","running "+t),r[t](n).then(e=>i(t,{result:e})).catch(e=>i(t,{error:e.message}))):i(t,{error:"Invalid worker command: "+t})},!1);const r={import:e=>Array.isArray(e.imports)?Promise.all(e.imports.map(e=>__webpack_require__(238)(e))):__webpack_require__(238)(e.imports),setup:e=>e?(SRE.setupEngine(e),SRE.engineReady()):Promise.resolve(),speech:e=>t(SRE.workerSpeech,e.mml,e.options),nextRules:e=>t(SRE.workerNextRules,e.mml,e.options),nextStyle:e=>t(SRE.workerNextStyle,e.mml,e.options,e.nodeId),localePreferences(t){return s(this,void 0,void 0,function*(){var e=yield SRE.workerLocalePreferences(t.options);return e&&JSON.stringify(e)})},relevantPreferences(t){return s(this,void 0,void 0,function*(){var e;return null!=(e=yield SRE.workerRelevantPreferences(t.mml,t.id))?e:""})}};function o(e,t){try{self.postMessage({cmd:e,data:t})}catch(e){console.log("Posting error in worker for ",{message:e.message,stack:e.stack,fileName:e.fileName,lineNumber:e.lineNumber})}}function i(e,t){o("Log","finished "+e),o("Finished",Object.assign(Object.assign({},t),{cmd:e,success:!t.error}))}function t(t,n,r,...o){return s(this,void 0,void 0,function*(){if(!n)return"";var e=null!=(e=yield t.call(null,n,r,...o))?e:{};return JSON.stringify(e)})}yield SRE.engineReady(),o("Ready",{})})})()})();